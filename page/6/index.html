<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://tawen.github.io">
  <title>影子爱乘凉</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="影子爱乘凉个人博客">
<meta property="og:type" content="website">
<meta property="og:title" content="影子爱乘凉">
<meta property="og:url" content="http://tawen.github.io/page/6/index.html">
<meta property="og:site_name" content="影子爱乘凉">
<meta property="og:description" content="影子爱乘凉个人博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="影子爱乘凉">
<meta name="twitter:description" content="影子爱乘凉个人博客">
  
    <link rel="alternative" href="/atom.xml" title="影子爱乘凉" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/main.css?v=4.0.0">
  

  

</head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      <div class="overlay">
	<svg style="position:absolute;left:0;bottom:0" class="editorial" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none">
		<defs><path id="gentle-wave" d="M-160 44c30 0
		  58-18 88-18s
		  58 18 88 18
		  58-18 88-18
		  58 18 88 18
		  v44h-352z"></path>
		  </defs>
		  <g class="parallax">
			<use xlink:href="#gentle-wave" x="50" y="0" fill="rgba(128,128,128,.5)"></use>
			<use xlink:href="#gentle-wave" x="50" y="3" fill="rgba(128,128,128,.5)"></use>
			<use xlink:href="#gentle-wave" x="50" y="6" fill="rgba(128,128,128,.5)"></use>
			</g>
		</svg>
		
</div>
<style>
	.parallax>use {
    animation: move-forever 12s linear infinite
  }
  .parallax>use:nth-child(1) {
    animation-delay: -2s
  }
  .parallax>use:nth-child(2) {
    animation-delay: -2s;
    animation-duration: 5s
  }
  .parallax>use:nth-child(3) {
    animation-delay: -4s;
    animation-duration: 3s
  }
  @keyframes move-forever {
    0% {
      transform: translate(-90px, 0)
    }
    100% {
      transform: translate(85px, 0)
    }
	}
	#header .profilepic:hover {
  -webkit-animation: btnGroups 1s linear;
  -webkit-animation: btnGroups 1s linear;
  -moz-animation: btnGroups 1s linear;
  -ms-animation: btnGroups 1s linear;
  animation: btnGroups 1s linear;
}
@-webkit-keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
  }
}
@-moz-keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
    -moz-transform: scale(1.2, 0.8);
    -ms-transform: scale(1.2, 0.8);
    transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
    -moz-transform: scale(1.18, 0.82);
    -ms-transform: scale(1.18, 0.82);
    transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
    -moz-transform: scale(1.16, 0.84);
    -ms-transform: scale(1.16, 0.84);
    transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
    -moz-transform: scale(1.13, 0.87);
    -ms-transform: scale(1.13, 0.87);
    transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
    -moz-transform: scale(1.1, 0.9);
    -ms-transform: scale(1.1, 0.9);
    transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
    -moz-transform: scale(1.07, 0.93);
    -ms-transform: scale(1.07, 0.93);
    transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
    -moz-transform: scale(1.04, 0.96);
    -ms-transform: scale(1.04, 0.96);
    transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
    -moz-transform: scale(0.97, 1.03);
    -ms-transform: scale(0.97, 1.03);
    transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
    -moz-transform: scale(0.96, 1.04);
    -ms-transform: scale(0.96, 1.04);
    transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
    -moz-transform: scale(0.98, 1.02);
    -ms-transform: scale(0.98, 1.02);
    transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
}
@-webkit-keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
    -moz-transform: scale(1.2, 0.8);
    -ms-transform: scale(1.2, 0.8);
    transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
    -moz-transform: scale(1.18, 0.82);
    -ms-transform: scale(1.18, 0.82);
    transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
    -moz-transform: scale(1.16, 0.84);
    -ms-transform: scale(1.16, 0.84);
    transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
    -moz-transform: scale(1.13, 0.87);
    -ms-transform: scale(1.13, 0.87);
    transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
    -moz-transform: scale(1.1, 0.9);
    -ms-transform: scale(1.1, 0.9);
    transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
    -moz-transform: scale(1.07, 0.93);
    -ms-transform: scale(1.07, 0.93);
    transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
    -moz-transform: scale(1.04, 0.96);
    -ms-transform: scale(1.04, 0.96);
    transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
    -moz-transform: scale(0.97, 1.03);
    -ms-transform: scale(0.97, 1.03);
    transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
    -moz-transform: scale(0.96, 1.04);
    -ms-transform: scale(0.96, 1.04);
    transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
    -moz-transform: scale(0.98, 1.02);
    -ms-transform: scale(0.98, 1.02);
    transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
}
@-o-keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
    -moz-transform: scale(1.2, 0.8);
    -ms-transform: scale(1.2, 0.8);
    transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
    -moz-transform: scale(1.18, 0.82);
    -ms-transform: scale(1.18, 0.82);
    transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
    -moz-transform: scale(1.16, 0.84);
    -ms-transform: scale(1.16, 0.84);
    transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
    -moz-transform: scale(1.13, 0.87);
    -ms-transform: scale(1.13, 0.87);
    transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
    -moz-transform: scale(1.1, 0.9);
    -ms-transform: scale(1.1, 0.9);
    transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
    -moz-transform: scale(1.07, 0.93);
    -ms-transform: scale(1.07, 0.93);
    transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
    -moz-transform: scale(1.04, 0.96);
    -ms-transform: scale(1.04, 0.96);
    transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
    -moz-transform: scale(0.97, 1.03);
    -ms-transform: scale(0.97, 1.03);
    transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
    -moz-transform: scale(0.96, 1.04);
    -ms-transform: scale(0.96, 1.04);
    transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
    -moz-transform: scale(0.98, 1.02);
    -ms-transform: scale(0.98, 1.02);
    transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
}
@keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
    -moz-transform: scale(1.2, 0.8);
    -ms-transform: scale(1.2, 0.8);
    transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
    -moz-transform: scale(1.18, 0.82);
    -ms-transform: scale(1.18, 0.82);
    transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
    -moz-transform: scale(1.16, 0.84);
    -ms-transform: scale(1.16, 0.84);
    transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
    -moz-transform: scale(1.13, 0.87);
    -ms-transform: scale(1.13, 0.87);
    transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
    -moz-transform: scale(1.1, 0.9);
    -ms-transform: scale(1.1, 0.9);
    transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
    -moz-transform: scale(1.07, 0.93);
    -ms-transform: scale(1.07, 0.93);
    transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
    -moz-transform: scale(1.04, 0.96);
    -ms-transform: scale(1.04, 0.96);
    transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
    -moz-transform: scale(0.97, 1.03);
    -ms-transform: scale(0.97, 1.03);
    transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
    -moz-transform: scale(0.96, 1.04);
    -ms-transform: scale(0.96, 1.04);
    transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
    -moz-transform: scale(0.98, 1.02);
    -ms-transform: scale(0.98, 1.02);
    transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
}
</style>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="https://tawen.github.io/img/photo.jpg" class="js-avatar">
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">影子爱乘凉</a></h1>
		</hgroup>

		
		<p class="header-subtitle">路走了28年，方向始终不变。</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">首页</a></li>
	        
				<li><a href="/archives">存档</a></li>
	        
				<li><a href="/about">关于</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a data-idx="0" q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/tawen" title="github"><i class="icon-github"></i></a>
		        
					<a class="weibo" target="_blank" href="http://weibo.com/3168014535/profile?topnav=1&wvr=6&is_all=1" title="weibo"><i class="icon-weibo"></i></a>
		        
					<a class="rss" target="_blank" href="/atom.xml" title="rss"><i class="icon-rss"></i></a>
		        
					<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/liu-zhen-hua-74-57" title="zhihu"><i class="icon-zhihu"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-sort"></i></div>
		  <h1 class="header-author js-mobile-header hide">影子爱乘凉</h1>
		  <svg style="position:absolute;left:0;bottom:0" class="editorial" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none">
			<defs><path id="gentle-wave" d="M-160 44c30 0
			  58-18 88-18s
			  58 18 88 18
			  58-18 88-18
			  58 18 88 18
			  v44h-352z"></path>
			  </defs>
			  <g class="parallax">
				<use xlink:href="#gentle-wave" x="50" y="0" fill="rgba(128,128,128,.5)"></use>
				<use xlink:href="#gentle-wave" x="50" y="3" fill="rgba(128,128,128,.5)"></use>
				<use xlink:href="#gentle-wave" x="50" y="6" fill="rgba(128,128,128,.5)"></use>
				</g>
			</svg>
	  </div>
	  
	  <style>
		.parallax>use {
		animation: move-forever 12s linear infinite
	  }
	  .parallax>use:nth-child(1) {
		animation-delay: -2s
	  }
	  .parallax>use:nth-child(2) {
		animation-delay: -2s;
		animation-duration: 5s
	  }
	  .parallax>use:nth-child(3) {
		animation-delay: -4s;
		animation-duration: 3s
	  }
	  @keyframes move-forever {
		0% {
		  transform: translate(-90px, 0)
		}
		100% {
		  transform: translate(85px, 0)
		}
		}
		#header .profilepic:hover {
  -webkit-animation: btnGroups 1s linear;
  -webkit-animation: btnGroups 1s linear;
  -moz-animation: btnGroups 1s linear;
  -ms-animation: btnGroups 1s linear;
  animation: btnGroups 1s linear;
}
@-webkit-keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
  }
}
@-moz-keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
    -moz-transform: scale(1.2, 0.8);
    -ms-transform: scale(1.2, 0.8);
    transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
    -moz-transform: scale(1.18, 0.82);
    -ms-transform: scale(1.18, 0.82);
    transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
    -moz-transform: scale(1.16, 0.84);
    -ms-transform: scale(1.16, 0.84);
    transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
    -moz-transform: scale(1.13, 0.87);
    -ms-transform: scale(1.13, 0.87);
    transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
    -moz-transform: scale(1.1, 0.9);
    -ms-transform: scale(1.1, 0.9);
    transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
    -moz-transform: scale(1.07, 0.93);
    -ms-transform: scale(1.07, 0.93);
    transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
    -moz-transform: scale(1.04, 0.96);
    -ms-transform: scale(1.04, 0.96);
    transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
    -moz-transform: scale(0.97, 1.03);
    -ms-transform: scale(0.97, 1.03);
    transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
    -moz-transform: scale(0.96, 1.04);
    -ms-transform: scale(0.96, 1.04);
    transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
    -moz-transform: scale(0.98, 1.02);
    -ms-transform: scale(0.98, 1.02);
    transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
}
@-webkit-keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
    -moz-transform: scale(1.2, 0.8);
    -ms-transform: scale(1.2, 0.8);
    transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
    -moz-transform: scale(1.18, 0.82);
    -ms-transform: scale(1.18, 0.82);
    transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
    -moz-transform: scale(1.16, 0.84);
    -ms-transform: scale(1.16, 0.84);
    transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
    -moz-transform: scale(1.13, 0.87);
    -ms-transform: scale(1.13, 0.87);
    transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
    -moz-transform: scale(1.1, 0.9);
    -ms-transform: scale(1.1, 0.9);
    transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
    -moz-transform: scale(1.07, 0.93);
    -ms-transform: scale(1.07, 0.93);
    transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
    -moz-transform: scale(1.04, 0.96);
    -ms-transform: scale(1.04, 0.96);
    transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
    -moz-transform: scale(0.97, 1.03);
    -ms-transform: scale(0.97, 1.03);
    transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
    -moz-transform: scale(0.96, 1.04);
    -ms-transform: scale(0.96, 1.04);
    transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
    -moz-transform: scale(0.98, 1.02);
    -ms-transform: scale(0.98, 1.02);
    transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
}
@-o-keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
    -moz-transform: scale(1.2, 0.8);
    -ms-transform: scale(1.2, 0.8);
    transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
    -moz-transform: scale(1.18, 0.82);
    -ms-transform: scale(1.18, 0.82);
    transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
    -moz-transform: scale(1.16, 0.84);
    -ms-transform: scale(1.16, 0.84);
    transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
    -moz-transform: scale(1.13, 0.87);
    -ms-transform: scale(1.13, 0.87);
    transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
    -moz-transform: scale(1.1, 0.9);
    -ms-transform: scale(1.1, 0.9);
    transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
    -moz-transform: scale(1.07, 0.93);
    -ms-transform: scale(1.07, 0.93);
    transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
    -moz-transform: scale(1.04, 0.96);
    -ms-transform: scale(1.04, 0.96);
    transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
    -moz-transform: scale(0.97, 1.03);
    -ms-transform: scale(0.97, 1.03);
    transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
    -moz-transform: scale(0.96, 1.04);
    -ms-transform: scale(0.96, 1.04);
    transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
    -moz-transform: scale(0.98, 1.02);
    -ms-transform: scale(0.98, 1.02);
    transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
}
@keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
    -moz-transform: scale(1.2, 0.8);
    -ms-transform: scale(1.2, 0.8);
    transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
    -moz-transform: scale(1.18, 0.82);
    -ms-transform: scale(1.18, 0.82);
    transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
    -moz-transform: scale(1.16, 0.84);
    -ms-transform: scale(1.16, 0.84);
    transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
    -moz-transform: scale(1.13, 0.87);
    -ms-transform: scale(1.13, 0.87);
    transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
    -moz-transform: scale(1.1, 0.9);
    -ms-transform: scale(1.1, 0.9);
    transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
    -moz-transform: scale(1.07, 0.93);
    -ms-transform: scale(1.07, 0.93);
    transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
    -moz-transform: scale(1.04, 0.96);
    -ms-transform: scale(1.04, 0.96);
    transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
    -moz-transform: scale(0.97, 1.03);
    -ms-transform: scale(0.97, 1.03);
    transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
    -moz-transform: scale(0.96, 1.04);
    -ms-transform: scale(0.96, 1.04);
    transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
    -moz-transform: scale(0.98, 1.02);
    -ms-transform: scale(0.98, 1.02);
    transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
}
	</style>	  
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="https://tawen.github.io/img/photo.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">影子爱乘凉</h1>
			</hgroup>
			
			<p class="header-subtitle">路走了28年，方向始终不变。</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">首页</a></li>
		        
					<li><a href="/archives">存档</a></li>
		        
					<li><a href="/about">关于</a></li>
		        
		        
		        	<li><a href="/archives/">所有文章</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/tawen" title="github"><i class="icon-github"></i></a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/3168014535/profile?topnav=1&wvr=6&is_all=1" title="weibo"><i class="icon-weibo"></i></a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss"><i class="icon-rss"></i></a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/liu-zhen-hua-74-57" title="zhihu"><i class="icon-zhihu"></i></a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-blog20170213" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/13/blog20170213/">Javascript深浅拷贝</a>
    </h1>
  

        <a href="/2017/02/13/blog20170213/" class="archive-article-date">
  	<time datetime="2017-02-13T02:23:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-02-13</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>Javascript有五种基本数据类型（也就是简单数据类型），它们分别是：Undefined，Null，Boolean，Number和String。还含有一种复杂数据类型，就是对象</p>
</blockquote>
<p>注意Undefined和Null的区别，Undefined类型只有一个值，就是undefined，Null类型也只有一个值，也就是null<br>Undefined其实就是已声明未赋值的变量输出的结果<br>null其实就是一个不存在的对象的结果<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var c;</span><br><span class="line">console.log(c)//undefined</span><br><span class="line"></span><br><span class="line">console.log(document.getElementById(&apos;wsscat&apos;))//没有id为wsscat的节点,输出null</span><br></pre></td></tr></table></figure></p>
<p>简单的数据类型和复杂的数据类型有以下重要的区别</p>
<h2 id="对于简单数据类型"><a href="#对于简单数据类型" class="headerlink" title="对于简单数据类型"></a>对于简单数据类型</h2><p>它们值在占据了内存中固定大小的空间，并被保存在栈内存中。当一个变量向另一个变量复制基本类型的值，会创建这个值的一个副本，还有就是不能给基本数据类型的值添加属性<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var a = 1;</span><br><span class="line">var b = a;</span><br><span class="line">a.attr = &apos;wsscat&apos;;</span><br><span class="line">console.log(a.attr)//undefined</span><br></pre></td></tr></table></figure></p>
<p>上面代码中a就是简单数据类型（Number），b就是a的副本，它们两者都占有不同位置但相等的内存空间</p>
<h2 id="对于复杂的数据类型"><a href="#对于复杂的数据类型" class="headerlink" title="对于复杂的数据类型"></a>对于复杂的数据类型</h2><p>复杂的数据类型即引用类型，它的值是对象，保存在堆内存中，包含引用类型值的变量实际上包含的并不是对象本身，而是一个指向该对象的指针。从一个变量向另一个变量复制引用类型的值，复制的其实是指针，因此两个变量最终都指向同一个对象。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;</span><br><span class="line">            name:&apos;wsscat&apos;,</span><br><span class="line">            age:0</span><br><span class="line">        &#125;</span><br><span class="line">        var obj2 = obj;</span><br><span class="line">        obj2[&apos;c&apos;] = 5;</span><br><span class="line">        console.log(obj);//Object &#123;name: &quot;wsscat&quot;, age: 0, c: 5&#125;</span><br><span class="line">        console.log(obj2);////Object &#123;name: &quot;wsscat&quot;, age: 0, c: 5&#125;</span><br></pre></td></tr></table></figure></p>
<p>我们可以看到obj赋值给obj2后，当我们更改其中一个对象的属性值，两个对象都发生了改变，究其原因局势因为obj和obj2这两个变量都指向同一个指针，赋值只是复制了指针，所以当我们改变其中一个的值就会影响另外一个变量的值</p>
<h2 id="浅拷贝"><a href="#浅拷贝" class="headerlink" title="浅拷贝"></a>浅拷贝</h2><p>其实这段代码就是浅拷贝，有时候我们只是想备份数组，但是只是简单让它赋给一个变量，改变其中一个，另外一个就紧跟着改变，但很多时候这不是我们想要的</p>
<p>var obj = {<br>            name:’wsscat’,<br>            age:0<br>        }<br>        var obj2 = obj;<br>        obj2[‘c’] = 5;<br>        console.log(obj);//Object {name: “wsscat”, age: 0, c: 5}<br>        console.log(obj2);////Object {name: “wsscat”, age: 0, c: 5}</p>
<h2 id="深拷贝"><a href="#深拷贝" class="headerlink" title="深拷贝"></a>深拷贝</h2><h3 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h3><p>对于数组我们可以使用slice()和concat()方法来解决上面的问题<br><strong> slice </strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var arr = [&apos;wsscat&apos;, &apos;autumns&apos;, &apos;winds&apos;];</span><br><span class="line">        var arrCopy = arr.slice(0);</span><br><span class="line">        arrCopy[0] = &apos;tacssw&apos;</span><br><span class="line">        console.log(arr)//[&apos;wsscat&apos;, &apos;autumns&apos;, &apos;winds&apos;]</span><br><span class="line">        console.log(arrCopy)//[&apos;tacssw&apos;, &apos;autumns&apos;, &apos;winds&apos;]</span><br></pre></td></tr></table></figure></p>
<p><strong> concat </strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var arr = [&apos;wsscat&apos;, &apos;autumns&apos;, &apos;winds&apos;];</span><br><span class="line">        var arrCopy = arr.concat();</span><br><span class="line">        arrCopy[0] = &apos;tacssw&apos;</span><br><span class="line">        console.log(arr)//[&apos;wsscat&apos;, &apos;autumns&apos;, &apos;winds&apos;]</span><br><span class="line">        console.log(arrCopy)//[&apos;tacssw&apos;, &apos;autumns&apos;, &apos;winds&apos;]</span><br></pre></td></tr></table></figure></p>
<h3 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h3><p>对象我们可以定义一个新的对象并遍历新的属性上去实现深拷贝<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;</span><br><span class="line">            name:&apos;wsscat&apos;,</span><br><span class="line">            age:0</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        var obj2 = new Object();</span><br><span class="line">        obj2.name = obj.name;</span><br><span class="line">        obj2.age = obj.age</span><br><span class="line"></span><br><span class="line">        obj.name = &apos;autumns&apos;;</span><br><span class="line">        console.log(obj);//Object &#123;name: &quot;autumns&quot;, age: 0&#125;</span><br><span class="line">        console.log(obj2);//Object &#123;name: &quot;wsscat&quot;, age: 0&#125;</span><br></pre></td></tr></table></figure></p>
<p>当然我们可以封装好一个方法来处理对象的深拷贝，代码如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;</span><br><span class="line">            name: &apos;wsscat&apos;,</span><br><span class="line">            age: 0</span><br><span class="line">        &#125;</span><br><span class="line">        var deepCopy = function(source) &#123;</span><br><span class="line">            var result = &#123;&#125;;</span><br><span class="line">            for(var key in source) &#123;</span><br><span class="line">                if(typeof source[key] === &apos;object&apos;) &#123;</span><br><span class="line">                    result[key] = deepCopy(source[key])</span><br><span class="line">                &#125; else &#123;</span><br><span class="line">                    result[key] = source[key]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            return result;</span><br><span class="line">        &#125;</span><br><span class="line">        var obj3 = deepCopy(obj)</span><br><span class="line">        obj.name = &apos;autumns&apos;;</span><br><span class="line">        console.log(obj);//Object &#123;name: &quot;autumns&quot;, age: 0&#125;</span><br><span class="line">        console.log(obj3);//Object &#123;name: &quot;wsscat&quot;, age: 0&#125;</span><br></pre></td></tr></table></figure></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Javascript深浅拷贝/">Javascript深浅拷贝</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/前端技术/">前端技术</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/02/13/blog20170213/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-blog20170208" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/09/blog20170208/">dropload【移动端下拉刷新、上拉加载更多插件】</a>
    </h1>
  

        <a href="/2017/02/09/blog20170208/" class="archive-article-date">
  	<time datetime="2017-02-09T02:23:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-02-09</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>移动端下拉刷新、上拉加载更多插件</p>
</blockquote>
<p>下载地址：<a href="https://github.com/tawen/dropload" target="_blank" rel="noopener">https://github.com/tawen/dropload</a></p>
<h2 id="依赖-dependence"><a href="#依赖-dependence" class="headerlink" title="依赖 (dependence)"></a>依赖 (dependence)</h2><p>Zepto 或者 jQuery 1.7以上版本，推荐jQuery 2.x版本（二者不要同时引用）<br>Zepto or jQuery 1.7+，recommend to use jQuery 2.x（not use them at the same time）</p>
<h2 id="使用方法-usage"><a href="#使用方法-usage" class="headerlink" title="使用方法 (usage)"></a>使用方法 (usage)</h2><p>引用css和js<br>(basic)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;../dist/dropload.css&quot;&gt;</span><br><span class="line">&lt;script src=&quot;../dist/dropload.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">$(&apos;.element&apos;).dropload(&#123;</span><br><span class="line">    scrollArea : window,</span><br><span class="line">    loadDownFn : function(me)&#123;</span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            type: &apos;GET&apos;,</span><br><span class="line">            url: &apos;json/more.json&apos;,</span><br><span class="line">            dataType: &apos;json&apos;,</span><br><span class="line">            success: function(data)&#123;</span><br><span class="line">                alert(data);</span><br><span class="line">                // 每次数据加载完，必须重置</span><br><span class="line">                me.resetload();</span><br><span class="line">            &#125;,</span><br><span class="line">            error: function(xhr, type)&#123;</span><br><span class="line">                alert(&apos;Ajax error!&apos;);</span><br><span class="line">                // 即使加载出错，也得重置</span><br><span class="line">                me.resetload();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="参数列表-options"><a href="#参数列表-options" class="headerlink" title="参数列表 (options)"></a>参数列表 (options)</h2><h2 id="API"><a href="#API" class="headerlink" title="API"></a>API</h2><h2 id="已知问题"><a href="#已知问题" class="headerlink" title="已知问题"></a>已知问题</h2><p>由于部分Android中UC和QQ浏览器头部有地址栏，并且一开始滑动页面隐藏地址栏时，无法触发scroll和resize，所以会导致部分情况无法使用。解决方案1：增加distance距离，例如DEMO2中distance:50；解决方案2：加meta使之全屏显示</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=&quot;full-screen&quot; content=&quot;yes&quot;&gt;</span><br><span class="line">&lt;meta name=&quot;x5-fullscreen&quot; content=&quot;true&quot;&gt;</span><br></pre></td></tr></table></figure>
      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dropload/">dropload</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/前端技术/">前端技术</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/02/09/blog20170208/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-blog20170207" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/07/blog20170207/">jQuery源码分析--queue()队列方法</a>
    </h1>
  

        <a href="/2017/02/07/blog20170207/" class="archive-article-date">
  	<time datetime="2017-02-07T02:23:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-02-07</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="queue源码简化"><a href="#queue源码简化" class="headerlink" title="queue源码简化"></a>queue源码简化</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">jQuery.extend(&#123;</span><br><span class="line">	queue                push()</span><br><span class="line">	dequeue              shift()</span><br><span class="line">	_queueHooks</span><br><span class="line">&#125;);</span><br><span class="line">jQuery.fn.extend(&#123;</span><br><span class="line">	queue</span><br><span class="line">	dequeue</span><br><span class="line">	delay</span><br><span class="line">	clearQueue</span><br><span class="line">	promise</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a>基本用法</h2><blockquote>
<p>队列中存储的都是函数<br>工具方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">function aaa()&#123;</span><br><span class="line">	alert(1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function bbb()&#123;</span><br><span class="line">	alert(2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//$.queue( document , &apos;q1&apos; , aaa );   </span><br><span class="line">//$.queue( document , &apos;q1&apos; , bbb );</span><br><span class="line">//$.queue( document , &apos;q1&apos; , [aaa,bbb] );   </span><br><span class="line">//console.log(   $.queue( document , &apos;q1&apos; )   );</span><br><span class="line">//$.dequeue( document,&apos;q1&apos; );   //aaa()</span><br><span class="line">//$.dequeue( document,&apos;q1&apos; );   //bbb()</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>实例方法:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">function aaa()&#123;</span><br><span class="line">	alert(1);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function bbb()&#123;</span><br><span class="line">	alert(2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$(document).queue(&apos;q1&apos;,aaa);</span><br><span class="line">$(document).queue(&apos;q1&apos;,bbb);</span><br><span class="line"></span><br><span class="line">//console.log(  $(document).queue(&apos;q1&apos;)  );</span><br><span class="line"></span><br><span class="line">$(document).dequeue(&apos;q1&apos;);</span><br><span class="line">$(document).dequeue(&apos;q1&apos;);</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">$(this).animate(&#123;width : 300&#125;,2000).queue(function(next)&#123;</span><br><span class="line">	</span><br><span class="line">	$(this).css(&apos;height&apos;,300);</span><br><span class="line">	next();</span><br><span class="line">	</span><br><span class="line">&#125;).animate(&#123;left : 300&#125;,2000);</span><br><span class="line"></span><br><span class="line">/*$(this).animate(&#123;width : 300&#125;,2000,function()&#123;</span><br><span class="line">	</span><br><span class="line">	//$(this).css(&apos;height&apos;,300);</span><br><span class="line">	var This = this;</span><br><span class="line">	var timer = setInterval(function()&#123;</span><br><span class="line">		This.style.height = This.offsetHeight + 1 + &apos;px&apos;;</span><br><span class="line">		if( This.offsetHeight == 200 )&#123;</span><br><span class="line">			clearInterval(timer);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,30);</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;).animate(&#123;left : 300&#125;,2000);*/    </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">this).animate(&#123;width : 300&#125;,2000).queue(function(next)&#123;</span><br><span class="line">	</span><br><span class="line">	var This = this;</span><br><span class="line">	var timer = setInterval(function()&#123;</span><br><span class="line">		This.style.height = This.offsetHeight + 1 + &apos;px&apos;;</span><br><span class="line">		if( This.offsetHeight == 200 )&#123;</span><br><span class="line">			next();</span><br><span class="line">			clearInterval(timer);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,30);</span><br><span class="line">	</span><br><span class="line">	</span><br><span class="line">&#125;).animate(&#123;left : 300&#125;,2000);</span><br></pre></td></tr></table></figure>
<h2 id="delay-延迟队列执行"><a href="#delay-延迟队列执行" class="headerlink" title="delay 延迟队列执行"></a>delay 延迟队列执行</h2>
      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/queue/">queue()</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/jQuery源码分析/">jQuery源码分析</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/02/07/blog20170207/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-blog20170206" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/06/blog20170206/">CSS 专业技巧收集</a>
    </h1>
  

        <a href="/2017/02/06/blog20170206/" class="archive-article-date">
  	<time datetime="2017-02-06T02:05:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-02-06</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>一些CSS技巧的收集，能够帮助你提升专业水平。</p>
</blockquote>
<h2 id="使用-not-为导航添加-取消边框"><a href="#使用-not-为导航添加-取消边框" class="headerlink" title="使用 :not() 为导航添加/取消边框"></a>使用 :not() 为导航添加/取消边框</h2><p>很多人会这样给导航添加边框，然后给最后一个取消掉：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/* add border */</span><br><span class="line">.nav li &#123;</span><br><span class="line">  border-right: 1px solid #666;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* remove border */</span><br><span class="line">.nav li:last-child &#123;</span><br><span class="line">  border-right: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>其实，用CSS的 :not() 可以简化为下面的代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.nav li:not(:last-child) &#123;</span><br><span class="line">  border-right: 1px solid #666;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>当然，你也可以使用 .nav li + li 甚至 .nav li:first-child ~ li，但是使用 :not() 可以使意图更加明确。</p>
<h2 id="给-body-添加-line-height-属性"><a href="#给-body-添加-line-height-属性" class="headerlink" title="给 body 添加 line-height 属性"></a>给 body 添加 line-height 属性</h2><p>你不需要为 <figure class="highlight plain"><figcaption><span>``` 分别添加 line-height 属性，相反的，只需要添加到 body 上即可：</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">body &#123;</span><br><span class="line">  line-height: 1;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这样，文本元素就可以很容易的从 body 继承该属性。</p>
<h2 id="垂直居中"><a href="#垂直居中" class="headerlink" title="垂直居中"></a>垂直居中</h2><p>这并不是什么魔法，你可以垂直居中任何元素：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">html, body &#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">  margin: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">body &#123;</span><br><span class="line">  -webkit-align-items: center;  </span><br><span class="line">  -ms-flex-align: center;  </span><br><span class="line">  align-items: center;</span><br><span class="line">  display: -webkit-flex;</span><br><span class="line">  display: flex;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>还需要其他的？水平居中、垂直居中，在任何时间、任何地方？可以看看CSS-Tricks的这篇文章。<br>注意：flexbox 在 IE11 下存在一些bug。</p>
<h2 id="使用逗号分割列表"><a href="#使用逗号分割列表" class="headerlink" title="使用逗号分割列表"></a>使用逗号分割列表</h2><p>使列表看起来像是用逗号分割的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ul &gt; li:not(:last-child)::after &#123;</span><br><span class="line">  content: &quot;,&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>通过 :not() 伪类去掉最后一个元素后面的逗号。</p>
<h2 id="使用负的-nth-child-选取元素"><a href="#使用负的-nth-child-选取元素" class="headerlink" title="使用负的 nth-child 选取元素"></a>使用负的 nth-child 选取元素</h2><p>使用负的 nth-child 在 1 到 n 之间选择元素：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">li &#123;</span><br><span class="line">  display: none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 选择第1到3个元素并显示它们 */</span><br><span class="line">li:nth-child(-n+3) &#123;</span><br><span class="line">  display: block;</span><br><span class="line">&#125;</span><br><span class="line">当然，如果你了解 :not() 的话，还可以这么做：</span><br><span class="line">li:not(:nth-child(-n+3)) &#123;</span><br><span class="line">  display: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>是不是非常简单？</p>
<h2 id="使用-SVG-作-icon-图标"><a href="#使用-SVG-作-icon-图标" class="headerlink" title="使用 SVG 作 icon 图标"></a>使用 SVG 作 icon 图标</h2><p>没什么理由不使用 SVG 作 icon 图标：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.logo &#123;</span><br><span class="line">  background: url(&quot;logo.svg&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>SVG 对于任何分辨率的缩放效果都很好，并且支持 IE9+所有浏览器，所以，放弃使用 .png、.jpg、.gif文件吧。<br>注：以下代码对于使用辅助设备上网的用户可以提升可访问性：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.no-svg .icon-only:after &#123;</span><br><span class="line">  content: attr(aria-label);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="文本展示优化"><a href="#文本展示优化" class="headerlink" title="文本展示优化"></a>文本展示优化</h2><p>有时候字体并不是对于所有设备都显示为最佳效果，所以使用浏览器来帮忙吧：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">html &#123;</span><br><span class="line">  -moz-osx-font-smoothing: grayscale;</span><br><span class="line">  -webkit-font-smoothing: antialiased;</span><br><span class="line">  text-rendering: optimizeLegibility;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="使用-max-height-实现纯CSS幻灯片"><a href="#使用-max-height-实现纯CSS幻灯片" class="headerlink" title="使用 max-height 实现纯CSS幻灯片"></a>使用 max-height 实现纯CSS幻灯片</h2><p>使用 max-height 与超出隐藏实现纯CSS的幻灯片：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">.slider ul &#123;</span><br><span class="line">  max-height: 0;</span><br><span class="line">  overlow: hidden;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.slider:hover ul &#123;</span><br><span class="line">  max-height: 1000px;</span><br><span class="line">  transition: .3s ease; /* animate to max-height */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="继承-box-sizing"><a href="#继承-box-sizing" class="headerlink" title="继承 box-sizing"></a>继承 box-sizing</h2><p>让 box-sizing 继承自 html ：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">html &#123;</span><br><span class="line">  box-sizing: border-box;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">*, *:before, *:after &#123;</span><br><span class="line">  box-sizing: inherit;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这使得在插件或者其他组件中修改 box-sizing 属性变得更加容易。</p>
<h2 id="设置表格相同宽度"><a href="#设置表格相同宽度" class="headerlink" title="设置表格相同宽度"></a>设置表格相同宽度</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.calendar &#123;</span><br><span class="line">  table-layout: fixed;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="使用-Flexbox-来避免-Margin-Hacks"><a href="#使用-Flexbox-来避免-Margin-Hacks" class="headerlink" title="使用 Flexbox 来避免 Margin Hacks"></a>使用 Flexbox 来避免 Margin Hacks</h2><p>在做多列布局的时候，可以通过 Flexbox 的 space-between 属性来避免nth-、first-、 last-child 等 hacks：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.list &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">  justify-content: space-between;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.list .person &#123;</span><br><span class="line">  flex-basis: 23%;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这样，列之间的空白就会被均匀的填满。</p>
<h2 id="对空链接使用属性选择器"><a href="#对空链接使用属性选择器" class="headerlink" title="对空链接使用属性选择器"></a>对空链接使用属性选择器</h2><p>当 <a> 中没有文本而 href 不为空的时候，显示其链接：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a[href^=&quot;http&quot;]:empty::before &#123;</span><br><span class="line">  content: attr(href);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></a></p>
<p>浏览器支持<br>以上技巧支持大部分现代浏览器，如：Chrome、Firefox、Safari、Edge以及IE11。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/css技巧/">css技巧</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/前端技术/">前端技术</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/02/06/blog20170206/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-blog20170124" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/24/blog20170124/">javascript</a>
    </h1>
  

        <a href="/2017/01/24/blog20170124/" class="archive-article-date">
  	<time datetime="2017-01-24T06:16:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-01-24</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><ul>
<li>6种原始值（不可变。“除非重置当前变量，否则不能改变元素值。”）<ul>
<li>Null(只有一个值： null)</li>
<li>Undefined(一个没有被赋值的变量会有个默认值 undefined)</li>
<li>Number</li>
<li>Boolean(两个值：true 和 false)</li>
<li>String</li>
<li>Symbol</li>
</ul>
</li>
<li>和Object(对象指内存中的可以被标识符引用的一块区域)</li>
</ul>
<h2 id="数据类型检测"><a href="#数据类型检测" class="headerlink" title="数据类型检测"></a>数据类型检测</h2><p>typeof(对变量或值调用 typeof 运算符将返回(字符串)下列值之一)</p>
<pre><code>* undefined - Undefined类型
* number - Number类型
* boolean - Boolean类型
* string - String类型
* symbol - Symbol类型(ECMAScript6新增)
* function - 函数对象([[Call]]在ECMA-262条款中实现了)
* object - 引用类型 或 Null类型
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">typeof(Function) // function (Function是函数对象)</span><br><span class="line">typeof(new Function) // function (new Function也是是函数对象，同等：var func = function()&#123;&#125;)</span><br><span class="line">typeof(Array) // function (Array是函数对象)</span><br><span class="line">typeof(new Array) // object（实例化的Array就是object）</span><br></pre></td></tr></table></figure>
<h2 id="变量赋值时候的返回值："><a href="#变量赋值时候的返回值：" class="headerlink" title="变量赋值时候的返回值："></a>变量赋值时候的返回值：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var name = 123; // 返回undefined</span><br><span class="line">name = 456; // 返回456</span><br></pre></td></tr></table></figure>
<p>结语：定义变量的时候赋值返回:undefined 给已声明变量赋值时候返回当前赋值。</p>
<h2 id="获取元素距离页面的top、left"><a href="#获取元素距离页面的top、left" class="headerlink" title="获取元素距离页面的top、left"></a>获取元素距离页面的top、left</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">function getRec(ele) &#123;</span><br><span class="line">    var _t = document.documentElement.clientTop,</span><br><span class="line">        _l = document.documentElement.clientLeft,</span><br><span class="line">        rect = ele.getBoundingClientRect();</span><br><span class="line">    return &#123;</span><br><span class="line">        top: rect.top - _t,</span><br><span class="line">        right: rect.right - _l,</span><br><span class="line">        bottom: rect.bottom - _t,</span><br><span class="line">        left: rect.left - _l</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意：IE、Firefox3+、Opera9.5、Chrome、Safari支持，在IE中，默认坐标从(2,2)开始计算，导致最终距离比其他浏览器多出两个像素，我们需要做个兼容。</p>
</blockquote>
<h2 id="数字的固定小数位数"><a href="#数字的固定小数位数" class="headerlink" title="数字的固定小数位数"></a>数字的固定小数位数</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var a=8.88888,</span><br><span class="line">    b=8;</span><br><span class="line">console.log(a.toFixed(2)); // 8.89 或者 8.88</span><br><span class="line">console.log(b.toFixed(2)); // 8.00</span><br></pre></td></tr></table></figure>
<p>js是编译语言，数组长度是随时程序变化而变化的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var arr = [0, 1];</span><br><span class="line">arr[3] = 3;</span><br><span class="line">console.log(arr[2]); // undefined</span><br><span class="line">console.log(arr.length); // 4</span><br></pre></td></tr></table></figure></p>
<h2 id="矩阵的转置"><a href="#矩阵的转置" class="headerlink" title="矩阵的转置"></a>矩阵的转置</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">var arr = [ // 定义一个矩阵（二维数据）</span><br><span class="line">    [1, 2, 3, 4],</span><br><span class="line">    [5, 6, 6, 6],</span><br><span class="line">    [7, 6, 7, 8],</span><br><span class="line">    [8, 5, 3, 3]</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">function changeArr(arr) &#123; // 矩阵转置函数</span><br><span class="line">    var c;</span><br><span class="line">    for (var i = 1; i &lt; arr.length; i++) &#123;</span><br><span class="line">        for (var j = 0; j &lt; i; j++) &#123;</span><br><span class="line">            c = arr[i][j];</span><br><span class="line">            arr[i][j] = arr[j][i];</span><br><span class="line">            arr[j][i] = c;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">changeArr(arr);</span><br><span class="line">console.table(arr);</span><br></pre></td></tr></table></figure>
<h2 id="冒泡排序方法"><a href="#冒泡排序方法" class="headerlink" title="冒泡排序方法"></a>冒泡排序方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">// 第一轮是对n-1的位置定位</span><br><span class="line">// 第二轮是 每一个位置的数的 确定</span><br><span class="line">var arr = [1, 4, 5, 6, 99, 111, 112, 113, 133],</span><br><span class="line">    temp = 0,</span><br><span class="line">    flag = false;</span><br><span class="line">for (var i = 0; i &lt; arr.length - 1; i++) &#123;</span><br><span class="line">    document.writeln(&apos;come&apos;);</span><br><span class="line">    for (var j = 0; j &lt; arr.length - 1 - i; j++) &#123;</span><br><span class="line">        if (arr[j] &gt; arr[j + 1]) &#123;</span><br><span class="line">            temp = arr[j];</span><br><span class="line">            arr[j] = arr[j + 1];</span><br><span class="line">            arr[j + 1] = temp;</span><br><span class="line">            flag = true;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if (flag) &#123;</span><br><span class="line">        flag = false;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        break;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">for (var i = 0; i &lt; arr.length; i++) &#123;</span><br><span class="line">    document.writeln(arr[i]);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="二分查找"><a href="#二分查找" class="headerlink" title="二分查找"></a>二分查找</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">var arr = [41, 55, 76, 87, 88, 99, 123, 432, 546, 577, 688, 786];</span><br><span class="line"></span><br><span class="line">function twoFind(arr, wantVal, leftIndex, rightIndex) &#123;</span><br><span class="line">    if (leftIndex &gt; rightIndex) &#123;</span><br><span class="line">        document.writeln(&apos;SORRY: 找不到 &apos; + wantVal + &apos; ！&apos;);</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    var minIndex = Math.floor((leftIndex + rightIndex) / 2);</span><br><span class="line">    if (arr[minIndex] &gt; wantVal) &#123;</span><br><span class="line">        twoFind(arr, wantVal, leftIndex, minIndex - 1);</span><br><span class="line">    &#125; else if (arr[minIndex] &lt; wantVal) &#123;</span><br><span class="line">        twoFind(arr, wantVal, minIndex + 1, rightIndex);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        document.writeln(&apos;找到了 &apos; + wantVal + &apos; ,下表为&apos; + minIndex);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">twoFind(arr, 9, 0, arr.length - 1);</span><br></pre></td></tr></table></figure>
<h2 id="js对象访问属性的二种方式"><a href="#js对象访问属性的二种方式" class="headerlink" title="js对象访问属性的二种方式"></a>js对象访问属性的二种方式</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function Person () &#123;&#125;;</span><br><span class="line">var new1 = new Person ();</span><br><span class="line">new1.name=&apos;冯杰&apos;;</span><br><span class="line">new1.age=21;</span><br><span class="line">window.alert(new1.name);</span><br><span class="line">window.alert(new1[&quot;age&quot;]);</span><br></pre></td></tr></table></figure>
<h2 id="js之delete只能删除对象的属性"><a href="#js之delete只能删除对象的属性" class="headerlink" title="js之delete只能删除对象的属性"></a>js之delete只能删除对象的属性</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function Person () &#123;&#125;;</span><br><span class="line">var me = new Person();</span><br><span class="line">me.name=&apos;冯杰&apos;;</span><br><span class="line">console.log(me.name);</span><br><span class="line">delete me.name;</span><br><span class="line">console.log(me.name);</span><br></pre></td></tr></table></figure>
<h2 id="在js中对象的方法不是通用的，如果生成n个对象，那么就有n个内存堆栈"><a href="#在js中对象的方法不是通用的，如果生成n个对象，那么就有n个内存堆栈" class="headerlink" title="在js中对象的方法不是通用的，如果生成n个对象，那么就有n个内存堆栈"></a>在js中对象的方法不是通用的，如果生成n个对象，那么就有n个内存堆栈</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// js 中 一切类 继承自 Object 而Object 有propotype</span><br><span class="line">// 下面是解决办法 prototype 获得类的static性质</span><br><span class="line">function God() &#123;&#125;</span><br><span class="line">God.prototype.shout = function() &#123;</span><br><span class="line">    window.alert(&apos;小狗叫&apos;);</span><br><span class="line">&#125;</span><br><span class="line">var dog1 = new God();</span><br><span class="line">var dog2 = new God();</span><br><span class="line">dog1.shout();</span><br><span class="line">dog2.shout();</span><br></pre></td></tr></table></figure>
<h2 id="对象"><a href="#对象" class="headerlink" title="对象"></a>对象</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">// js里要想创建对象 除了一般的创建方式 还有 通过Object 方式创建类</span><br><span class="line">// Object 类是所有js类的基类 Object 就表示对象（一切的对象）</span><br><span class="line">var p1 = new Object();</span><br><span class="line">p1.name = &apos;fj&apos;;</span><br><span class="line">window.alert(p1.name);</span><br><span class="line">window.alert(p1.constructor);</span><br><span class="line"></span><br><span class="line">// 原型链上新增默认对象方法</span><br><span class="line">var num = new Number(1);</span><br><span class="line">var num2 = 10;</span><br><span class="line">window.alert(num.constructor);</span><br><span class="line">window.alert(num2.constructor);</span><br><span class="line">// 上面2个弹出是一样的</span><br><span class="line">Number.prototype.add = function(a) &#123; //prototype是属于类的</span><br><span class="line">    return this + a;</span><br><span class="line">&#125;</span><br><span class="line">window.alert(num.add(1).add(2));</span><br><span class="line"></span><br><span class="line">// 小实验 为Array 添加 find(val) 方法</span><br><span class="line">Array.prototype.find = function(a) &#123;</span><br><span class="line">    for (var i = 0; i &lt; this.length; i++) &#123;</span><br><span class="line">        if (this[i] == a) &#123;</span><br><span class="line">            return i;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return &apos;find fail.&apos;;</span><br><span class="line">&#125;</span><br><span class="line">var arr = [0, 1, 2, 77, 4, 5];</span><br><span class="line">window.alert(arr.find(77));</span><br></pre></td></tr></table></figure>
<h2 id="arguments"><a href="#arguments" class="headerlink" title="arguments"></a>arguments</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function abc() &#123;</span><br><span class="line">    var sum = 0;</span><br><span class="line">    for (var i = 0; i &lt; arguments.length; i++) &#123;</span><br><span class="line">        sum += arguments[i];</span><br><span class="line">    &#125;</span><br><span class="line">    return sum;</span><br><span class="line">&#125;</span><br><span class="line">window.alert(abc(1, 2, 3));</span><br></pre></td></tr></table></figure>
<h2 id="call函数目的就是改变对象的this指向"><a href="#call函数目的就是改变对象的this指向" class="headerlink" title="call函数目的就是改变对象的this指向"></a>call函数目的就是改变对象的this指向</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var Person = &#123;</span><br><span class="line">    name: &apos;fjj&apos;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">function test() &#123;</span><br><span class="line">    window.alert(this.name);</span><br><span class="line">&#125;</span><br><span class="line">test.call(Person);</span><br></pre></td></tr></table></figure>
<h2 id="体会js的封装"><a href="#体会js的封装" class="headerlink" title="体会js的封装"></a>体会js的封装</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">function Person() &#123;</span><br><span class="line">    var name = &apos;fj&apos;; //私有</span><br><span class="line">    this.age = 21; //共有</span><br><span class="line">&#125;</span><br><span class="line">var p1 = new Person();</span><br><span class="line">window.alert(p1.name); //undefined</span><br><span class="line">window.alert(p1.age); //21</span><br></pre></td></tr></table></figure>
<h2 id="prototype的方法不能访问私有属性和方法"><a href="#prototype的方法不能访问私有属性和方法" class="headerlink" title="prototype的方法不能访问私有属性和方法"></a>prototype的方法不能访问私有属性和方法</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function Person() &#123;</span><br><span class="line">    var name = &apos;fj&apos;; //私有</span><br><span class="line">    this.age = 21;</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.showName = function() &#123;</span><br><span class="line">    window.alert(this.name);</span><br><span class="line">&#125;</span><br><span class="line">Person.prototype.showAge = function() &#123;</span><br><span class="line">    window.alert(this.age);</span><br><span class="line">&#125;</span><br><span class="line">var p1 = new Person();</span><br><span class="line">p1.showName();</span><br><span class="line">p1.showAge();</span><br></pre></td></tr></table></figure>
<h2 id="继承"><a href="#继承" class="headerlink" title="继承"></a>继承</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">// js 里面是对象冒充来继承的 不算是真正的继承 通过对象冒充 js可以实现多重继承和继承的效果 但是没有Extends关键字</span><br><span class="line">function Father(name, age) &#123;</span><br><span class="line">    this.name = name;</span><br><span class="line">    this.age = age;</span><br><span class="line">    this.show = function() &#123;</span><br><span class="line">        window.alert(this.name + &apos;---&apos; + this.age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function Son(name, age) &#123;</span><br><span class="line">    this.Father = Father;</span><br><span class="line">    this.Father(name, age); //通过对象冒充 实现继承 这一句非常重要 js是动态语言 不是编译语言 要执行才会分配空间</span><br><span class="line">&#125;</span><br><span class="line">var me = new Son(&apos;fj&apos;, 21);</span><br><span class="line">window.alert(me.name);</span><br><span class="line">me.show();</span><br></pre></td></tr></table></figure>
<h2 id="重载"><a href="#重载" class="headerlink" title="重载"></a>重载</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// js从常理来说是不支持重载的 但是又可以说是天然支持重载 因为js天然支持可变参数 而且我们可以通过arguments[]数组的长度判断 而做出相应的处理</span><br></pre></td></tr></table></figure>
<h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">// 闭包实际上设计一个对象的属性，何时被gc处理的问题 闭包和gc是相关联的</span><br></pre></td></tr></table></figure>
<h2 id="数组长度"><a href="#数组长度" class="headerlink" title="数组长度"></a>数组长度</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 数组的长度是根据下标的最大而确定的</span><br><span class="line">var arr = new Array();</span><br><span class="line">arr[&apos;a&apos;] = 1;</span><br><span class="line">arr[&apos;b&apos;] = 2;</span><br><span class="line">window.alert(arr.length); // 打出0</span><br></pre></td></tr></table></figure>
<h2 id="LazyMan"><a href="#LazyMan" class="headerlink" title="LazyMan"></a>LazyMan</h2><p>实现LazyMan（什么是LazyMan？请自行google）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">function _LazyMan(_name) &#123;</span><br><span class="line">    var _this = this;</span><br><span class="line">    _this.tasks = [];</span><br><span class="line">    _this.tasks.push(function() &#123;</span><br><span class="line">        console.log(&apos;Hi! This is &apos; + _name + &apos;!&apos;);</span><br><span class="line">        // 这里的this是window，所以要缓存this</span><br><span class="line">        _this.next();</span><br><span class="line">    &#125;);</span><br><span class="line">    setTimeout(function() &#123;</span><br><span class="line">        _this.next();</span><br><span class="line">    &#125;, 0);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// push函数里面的this和setTimeout函数里面的this都指向全局作用域，所以要缓存当前this指向</span><br><span class="line">_LazyMan.prototype.next = function() &#123;</span><br><span class="line">    var _fn = this.tasks.shift();</span><br><span class="line">    _fn &amp;&amp; _fn();</span><br><span class="line">&#125;</span><br><span class="line">_LazyMan.prototype.sleep = function(_time) &#123;</span><br><span class="line">    var _this = this;</span><br><span class="line">    _this.tasks.push(function() &#123;</span><br><span class="line">        setTimeout(function() &#123;</span><br><span class="line">            console.log(&apos;Wake up after &apos; + _time);</span><br><span class="line">            _this.next();</span><br><span class="line">        &#125;, _time);</span><br><span class="line">    &#125;);</span><br><span class="line">    return _this;</span><br><span class="line">&#125;</span><br><span class="line">_LazyMan.prototype.sleepFirst = function(_time) &#123;</span><br><span class="line">    var _this = this;</span><br><span class="line">    _this.tasks.unshift(function() &#123;</span><br><span class="line">        setTimeout(function() &#123;</span><br><span class="line">            console.log(&apos;Wake up after &apos; + _time);</span><br><span class="line">            _this.next();</span><br><span class="line">        &#125;, _time);</span><br><span class="line">    &#125;);</span><br><span class="line">    return _this;</span><br><span class="line">&#125;</span><br><span class="line">_LazyMan.prototype.eat = function(_eat) &#123;</span><br><span class="line">    var _this = this;</span><br><span class="line">    _this.tasks.push(function() &#123;</span><br><span class="line">        console.log(&apos;Eat &apos; + _eat);</span><br><span class="line">        _this.next();</span><br><span class="line">    &#125;);</span><br><span class="line">    return _this;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 封装对象</span><br><span class="line">var LazyMan = function(_name) &#123;</span><br><span class="line">    return new _LazyMan(_name);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/前端技术/">前端技术</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/01/24/blog20170124/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-blog20170123" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/23/blog20170123/">jQuery源码分析--data()数据缓存</a>
    </h1>
  

        <a href="/2017/01/23/blog20170123/" class="archive-article-date">
  	<time datetime="2017-01-23T02:23:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-01-23</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="data-attr-prop使用区别"><a href="#data-attr-prop使用区别" class="headerlink" title="data/attr/prop使用区别"></a>data/attr/prop使用区别</h2><p>attr:jquery中attr是通过原生js的getAttribute和setAttribute方法来实现的；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/*$(&apos;#div1&apos;).attr(&apos;name&apos;,&apos;hello&apos;);		</span><br><span class="line">alert( $(&apos;#div1&apos;).attr(&apos;name&apos;) );*/</span><br><span class="line">document.getElementById(&apos;div1&apos;).setAttribute(&apos;name&apos;,&apos;hello&apos;);</span><br><span class="line">alert( document.getElementById(&apos;div1&apos;).getAttribute(&apos;name&apos;) );</span><br></pre></td></tr></table></figure></p>
<p>prop：是通过原生dom对象的属性直接进行设置和获取属性值得；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/*$(&apos;#div1&apos;).prop(&apos;name&apos;,&apos;hello&apos;);	</span><br><span class="line">alert( $(&apos;#div1&apos;).prop(&apos;name&apos;) );*/</span><br><span class="line">document.getElementById(&apos;div1&apos;)[&apos;name&apos;] = &apos;hello&apos;;</span><br><span class="line">alert( document.getElementById(&apos;div1&apos;)[&apos;name&apos;] );</span><br></pre></td></tr></table></figure>
<p>data:设置大量数据（例如：json）；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$(&apos;#div1&apos;).data(&apos;name&apos;,&apos;hello&apos;);	</span><br><span class="line">alert( $(&apos;#div1&apos;).data(&apos;name&apos;) );</span><br></pre></td></tr></table></figure></p>
<h2 id="内存泄漏"><a href="#内存泄漏" class="headerlink" title="内存泄漏"></a>内存泄漏</h2><p><strong> 内存泄漏：内存泄露是指一块被分配的内存既不能使用，又不能回收，直到浏览器进程结束。</strong></p>
<p>内存泄露的几种情况</p>
<ul>
<li>循环引用</li>
<li>Javascript闭包</li>
<li>DOM插入顺序</li>
</ul>
<p>一个DOM对象被一个Javascript对象引用，与此同时又引用同一个或其它的Javascript对象，这个DOM对象可能会引发内存泄漏。这个DOM对象的引用将不会在脚本停止的时候被垃圾回收器回收。要想破坏循环引用，引用DOM元素的对象或DOM对象的引用需要被赋值为null。</p>
<p>含有DOM对象的循环引用将导致大部分当前主流浏览器内存泄露</p>
<p>第一种：多个对象循环引用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var a=new Object;</span><br><span class="line"></span><br><span class="line">var b=new Object;</span><br><span class="line"></span><br><span class="line">a.r=b;</span><br><span class="line"></span><br><span class="line">b.r=a;</span><br></pre></td></tr></table></figure></p>
<p>第二种：循环引用自己<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">var a=new Object;</span><br><span class="line"></span><br><span class="line">a.r=a;</span><br></pre></td></tr></table></figure></p>
<p>循环引用很常见且大部分情况下是无害的，但当参与循环引用的对象中有DOM对象或者ActiveX对象时，循环引用将导致内存泄露。</p>
<p>我们把例子中的任何一个new Object替换成document.getElementById或者document.createElement就会发生内存泄露了。</p>
<p><strong> 具体的就深入讨论了，这里的总结 </strong></p>
<ul>
<li>JS的内存泄露，无怪乎就是从DOM中remove了元素，但是依然有变量或者对象引用了该DOM对象。然后内存中无法删除。使得浏览器的内存占用居高不下。这种内存占用，随着浏览器的刷新，会自动释放。</li>
<li>而另外一种情况，就是循环引用，一个DOM对象和JS对象之间互相引用，这样造成的情况更严重一些，即使刷新，内存也不会减少。这就是严格意义上说的内存泄露了。</li>
</ul>
<h2 id="data原理"><a href="#data原理" class="headerlink" title="data原理"></a>data原理</h2><p>利用cache对象间接把dom对象与数据联系到一起，这样有效的阻止了json数据和dom元素之间的循环引用导致的内存泄漏。</p>
<h3 id="data源码简化版本"><a href="#data源码简化版本" class="headerlink" title="data源码简化版本"></a>data源码简化版本</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">jQuery.extend(&#123;</span><br><span class="line">	acceptData</span><br><span class="line">	hasData</span><br><span class="line">	data</span><br><span class="line">	removeData</span><br><span class="line">	_data</span><br><span class="line">	_removeData</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">jQuery.fn.extend(&#123;</span><br><span class="line">	data</span><br><span class="line">	removeData</span><br><span class="line">&#125;);</span><br><span class="line">Data.prototype = &#123;</span><br><span class="line">	key</span><br><span class="line">	set</span><br><span class="line">	get</span><br><span class="line">	access</span><br><span class="line">	remove</span><br><span class="line">	hasData</span><br><span class="line">	discard</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Data.prototype = &#123;</span><br><span class="line">	key: function( owner )  //分配映射的</span><br><span class="line">	set: function( owner, data, value )  //设置cache</span><br><span class="line">	get: function( owner, key )  //获取cache中属性</span><br><span class="line">	access: function( owner, key, value ) // </span><br><span class="line">	remove: function( owner, key )  // 删除</span><br><span class="line">	hasData: function( owner )  // 判断是否存在</span><br><span class="line">	discard: function( owner )  // 删除</span><br></pre></td></tr></table></figure>
<h3 id="Object-preventExtensions-freeze-使对象只能获取不能修改"><a href="#Object-preventExtensions-freeze-使对象只能获取不能修改" class="headerlink" title="Object.preventExtensions/freeze 使对象只能获取不能修改"></a>Object.preventExtensions/freeze 使对象只能获取不能修改</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123; name : &quot;hello&quot; &#125;;</span><br><span class="line"></span><br><span class="line">Object.freeze(obj);</span><br><span class="line"></span><br><span class="line">obj.name = &apos;hi&apos;;</span><br><span class="line"></span><br><span class="line">alert( obj.name );</span><br><span class="line"></span><br><span class="line">Object.defineProperty( obj, 0, &#123;</span><br><span class="line">	get: function() &#123;</span><br><span class="line">		return &#123;&#125;;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line">alert(obj[0]);</span><br><span class="line">obj[0] = 123;</span><br><span class="line">alert(obj[0]);</span><br></pre></td></tr></table></figure>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/data/">data()</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/jQuery源码分析/">jQuery源码分析</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/01/23/blog20170123/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-blog20170122" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/22/blog20170122/">JavaScript对象模型-执行模型</a>
    </h1>
  

        <a href="/2017/01/22/blog20170122/" class="archive-article-date">
  	<time datetime="2017-01-22T02:50:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-01-22</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><h3 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h3><p>基本数据类型是JS语言最底层的实现。<br>简单数值类型: 有Undefined, Null, Boolean, Number和String。注意，描述中的英文单词在这里仅指数据类型的名称，并不特指JS的全局对象N an, Boolean, Number, String等，它们在概念上的区别是比较大的。<br>对象: 一个无序属性的集合，这些属性的值为简单数值类型、对象或者函数。同上，这里的对象并不特指全局对象Object。<br>函数: 函数是对象的一种，实现上内部属性[[Class]]值为”Function”，表明它是函数类型，除了对象的内部属性方法外，还有[[Construct]]、[[Call]]、[[Scope]]等内部属性。函数作为函数调用与构造器(使用new关键字创建实例对象)的处理机制不一样(Function对象除外)，内部方法[[Construct]]用于实现作为构造器的逻辑，方法[[Call]]实现作为函数调用的逻辑。同上，这里的函数并不特指全局对象Function。<br>函数在JS这个Prototype语言中可以看作是面向对象语言的类，可以用它来构造对象实例。既然函数可以看作是类，所以每一个函数可以看作是一种扩展数据类型。</p>
<h3 id="内置数据类型-内置对象"><a href="#内置数据类型-内置对象" class="headerlink" title="内置数据类型(内置对象)"></a>内置数据类型(内置对象)</h3><p>Function: 函数类型的用户接口。<br>Object: 对象类型的用户接口。<br>Boolean, Number, String: 分别为这三种简单数值类型的对象包装器，对象包装在概念上有点类似C#中的Box/Unbox。<br>Date, Array, RegExp: 可以把它们看作是几种内置的扩展数据类型。</p>
<p>首先，Function, Object, Boolean, Number, String, Date, Array, RegExp等都是JavaScript语言的内置对象，它们都可以看作是函数的派生类型，例如Number instanceof Function为true，Number instanceof Object为true。在这个意义上，可以将它们跟用户定义的函数等同看待。<br>其次，它们各自可以代表一种数据类型，由JS引擎用native code或内置的JS代码实现，是暴露给开发者对这些内置数据类型进行操作的接口。在这个意义上，它们都是一种抽象的概念，后面隐藏了具体的实现机制。<br>在每一个提到Number, Function等单词的地方，应该迅速的在思维中将它们实例化为上面的两种情况之一。</p>
<h3 id="数据类型实现模型描述"><a href="#数据类型实现模型描述" class="headerlink" title="数据类型实现模型描述"></a>数据类型实现模型描述</h3><p><img src="https://tawen.github.io/res/js_object_model_implementation.jpg" alt="数据类型实现模型描述"></p>
<p>Build-in <em> data structure: 指JS内部用于实现**</em>类型的数据结构，这些结构我们基本上无法直接操作。<br>Build-in <em> object: 指JS内置的Number, String, Boolean等这些对象，这是JS将内部实现的数据类型暴露给开发者使用的接口。<br>Build-in </em> constructor: 指JS内置的一些构造器，用来构造相应类型的对象实例。它们被包装成函数对象暴露出来，例如我们可以使用下面的方法访问到这些函数对象:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//Passed in FF2.0, IE7, Opera9.25, Safari3.0.4</span><br><span class="line">//access the build-in number constructor</span><br><span class="line">var number = new Number(123);</span><br><span class="line">var numConstructor1 = number.constructor; //or</span><br><span class="line">var numConstructor2 = new Object(123).constructor;</span><br><span class="line">//both numConstructor1 and numConstructor2 are the build-in Number constructor</span><br><span class="line">numConstructor1 == numConstructor2 //result: true</span><br><span class="line">//access the build-in object constructor</span><br><span class="line">var objConstructor1 = &#123;&#125;.constructor; //or</span><br><span class="line">var objConstructor2 = new Object().constructor;</span><br><span class="line">//both objConstructor1 and objConstructor2 are the build-in Object constructor</span><br><span class="line">objConstructor1==objConstructor2 //result: true</span><br></pre></td></tr></table></figure>
<p>具体实现上，上图中横向之间可能也存在关联，例如对于build-in data structure和constructor，Function、 Date、 Array、 RegExp等都可以继承Object的结构而实现，但这是具体实现相关的事情了。</p>
<p>关于简单数值类型的对象化<br>这是一个细微的地方，下面描述对于Boolean, String和Number这三种简单数值类型都适用，以Number为例说明。<br>JS规范要求: 使用var num1=123;这样的代码，直接返回基本数据类型，就是说返回的对象不是派生自Number和Object类型，用num1 instanceof Object测试为false；使用new关键字创建则返回Number类型，例如var num2=new Number(123); num2 instanceof Number为true。<br>将Number当作函数调用，返回结果会转换成简单数值类型。下面是测试代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//Passed in FF2.0, IE7, Opera9.25, Safari3.0.4</span><br><span class="line">var num1 = new Number(123); //num1 derived from Number &amp; Object</span><br><span class="line">num1 instanceof Number //result: true</span><br><span class="line">num1 instanceof Object //result: true</span><br><span class="line">//convert the num1 from Number type to primitive type, so it&apos;s no longer an instance of Number or Object</span><br><span class="line">num1 = Number(num1); </span><br><span class="line">num1 instanceof Number //result: false</span><br><span class="line">num1 instanceof Object //result: false</span><br><span class="line">var num2 = 123; //num2 is a primitive type</span><br><span class="line">num2 instanceof Number //result: false</span><br><span class="line">num2 instanceof Object //result: false</span><br></pre></td></tr></table></figure>
<p>虽然我们得到了一个简单数值类型，但它看起来仍然是一个JS Object对象，具有Object以及相应类型的所有属性和方法，使用上基本没有差别，唯一不同之处是instanceof的测试结果。</p>
<h2 id="Prototype继承"><a href="#Prototype继承" class="headerlink" title="Prototype继承"></a>Prototype继承</h2><h3 id="Prototype"><a href="#Prototype" class="headerlink" title="Prototype"></a>Prototype</h3><p>每个对象都有一个[[Prototype]]的内部属性，它的值为null或者另外一个对象。函数对象都有一个显示的prototype属性，它并不是内部[[Prototype]]属性。不同的JS引擎实现者可以将内部[[Prototype]]属性命名为任何名字，并且设置它的可见性，只在JS引擎内部使用。虽然无法在JS代码中访问到内部<a href="FireFox中可以，名字为__proto__因为Mozilla将它公开了">[Prototype]</a>，但可以使用对象的isPrototypeOf()方法进行测试，注意这个方法会在整个Prototype链上进行判断。<br>使用obj.propName访问一个对象的属性时，按照下面的步骤进行处理(假设obj的内部[[Prototype]]属性名为<strong>proto</strong>):</p>
<ol>
<li>如果obj存在propName属性，返回属性的值，否则</li>
<li>如果obj.<strong>proto</strong>为null，返回undefined，否则</li>
<li>返回obj.<strong>proto</strong>.propName<br>调用对象的方法跟访问属性搜索过程一样，因为方法的函数对象就是对象的一个属性值。<br>提示: 上面步骤中隐含了一个递归过程，步骤3中obj.<strong>proto</strong>是另外一个对象，同样将采用1, 2, 3这样的步骤来搜索propName属性。</li>
</ol>
<p>例如下图所示，object1将具备属性prop1, prop2, prop3以及方法fn1, fn2, fn3。图中虚线箭头表示prototype链。<br><img src="https://tawen.github.io/res/js_object_model_prototype.jpg" alt="Prototype"></p>
<p>这就是基于Prototype的继承和共享。其中object1的方法fn2来自object2，概念上即object2重写了object3的方法fn2。<br>JavaScript对象应当都通过prototype链关联起来，最顶层是Object，即对象都派生自Object类型。</p>
<p>类似C++等面向对象语言用类(被抽象了的类型)来承载方法，用对象(实例化对象)承载属性，Prototype语言只用实例化的对象来承载方法和属性。本质区别是前者基于内存结构的描述来实现继承，后者基于具体的内存块实现。</p>
<h3 id="对象创建过程"><a href="#对象创建过程" class="headerlink" title="对象创建过程"></a>对象创建过程</h3><p>JS中只有函数对象具备类的概念，因此要创建一个对象，必须使用函数对象。函数对象内部有[[Construct]]方法和[[Call]]方法，[[Construct]]用于构造对象，[[Call]]用于函数调用，只有使用new操作符时才触发[[Construct]]逻辑。<br>var obj=new Object(); 是使用内置的Object这个函数对象创建实例化对象obj。var obj={};和var obj=[];这种代码将由JS引擎触发Object和Array的构造过程。function fn(){}; var myObj=new fn();是使用用户定义的类型创建实例化对象。</p>
<p>new Fn(args)的创建过程如下(即函数对象的[[Construct]]方法处理逻辑，对象的创建过程)。另外函数对象本身的创建过程(指定义函数或者用Function创建一个函数对象等方式)虽然也使用了下面的处理逻辑，但有特殊的地方，后面再描述。</p>
<ol>
<li>创建一个build-in object对象obj并初始化</li>
<li>如果Fn.prototype是Object类型，则将obj的内部[[Prototype]]设置为Fn.prototype，否则obj的[[Prototype]]将为其初始化值(即Object.prototype)</li>
<li>将obj作为this，使用args参数调用Fn的内部[[Call]]方法<br> 3.1 内部[[Call]]方法创建当前执行上下文<br> 3.2 调用F的函数体<br> 3.3 销毁当前的执行上下文<br> 3.4 返回F函数体的返回值，如果F的函数体没有返回值则返回undefined</li>
<li>如果[[Call]]的返回值是Object类型，则返回这个值，否则返回obj<br>注意步骤2中， prototype指对象显示的prototype属性，而[[Prototype]]则代表对象内部Prototype属性(隐式的)。<br>构成对象Prototype链的是内部隐式的[[Prototype]]，而并非对象显示的prototype属性。显示的prototype只有在函数对象上才有意义，从上面的创建过程可以看到，函数的prototype被赋给派生对象隐式[[Prototype]]属性，这样根据Prototype规则，派生对象和函数的prototype对象之间才存在属性、方法的继承/共享关系。</li>
</ol>
<p>用代码来做一些验证:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//Passed in FF2.0, IE7, Opera9.25, Safari3.0.4</span><br><span class="line">function fn()&#123;&#125;</span><br><span class="line">//the value of implicit [[Prototype]] property of those objects derived from fn will be assigned to fn.prototype</span><br><span class="line">fn.prototype=&#123; attr1:&quot;aaa&quot;, attr2:&quot;bbb&quot;&#125;;</span><br><span class="line">var obj=new fn();</span><br><span class="line">document.write(obj.attr1 + &quot;&lt;br /&gt;&quot;); //result: aaa</span><br><span class="line">document.write(obj.attr2 + &quot;&lt;br /&gt;&quot;); //result: bbb</span><br><span class="line">document.write(obj instanceof fn); //result: true</span><br><span class="line">document.write(&quot;&lt;br /&gt;&quot;);</span><br><span class="line">//I change the prototype of fn here, so by the algorithm of Prototype the obj is no longer the instance of fn,</span><br><span class="line">//but this won&apos;t affect the obj and its [[Prototype]] property, and the obj still has attr1 and attr2 properties</span><br><span class="line">fn.prototype=&#123;&#125;;</span><br><span class="line">document.write(obj.attr1 + &quot;&lt;br /&gt;&quot;); //result: aaa</span><br><span class="line">document.write(obj.attr2 + &quot;&lt;br /&gt;&quot;); //result: bbb</span><br><span class="line">document.write(obj instanceof fn); //result: false</span><br></pre></td></tr></table></figure></p>
<p>关于创建过程返回值的验证:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//Passed in FF2.0, IE7, Opera9.25, Safari3.0.4</span><br><span class="line">function fn()&#123;</span><br><span class="line">    //according to step 4 described above, </span><br><span class="line">    //the new fn() operation will return the object &#123; attr1: 111, attr2: 222 &#125;, it&apos;s not an instance of fn!</span><br><span class="line">    return &#123; attr1: 111, attr2: 222 &#125;;</span><br><span class="line">&#125;</span><br><span class="line">fn.prototype=&#123; attr1:&quot;aaa&quot;, attr2:&quot;bbb&quot;&#125;;</span><br><span class="line">var obj=new fn();</span><br><span class="line">document.write(obj.attr1 + &quot;&lt;br /&gt;&quot;); //result: 111</span><br><span class="line">document.write(obj.attr2 + &quot;&lt;br /&gt;&quot;); //result: 222</span><br><span class="line">document.write(obj instanceof fn); //result: false</span><br></pre></td></tr></table></figure></p>
<h3 id="做个练习"><a href="#做个练习" class="headerlink" title="做个练习"></a>做个练习</h3><p>经过上面的理解应，请写出下面这幅图的实现代码。图中CF是一个函数，Cfp是CF的prototype对象，cf1, cf2, cf3, cf4, cf5都是CF的实例对象。虚线箭头表示隐式Prototype关系，实线箭头表示显示prototype关系。<br><img src="https://tawen.github.io/res/js_object_model_construct.jpg" alt="练习"></p>
<p>供参考的实现方案:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">//Passed in FF2.0, IE7, Opera9.25, Safari3.0.4</span><br><span class="line">function CF(q1, q2)&#123;</span><br><span class="line">    this.q1=q1;</span><br><span class="line">    this.q2=q2;</span><br><span class="line">&#125;</span><br><span class="line">CF.P1=&quot;P1 in CF&quot;; </span><br><span class="line">CF.P2=&quot;P2 in CF&quot;;</span><br><span class="line">function Cfp()&#123;</span><br><span class="line">    this.CFP1=&quot;CFP1 in Cfp&quot;;</span><br><span class="line">&#125;</span><br><span class="line">CF.prototype=new Cfp();</span><br><span class="line">var cf1=new CF(&quot;aaa&quot;, &quot;bbb&quot;);</span><br><span class="line">document.write(cf1.CFP1 + &quot;&lt;br /&gt;&quot;); //result: CFP1 in Cfp</span><br><span class="line">document.write(cf1.q1 + &quot;&lt;br /&gt;&quot;); //result: aaa</span><br><span class="line">document.write(cf1.q2 + &quot;&lt;br /&gt;&quot;); //result: bbb</span><br></pre></td></tr></table></figure></p>
<h3 id="本地属性与继承属性"><a href="#本地属性与继承属性" class="headerlink" title="本地属性与继承属性"></a>本地属性与继承属性</h3><p>对象通过隐式Prototype链能够实现属性和方法的继承，但prototype也是一个普通对象，就是说它是一个普通的实例化的对象，而不是纯粹抽象的数据结构描述。所以就有了这个本地属性与继承属性的问题。<br>首先看一下设置对象属性时的处理过程。JS定义了一组attribute，用来描述对象的属性property，以表明属性property是否可以在JavaScript代码中设值、被for in枚举等。<br>obj.propName=value的赋值语句处理步骤如下:</p>
<ol>
<li>如果propName的attribute设置为不能设值，则返回</li>
<li>如果obj.propName不存在，则为obj创建一个属性，名称为propName</li>
<li>将obj.propName的值设为value<br>可以看到，设值过程并不会考虑Prototype链，道理很明显，obj的内部[[Prototype]]是一个实例化的对象，它不仅仅向obj共享属性，还可能向其它对象共享属性，修改它可能影响其它对象。<br>用上面CF, Cfp的示例来说明，实例对象cf1具有本地属性q1, q2以及继承属性CFP1，如果执行cf1.CFP1=””，那么cf1就具有本地属性CFP1了，测试结果如下:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//Passed in FF2.0, IE7, Opera9.25, Safari3.0.4</span><br><span class="line">var cf1=new CF(&quot;aaa&quot;, &quot;bbb&quot;);</span><br><span class="line">var cf2=new CF(111, 222);</span><br><span class="line">document.write(cf1.CFP1 + &quot;&lt;br /&gt;&quot;); //result: CFP1 in Cfp</span><br><span class="line">document.write(cf2.CFP1 + &quot;&lt;br /&gt;&quot;); //result: CFP1 in Cfp</span><br><span class="line">//it will result in a local property in cf1</span><br><span class="line">cf1.CFP1=&quot;new value for cf1&quot;;</span><br><span class="line">//changes on CF.prototype.CFP1 will affect cf2 but not cf1, because there&apos;s already a local property with</span><br><span class="line">//the name CFP1 in cf1, but no such one in cf2</span><br><span class="line">CF.prototype.CFP1=&quot;new value for Cfp&quot;;</span><br><span class="line">document.write(cf1.CFP1 + &quot;&lt;br /&gt;&quot;); //result: new value for cf1</span><br><span class="line">document.write(cf2.CFP1 + &quot;&lt;br /&gt;&quot;); //result: new value for Cfp</span><br></pre></td></tr></table></figure>
</li>
</ol>
<h3 id="语义上的混乱"><a href="#语义上的混乱" class="headerlink" title="语义上的混乱?"></a>语义上的混乱?</h3><p>还是使用上面CF, Cfp示例的场景。<br>根据Prototype的机制，我们可以说对象cf1, cf2等都继承了对象Cfp的属性和方法，所以应该说他们之间存在继承关系。属性的继承/共享是沿着隐式Prototype链作用的，所以继承关系也应当理解为沿着这个链。<br>我们再看instanceOf操作，只有cf1 instanceOf CF才成立，我们说cf1是CF的实例对象，CF充当了类的角色，而不会说cf1是Cfp的实例对象，这样我们应当说cf1继承自CF? 但CF充当的只是一个第三方工厂的角色，它跟cf1之间并没有属性继承这个关系。<br>把CF, Cfp看作一个整体来理解也同样牵强。</p>
<p>Prototype就是Prototype，没有必要强把JavaScript与面向对象概念结合起来， JavaScript只具备有限的面向对象能力，从另外的角度我们可以把它看成函数语言、动态语言，所以它是吸收了多种语言特性的精简版。</p>
<h2 id="对象模型"><a href="#对象模型" class="headerlink" title="对象模型"></a>对象模型</h2><h3 id="Where-are-we"><a href="#Where-are-we" class="headerlink" title="Where are we?"></a>Where are we?</h3><ol>
<li>了解了JavaScript的数据类型，清楚了象Number这样的系统内置对象具有多重身份: a)它们本身是一个函数对象，只是由引擎内部实现而已，b)它们代表一种数据类型，我们可以用它们定义、操作相应类型的数据，c)在它们背后隐藏了引擎的内部实现机制，例如内部的数据结构、各种被包装成了JavaScript对象的构造器等。</li>
<li>了解了Prototype机制，知道对象是如何通过它们继承属性和方法，知道了在创建对象过程中JS引擎内部是如何设置Prototype关系的。</li>
</ol>
<p>接下来对用户自定义函数对象本身的创建过程进行了解之后，我们就可以对JavaScript的对象模型来一个整体性的overview了。</p>
<h3 id="函数对象创建过程"><a href="#函数对象创建过程" class="headerlink" title="函数对象创建过程"></a>函数对象创建过程</h3><p>JavaScript代码中定义函数，或者调用Function创建函数时，最终都会以类似这样的形式调用Function函数:var newFun=Function(funArgs, funBody); 。创建函数对象的主要步骤如下:</p>
<ol>
<li>创建一个build-in object对象fn</li>
<li>将fn的内部[[Prototype]]设为Function.prototype</li>
<li>设置内部的[[Call]]属性，它是内部实现的一个方法，处理逻辑参考对象创建过程的步骤3</li>
<li>设置内部的[[Construct]]属性，它是内部实现的一个方法，处理逻辑参考对象创建过程的步骤1,2,3,4</li>
<li>设置fn.length为funArgs.length，如果函数没有参数，则将fn.length设置为0</li>
<li>使用new Object()同样的逻辑创建一个Object对象fnProto</li>
<li>将fnProto.constructor设为fn</li>
<li>将fn.prototype设为fnProto</li>
<li>返回fn</li>
</ol>
<p>步骤1跟步骤6的区别为，步骤1只是创建内部用来实现Object对象的数据结构(build-in object structure)，并完成内部必要的初始化工作，但它的[[Prototype]]、[[Call]]、[[Construct]]等属性应当为null或者内部初始化值，即我们可以理解为不指向任何对象(对[[Prototype]]这样的属性而言)，或者不包含任何处理(对[[Call]]、[[Construct]]这样的方法而言)。步骤6则将按照前面描述的对象创建过程创建一个新的对象，它的[[Prototype]]等被设置了。<br>从上面的处理步骤可以了解，任何时候我们定义一个函数，它的prototype是一个Object实例，这样默认情况下我们创建自定义函数的实例对象时，它们的Prototype链将指向Object.prototype。<br>另外，Function一个特殊的地方，是它的[[Call]]和[[Construct]]处理逻辑一样。</p>
<h3 id="JavaScript对象模型"><a href="#JavaScript对象模型" class="headerlink" title="JavaScript对象模型"></a>JavaScript对象模型</h3><p><img src="https://tawen.github.io/res/js_object_model.jpg" alt="JavaScript对象模型"><br>红色虚线表示隐式Prototype链。</p>
<p>这张对象模型图中包含了太多东西，不少地方需要仔细体会，可以写些测试代码进行验证。彻底理解了这张图，对JavaScript语言的了解也就差不多了。下面是一些补充说明:</p>
<ol>
<li>图中有好几个地方提到build-in Function constructor，这是同一个对象，可以测试验证:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">//Passed in FF2.0, IE7, Opera9.25, Safari3.0.4</span><br><span class="line">Function==Function.constructor //result: true</span><br><span class="line">Function==Function.prototype.constructor //result: true</span><br><span class="line">Function==Object.constructor //result: true</span><br><span class="line">//Function also equals to Number.constructor, String.constructor, Array.constructor, RegExp.constructor, etc.</span><br><span class="line">function fn()&#123;&#125;</span><br><span class="line">Function==fn.constructor //result: true</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>这说明了几个问题: Function指向系统内置的函数构造器(build-in Function constructor)；Function具有自举性；系统中所有函数都是由Function构造。</p>
<ol start="2">
<li><p>左下角的obj1, obj2…objn范指用类似这样的代码创建的对象: function fn1(){}; var obj1=new fn1();<br> 这些对象没有本地constructor方法，但它们将从Prototype链上得到一个继承的constructor方法，即fn.prototype.constructor，从函数对象的构造过程可以知道，它就是fn本身了。<br> 右下角的obj1, obj2…objn范指用类似这样的代码创建的对象: var obj1=new Object();或var obj1={};或var obj1=new Number(123);或obj1=/\w+/;等等。所以这些对象Prototype链的指向、从Prototype链继承而来的constructor的值(指它们的constructor是build-in Number constructor还是build-in Object constructor等)等依赖于具体的对象类型。另外注意的是，var obj=new Object(123);这样创建的对象，它的类型仍然是Number，即同样需要根据参数值的类型来确定。<br> 同样它们也没有本地constructor，而是从Prototype链上获得继承的constructor方法，即build-in *** constructor，具体是哪一个由数据类型确定。</p>
</li>
<li><p>关于图中Prototype链的补充说明:<br>Object.prototype是整个链的终结点，它的内部[[Prototype]]为null。<br>所有函数的Prototype链都指向Function.prototype。<br>Function的Prototype链指向Function.prototype，这是规范要求的，因为设计者将Function设计为具有自举性。Function的Prototype链这样设计之后，Function.constructor==Function, Function instanceOf Function都为true。另外Function已经是最顶层的构造器，但Function本身也是一个函数对象，它必然是由某个东西创建出来的，这样自举在语义上合情合理。<br>Function.prototype的Prototype链指向Object.prototype，这也是规范强制要求的。首先Function.prototype是Function的一个实例对象(typeof Function.prototype可以知道它是一个Function，instanceOf无法通过测试，因为Prototype链在内部被额外设置了），所以按照Prototype的规则，Function.prototype的内部[[Prototype]]值应当为Function.prototype这个对象，即它的Prototype链指向自己本身。这样一方面在Prototype链上造成一个死循环，另一方面它本身成为了一个终结点，结果就是所有函数对象将不是派生自Object了。加上这个强制要求之后，Prototype链只有唯一的一个终结点。</p>
</li>
</ol>
<h2 id="执行模型"><a href="#执行模型" class="headerlink" title="执行模型"></a>执行模型</h2><h3 id="执行上下文-Execution-Context-简介"><a href="#执行上下文-Execution-Context-简介" class="headerlink" title="执行上下文(Execution Context)简介"></a>执行上下文(Execution Context)简介</h3><p>JavaScript代码运行的地方都存在执行上下文，它是一个概念，一种机制，用来完成JavaScript运行时作用域、生存期等方面的处理。执行上下文包括Variable Object、Variable Instatiation、Scope/Scope Chain等概念，在不同的场景/执行环境下，处理上存在一些差异，下面先对这些场景进行说明。</p>
<p>函数对象分为用户自定义函数对象和系统内置函数对象，对于用户自定义函数对象将按照下面描述的机制进行处理，但内置函数对象与具体实现相关，ECMA规范对它们执行上下文的处理没有要求，即它们基本不适合本节描述的内容。</p>
<p>执行的JavaScript代码分三种类型，后面会对这三种类型处理上不同的地方进行说明:</p>
<ol>
<li>Global Code，即全局的、不在任何函数里面的代码，例如一个js文件、嵌入在HTML页面中的js代码等。</li>
<li>Eval Code，即使用eval()函数动态执行的JS代码。</li>
<li>Function Code，即用户自定义函数中的函数体JS代码。</li>
</ol>
<h3 id="基本原理"><a href="#基本原理" class="headerlink" title="基本原理"></a>基本原理</h3><p>在用户自定义函数中，可以传入参数、在函数中定义局部变量，函数体代码可以使用这些入参、局部变量。背后的机制是什么样呢？<br>当JS执行流进入函数时，JavaScript引擎在内部创建一个对象，叫做Variable Object。对应函数的每一个参数，在Variable Object上添加一个属性，属性的名字、值与参数的名字、值相同。函数中每声明一个变量，也会在Variable Object上添加一个属性，名字就是变量名，因此为变量赋值就是给Variable Object对应的属性赋值。在函数中访问参数或者局部变量时，就是在variable Object上搜索相应的属性，返回其值。<br>一般情况下Variable Object是一个内部对象，JS代码中无法直接访问。规范中对其实现方式也不做要求，因此它可能只是引擎内部的一种数据结构。</p>
<p>大致处理方式就这样，但作用域的概念不只这么简单，例如函数体中可以使用全局变量、函数嵌套定义时情况更复杂点。这些情况下怎样处理？JavaScript引擎将不同执行位置上的Variable Object按照规则构建一个链表，在访问一个变量时，先在链表的第一个Variable Object上查找，如果没有找到则继续在第二个Variable Object上查找，直到搜索结束。这就是Scope/Scope Chain的大致概念。</p>
<p>下面是各个方面详细的处理。</p>
<h3 id="Global-Object"><a href="#Global-Object" class="headerlink" title="Global Object"></a>Global Object</h3><p>JavaScript的运行环境都必须存在一个唯一的全局对象-Global Object，例如HTML中的window对象。Global Object是一个宿主对象，除了作为JavaScript运行时的全局容器应具备的职责外，ECMA规范对它没有额外要求。它包Math、String、Date、parseInt等JavaScript中内置的全局对象、函数(都作为Global Object的属性)，还可以包含其它宿主环境需要的一些属性。</p>
<h3 id="Variable-Object"><a href="#Variable-Object" class="headerlink" title="Variable Object"></a>Variable Object</h3><p>上面简述了Variable Object的基本概念。创建Variable Object，将参数、局部变量设置为Variable Object属性的处理过程叫做Variable Instatiation-变量实例化，后面结合Scope Chain再进行详细说明。</p>
<p>Global Code<br>Variable Object就是Global Object，这是Variable Object唯一特殊的地方(指它是内部的无法访问的对象而言)。<br>var globalVariable = “WWW”;<br>document.write(window.globalVariable); //result: WWW<br>上面代码在Global Code方式下运行，根据对Variable Object的处理，定义变量globalVariable时就会在Global Object(即window)对象上添加这个属性，所以输出是WWW这个值。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Function Code</span><br><span class="line">Variable Object也叫做Activation Object(因为有一些差异存在，所以规范中重新取一个名字以示区别，Global Code/Eval Code中叫Variable Object，Function Code中就叫做Activation Object)。</span><br></pre></td></tr></table></figure></p>
<p>每次进入函数执行都会创建一个新的Activation Object对象，然后创建一个arguments对象并设置为Activation Object的属性，再进行Variable Instantiation处理。<br>在退出函数时，Activation Object会被丢弃(并不是内存释放，只是可以被垃圾回收了)。</p>
<p>附arguments对象的属性:<br>length: 为实际传入参数的个数。注意，参考函数对象创建过程，函数对象上的length为函数定义时要求的参数个数；<br>callee: 为执行的函数对象本身。目的是使函数对象能够引用自己，例如需要递归调用的地方。<br>function fnName(…) { … }这样定义函数，它的递归调用可以在函数体内使用fnName完成。var fn=function(…) { … }这样定义匿名函数，在函数体内无法使用名字引用自己，通过arguments.callee就可以引用自己而实现递归调用。<br>参数列表: 调用者实际传入的参数列表。这个参数列表提供一个使用索引访问实际参数的方法。Variable Instantiation处理时会在Activation Object对象上添加属性，前提是函数声明时有指定参数列表。如果函数声明中不给出参数列表，或者实际调用参数个数与声明时的不一样，可以通过arguments访问各个参数。</p>
<p>arguments中的参数列表与Activation Object上的参数属性引用的是相同的参数对象(如果修改，在两处都会反映出来)。规范并不要求arguments是一个数组对象，下面是一个测试:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//Passed in FF2.0, IE7, Opera9.25, Safari3.0.4</span><br><span class="line">var argumentsLike = &#123; 0: &quot;aaa&quot;, 1: 222, 2: &quot;WWW&quot;, length: 3, callee: function() &#123; &#125; &#125;;</span><br><span class="line">document.write(argumentsLike[2] + &quot;&lt;br /&gt;&quot;); //result: WWW</span><br><span class="line">document.write(argumentsLike[1] + &quot;&lt;br /&gt;&quot;); //result: 222</span><br><span class="line">//convert the argumentsLike to an Array object, just as we can do this for the arguments property</span><br><span class="line">var array = [].slice.apply(argumentsLike);</span><br><span class="line">document.write(array instanceof Array); //result: true</span><br><span class="line">document.write(&quot;&lt;br /&gt;&quot;);</span><br><span class="line">document.write(array.reverse().join(&quot;|&quot;)); //result: WWW|222|aaa</span><br></pre></td></tr></table></figure></p>
<p>Eval Code<br>Variable Object就是调用eval时当前执行上下文中的Variable Object。在Global Code中调用eval函数，它的Variable Object就是Global Object；在函数中调用eval，它的Variable Object就是函数的Activation Object。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//Passed in FF2.0, IE7, Opera9.25, Safari3.0.4</span><br><span class="line">function fn(arg)&#123;</span><br><span class="line">    var innerVar = &quot;variable in function&quot;;</span><br><span class="line">    eval(&apos; \</span><br><span class="line">        var evalVar = &quot;variable in eval&quot;; \</span><br><span class="line">        document.write(arg + &quot;&lt;br /&gt;&quot;); \</span><br><span class="line">        document.write(innerVar + &quot;&lt;br /&gt;&quot;); \</span><br><span class="line">    &apos;);</span><br><span class="line">    document.write(evalVar);</span><br><span class="line">&#125;</span><br><span class="line">fn(&quot;arguments for function&quot;);</span><br></pre></td></tr></table></figure></p>
<p>输出结果是:<br>arguments for function<br>variable in function<br>variable in eval<br>说明: eval调用中可以访问函数fn的参数、局部变量；在eval中定义的局部变量在函数fn中也可以访问，因为它们的Varible Object是同一个对象。</p>
<h3 id="Scope-Scope-Chain"><a href="#Scope-Scope-Chain" class="headerlink" title="Scope/Scope Chain"></a>Scope/Scope Chain</h3><p>首先Scope Chain是一个类似链表/堆栈的结构，里面每个元素基本都是Variable Object/Activation Object。<br>其次存在执行上下文的地方都有当前Scope Chain，可以理解为Scope Chain就是执行上下文的具体表现形式。</p>
<p>Global Code<br>Scope Chain只包含一个对象，即Global Object。在开始JavaScript代码的执行之前，引擎会创建好这个Scope Chain结构。</p>
<p>Function Code<br>函数对象在内部都有一个[[Scope]]属性，用来记录该函数所处位置的Scope Chain。<br>创建函数对象时，引擎会将当前执行环境的Scope Chain传给Function的[[Construct]]方法。[[Construct]]会创建一个新的Scope Chain，内容与传入的Scope Chain完全一样，并赋给被创建函数的内部[[Scope]]属性。在前面函数对象创建过程一节中，这个处理位于步骤4和5之间。<br>进入函数调用时，也会创建一个新的Scope Chain，包括同一个函数的递归调用，退出函数时这个Scope Chain被丢弃。新建的Scope Chain第一个对象是Activation Object，接下来的内容与内部[[Scope]]上存储的Scope Chain内容完全一样。</p>
<p>Eval Code<br>进入Eval Code执行时会创建一个新的Scope Chain，内容与当前执行上下文的Scope Chain完全一样。</p>
<h3 id="实例说明"><a href="#实例说明" class="headerlink" title="实例说明"></a>实例说明</h3><p>Scope Chain的原理就上面这些，必须结合JS代码的执行、Variable Instantiation的细节处理，才能理解上面这些如何产生作用，下面用一个简单的场景来综合说明。假设下面是一段JavaScript的Global Code:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var outerVar1=&quot;variable in global code&quot;;</span><br><span class="line">function fn1(arg1, arg2)&#123;</span><br><span class="line">    var innerVar1=&quot;variable in function code&quot;;</span><br><span class="line">    function fn2() &#123; return outerVar1+&quot; - &quot;+innerVar1+&quot; - &quot;+&quot; - &quot;+(arg1 + arg2); &#125;</span><br><span class="line">    return fn2();</span><br><span class="line">&#125;</span><br><span class="line">var outerVar2=fn1(10, 20);</span><br></pre></td></tr></table></figure></p>
<p>执行处理过程大致如下:</p>
<ol>
<li>初始化Global Object即window对象，Variable Object为window对象本身。创建Scope Chain对象，假设为scope_1，其中只包含window对象。</li>
<li>扫描JS源代码(读入源代码、可能有词法语法分析过程)，从结果中可以得到定义的变量名、函数对象。按照扫描顺序:<br>2.1 发现变量outerVar1，在window对象上添加outerVar1属性，值为undefined；<br>2.2 发现函数fn1的定义，使用这个定义创建函数对象，传给创建过程的Scope Chain为scope_1。将结果添加到window的属性中，名字为fn1，值为返回的函数对象。注意fn1的内部[[Scope]]就是scope_1。另外注意，创建过程并不会对函数体中的JS代码做特殊处理，可以理解为只是将函数体JS代码的扫描结果保存在函数对象的内部属性上，在函数执行时再做进一步处理。这对理解Function Code，尤其是嵌套函数定义中的Variable Instantiation很关键；<br>2.3 发现变量outerVar2，在window对象上添加outerVar2属性，值为undefined；</li>
<li>执行outerVar1赋值语句，赋值为”variable in global code”。</li>
<li>执行函数fn1，得到返回值:<br>4.1 创建Activation Object，假设为activation_1；创建一个新的Scope Chain，假设为scope_2，scope_2中第一个对象为activation_1，第二个对象为window对象(取自fn1的[[Scope]]，即scope_1中的内容)；<br>4.2 处理参数列表。在activation_1上设置属性arg1、arg2，值分别为10、20。创建arguments对象并进行设置，将arguments设置为activation_1的属性；<br>4.3 对fn1的函数体执行类似步骤2的处理过程:<pre><code>4.3.1 发现变量innerVar1，在activation_1对象上添加innerVar1属性，值为undefine；
4.3.2 发现函数fn2的定义，使用这个定义创建函数对象，传给创建过程的Scope Chain为scope_2(函数fn1的Scope Chain为当前执行上下文的内容)。将结果添加到activation_1的属性中，名字为fn2，值为返回的函数对象。注意fn2的内部[[Scope]]就是scope_2；
</code></pre>4.4 执行innerVar1赋值语句，赋值为”variable in function code”。<br>4.5 执行fn2:<pre><code>4.5.1 创建Activation Object，假设为activation_2；创建一个新的Scope Chain，假设为scope_3，scope_3中第一个对象为activation_2，接下来的对象依次为activation_1、window对象(取自fn2的[[Scope]]，即scope_2)；
4.5.2 处理参数列表。因为fn2没有参数，所以只用创建arguments对象并设置为activation_2的属性。
4.5.3 对fn2的函数体执行类似步骤2的处理过程，没有发现变量定义和函数声明。
4.5.4 执行函数体。对任何一个变量引用，从scope_3上进行搜索，这个示例中，outerVar1将在window上找到；innerVar1、arg1、arg2将在activation_1上找到。
4.5.5 丢弃scope_3、activation_2(指它们可以被垃圾回收了)。
4.5.6 返回fn2的返回值。
</code></pre>4.6 丢弃activation_1、scope_2。<br>4.7 返回结果。</li>
<li>将结果赋值给outerVar2。</li>
</ol>
<p>其它情况下Scope Chain、Variable Instantiation处理类似上面的过程进行分析就行了。</p>
<p>根据上面的实例说明，就可以解释下面这个测试代码的结果:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//Passed in FF2.0, IE7, Opera9.25, Safari3.0.4</span><br><span class="line">function fn(obj)&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        //test whether exists a local variable &quot;outerVar&quot; on obj</span><br><span class="line">        exists: Object.prototype.hasOwnProperty.call(obj, &quot;outerVar&quot;),</span><br><span class="line">        //test the value of the variable &quot;outerVar&quot;</span><br><span class="line">        value: obj.outerVar</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br><span class="line">var result1 = fn(window);</span><br><span class="line">var outerVar = &quot;WWW&quot;; </span><br><span class="line">var result2 = fn(window);</span><br><span class="line"></span><br><span class="line">document.write(result1.exists + &quot; &quot; + result1.value); //result: true undefined</span><br><span class="line">document.write(&quot;&lt;br /&gt;&quot;);</span><br><span class="line">document.write(result2.exists + &quot; &quot; + result2.value); //result: true WWW</span><br></pre></td></tr></table></figure></p>
<p>result1调用的地方，outerVar声明和赋值的语句还没有被执行，但是测试结果window对象已经拥有一个本地属性outerVar，其值为undefined。result2的地方outerVar已经赋值，所以window.outerVar的值已经有了。实际使用中不要出现这种先使用，后定义的情况，否则某些情况下会有问题，因为会涉及到一些规范中没有提及，不同厂商实现方式上不一致的地方。</p>
<h3 id="一些特殊处理"><a href="#一些特殊处理" class="headerlink" title="一些特殊处理"></a>一些特殊处理</h3><ol>
<li>with(obj) { … }这个语法的实现方式，是在当前的Scope Chain最前面位置插入obj这个对象，这样就会先在obj上搜索是否有相应名字的属性存在。其它类似的还有catch语句。</li>
<li>前面对arguments对象的详细说明中，提到了对函数递归调用的支持问题，了解到了匿名函数使用arguments.callee来实现引用自己，而命名函数可以在函数体内引用自己，根据上面Scope Chain的工作原理我们还无法解释这个现象，因为这里有个特殊处理。<br>任何时候创建一个命名函数对象时，JavaScript引擎会在当前执行上下文Scope Chain的最前面插入一个对象，这个对象使用new Object()方式创建，并将这个Scope Chain传给Function的构造函数[[Construct]]，最终创建出来的函数对象内部[[Scope]]上将包含这个object对象。创建过程返回之后，JavaScript引擎在object上添加一个属性，名字为函数名，值为返回的函数对象，然后从当前执行上下文的Scope Chain中移除它。这样函数对象的Scope Chain中第一个对象就是对自己的引用，而移除操作则确保了对函数对象创建处Scope Chain的恢复。</li>
</ol>
<h3 id="this关键字处理"><a href="#this关键字处理" class="headerlink" title="this关键字处理"></a>this关键字处理</h3><p>执行上下文包含的另一个概念是this关键字。<br>Global Code中this关键字为Global Object；函数调用时this关键字为调用者，例如obj1.fn1()，在fn1中this对象为obj1；Eval Code中this关键字为当前执行上下文的Variable Object。</p>
<p>在函数调用时，JavaScript提供一个让用户自己指定this关键字值的机会，即每个函数都有的call、apply方法。例如:<br>fn1.call(obj1, arg1, arg2, …)或者fn1.apply(obj1, argArray)，都是将obj1作为this关键字，调用执行fn1函数，后面的参数都作为函数fn1的参数。如果obj1为null或undefined，则Global Object将作为this关键字的值；如果obj1不是Object类型，则转化为Object类型。它们之间的唯一区别在于，apply允许以数组的方式提供各个参数，而call方法必须一个一个参数的给。<br>前面的测试示例代码中有多处运用到了这个方法。例如window对象并没有hasOwnProperty方法，使用Object.prototype.hasOwnProperty.call(window, “propertyName”)也可以测试它是否拥有某个本地属性。</p>
<h2 id="JavaScript中的闭包Closures"><a href="#JavaScript中的闭包Closures" class="headerlink" title="JavaScript中的闭包Closures"></a>JavaScript中的闭包Closures</h2><p>示例：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//Passed in FF2.0, IE7, Opera9.25, Safari3.0.4</span><br><span class="line">function outer()&#123;</span><br><span class="line">    var a=&quot;aaa&quot;;</span><br><span class="line">    var b=&quot;bbb&quot;;</span><br><span class="line">    return function()&#123; return a + &quot; &quot; + b; &#125;;</span><br><span class="line">&#125;</span><br><span class="line">var inner=outer();</span><br><span class="line">document.write(inner());</span><br></pre></td></tr></table></figure></p>
<p>outer返回的是一个内嵌函数，内嵌函数使用了outer的局部变量a和b。照理outer的局部变量在返回时就超出了作用域因此inner()调用无法使用才对。这就是闭包Closure，即函数调用返回了一个内嵌函数，而内嵌函数引用了外部函数的局部变量、参数等这些应当被关闭(Close)了的资源。</p>
<p>根据前面Scope Chain的理解可以解释，返回的内嵌函数已经持有了构造它时的Scope Chain，虽然outer返回导致这些对象超出了作用域、生存期范围，但JavaScript使用自动垃圾回收来释放对象内存: 按照规则定期检查，对象没有任何引用才被释放。因此上面的代码能够正确运行。</p>
<p>关于使用Closure时的内存泄漏、效率等问题，参考<a href="http://www.jibbering.com/faq/faq_notes/closures.html" target="_blank" rel="noopener">http://www.jibbering.com/faq/faq_notes/closures.html</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js执行模型/">js执行模型</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/前端技术/">前端技术</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/01/22/blog20170122/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-blog20170121" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/21/blog20170121/">JFinal 3.0 发布，重新定义模板引擎</a>
    </h1>
  

        <a href="/2017/01/21/blog20170121/" class="archive-article-date">
  	<time datetime="2017-01-21T02:50:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-01-21</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>本次回归码坛为小伙伴们带来的是重新定义过的 Template Engine 将极速开发继续贯彻到 View 层。</p>
<p>Java 模板引擎界已被 Freemarker、Velocity 统治多年，但其在这些年的发展可谓乏善可陈，究其根本原因是因为这个领域严重依赖于第三方工具去做词法、语法分析以及 AST 的构建，并未真正在语言层面进行过深入的追问。</p>
<p>例如 Freemarker、Velocity 是基于 javacc 做的二次开发，其他 java 模板引擎多数也是基于 ANTLR、jflex、javacc 生成后的代码做的二次开发全部自己动手写代码而不是二次开发的 java 模板引擎极为少见，国内较为知名的仅见 HTTL。</p>
<p>由于使用 ANTLR 等工具去做模板引擎可以让 80% 以上的工作由工具代为完成，所以对模板引擎作者极具诱惑力，但诱惑的背后其实是巨大的陷阱。</p>
<p>首先，这类工具无一例外都要求使用一套特定规则先表示出词法和语法，然后再把它们生成为 Parser 源代码而词法、语法描述用的规则和生成的 Parser 并没有很强的语义连接关系，如果生成的 Parser 有 bug，非常难以回溯排错。</p>
<p>其次，生成的 Parser 源码，毫无可读性而言，进而在 Parser 层面根本无法调试，这种构建模板引擎的方式，相当于将自己的代码建立在一个飘摇不安的基础之上。</p>
<p>再次，通过这种方式做出来的模板引擎如果要在更底层改进，则需要先去改语法、词法描述规则文件，然后再生成一次 Parser 源码，然后才可以开始真正写代码，这个重复、麻烦且容易出错的过程也严重阻碍了模板引擎的改进。</p>
<p>最后，这种构建方式通常在运行时还需要一个类似于 runtime.jar 的依赖，这个依赖多多少少也会增加不确定的风险。</p>
<p>模板引擎在本质上是一门程序语言，要开发一门可用于生产环境的模板语言起码要对开发程序语言的相关技术、算法很熟悉，例如常用词法分析算法、语法分析算法、AST、解释器、编译原理等等领域知识。</p>
<p>但非常不幸的是，即便对已有算法很熟悉，仍然只能做出极为平庸的模板引擎，因为模板引擎所处理的对象与程序语言有着十分不同的特征：模板的内容通常是极其自由的文本中嵌入着少量程序语言元素，而类似于 NFA 这样的算法都是面向类似于 java、c、python 这类高度结构化的源代码内容。</p>
<p>JFinal Template Engine  直面这个问题，采用独创的算法彻底代替传统算法，极大降低了复杂度，减少了代码量，同时可读性得到极大提升。JFinal Template Engine 经过公司内部开发者近三个月的试用时间，直到每位开发者都沉醉其中后才放出 jfinal 3.0 版本。</p>
<p><strong> 1：独创 DKFF(Dynamic Key Feature Forward) 词法分析算法 </strong></p>
<p>传统的 NFA 词法分析算法基于正则表达式与状态图，即便是做一个简单的模板引擎也需要成百上千个状态，NFA 算法对于人类来说几乎不可读，需要先将二维数组表示的状态图存储结构转换成画在纸上的人类可读的状态图，并且还要花费相当长的时间去解读其内涵。而 JFinal Template Engine 只需 7 个状态 403 行代码搞定词法分析，可读高，有利于系统进化。</p>
<p><strong> 2：独创 DLRD(Double layer Recursive Descent) 语法分析算法 </strong></p>
<p>针对模板文件大量纯文本掺杂少量代码特征，独创 DLRD 语法分析算法，将指令与表达式的语法分析划分在不同的层次之中相比传统递归下降语法分析算法，复杂度降到极致，代码量少到极致仅 215 行代码搞定 statement 语法分析。</p>
<p>DLRD 算法还极为轻松地解决了传统算法面对的左递归、二义性、回溯以及运算符优先级等麻烦问题，无需文法变换即可消除左递归，无需回溯即可解决二义性问题传统递下降法算法需要采用变换文法、回溯、提取公因子方式解决上述问题传统解决方案不仅麻烦而且让文法变换后的程序可读性降低，不利于进化。</p>
<p><strong> 3：独创语言级指令扩展 </strong></p>
<p>对于传统模板引擎来说指令系统是固定的，相当于程序语言的关键字，无法为语言动态添加新的关键字，JFinal template engine 得益于独创的 DKFF、DLRD 算法，极为轻松的在程序语言层面实现了指令扩展功能，从而整个模板引擎只需提供了极少的常用指令，其她所有指令均由扩展而成，例如 com.jfinal.template.ext.directive 以及com.jfinal.plugin.activerecord.sql 包之下的所有指令全是扩展而来。</p>
<p>基于以上主要创新， JFinal 在极简的路上继续挺进，一个 MVC + ORM 各层全面实现极速开发的框架由此诞生：</p>
<p>1：极简设计</p>
<p>JFinal Template Engine 消灭了大量传统模板引擎中的无聊概念，例如 macro、layout、pageContent、nested、tag 插值等等概念，但凡一门可用于生产环境的语言，只需利用表达式、语句、函数、分支、循环等基本要素，就可以像呼吸空气一样自由地实现上述这些功能，引入新的概念纯属制造麻烦。</p>
<p>以 macro 为例，该概念产生于很古老的程序语言，已证明是历史性糟粕在后起的程序语言中被抛弃，可却在 freemarker、velocity 等模板引擎中死而复生，以致于后来者也争相跟风模仿引入了 macro 概念。</p>
<p>2：独创空合安全取值调用操作符</p>
<p>JFinal Template Engine 引入了 swift 与 C#语言中的空合操作符，并在其基础之上进行了极为自然的扩展，该表达式符号为两个紧靠的问号： ??<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">value ?? rightExpr  // 当value为null时，表达式取值rightExpr</span><br><span class="line">object.value ??    // 当 object 为 null 时变为安全取值，不报空指针异常，表达式的值为null</span><br><span class="line">object.method() ?? // 当 object 为 null 时变为安全调用，不报空指针异常，表达式的值为null</span><br><span class="line">object.value ?? rightExpr  // 空合并与安全取值的组合用法，当object为null时表达式取值rightExpr</span><br><span class="line">object.method() ?? rightExpr  // 空合并安全调用的组合用法，当object为null时表达式取值为rightExpr</span><br></pre></td></tr></table></figure></p>
<p>swift 与 C# 语言仅支持第一种用法并称之为空合操作符，而 JFinal Template Engine 在空合的基础上再支持安全取值、安全调用两个扩展，在模板引擎的应用场景之下的开发体验极为顺滑。</p>
<p>3：消灭插值指令</p>
<p>传统模板引擎通常会引入所谓的插值指令，而其它指令则使用另一套规则，而 jfinal template engine 将插值指令仍然当成是指令，并不引进新的概念，不仅在实现上更加简洁只需 21 行代码，而且降低了学习成本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#(value)</span><br><span class="line">#(object.value)</span><br><span class="line">#(map.key)</span><br></pre></td></tr></table></figure>
<p>4：消灭 macro 指令</p>
<p>如果真心将 template engine 当成一门语言去设计，原本用 macro 实现的功能只需要使用所有语言中都有的 function/method 概念，即可更为简单实现，如下是利用 fcuntion 实现 layout 功能的示例先在 layout.html 中定义 layout() 函数，并在 body调用 main() 函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#define layout()</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">    #@main()</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line">#end</span><br></pre></td></tr></table></figure></p>
<p>然后在最终的页面，直接调用 layout() 并定义 main() 函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#@layout()</span><br><span class="line">#define main()</span><br><span class="line">...</span><br><span class="line">#end</span><br></pre></td></tr></table></figure></p>
<p>注意：以上的 layout.html、layout、main 这些名称可以随便取名，不是具体的概念，仅为一个名字</p>
<p>JFinal Template Engine 代码仅有 5556 行，仅为 freemarker 的十分之一，完全手写算法，无第三方依赖，对于有任何一门程序语言的开发者学习成本几乎为 0。为控制篇幅，在此不在赘述。jfinal 3.0 版不仅仅是重新定义了 Template Engine，还对其她方面做了非常有价值的改进</p>
<p>1：Routes 级拦截器</p>
<p>jfinal 3.0 可以在 Routes 中添加拦截器，Routes 极拦截器，将拦截所有在此 Routes 中映射的 Controller：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">public class AdminRoutes extends Routes &#123;</span><br><span class="line"> public void config() &#123;</span><br><span class="line">     addInterceptor(new AdminInterceptor());</span><br><span class="line">     add(&quot;/admin&quot;, IndexAdminController.classs);</span><br><span class="line">     add(&quot;/admin/project&quot;, ProjectAdminController.classs);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上例中的 AdminInterceptor 将拦截 IndexAdminController、ProjectAdminController 中的所有 action，这非常有利于多个控制器配置了相同拦截器的应用场景，减少了代码冗余。</p>
<p>2：active record 模块 sql 管理模块</p>
<p>JFinal 3.0利用自带的Template Engine极为简洁的实现了Sql管理功能，可以将sql保存在外部配置文件之中，并且以极少概念极少 API 实现 mybatis 的核心功能</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#sql(&quot;findPrettyGirl&quot;)</span><br><span class="line">  select * from girl where age &gt; ? and age &lt; ? and weight &lt; 50</span><br><span class="line">#end</span><br></pre></td></tr></table></figure>
<p>java 代码中的使用方式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">find(getSql(&quot;findPrettyGirl&quot;), 16, 20);</span><br></pre></td></tr></table></figure></p>
<p>同时还提供了 namespace 支持与 para 动态绑定功能，详见 jfinal 手册</p>
<p>3：Cron4jPlugin 支持任务调度</p>
<p>Cron4jPlugin 对 cron4j 进行了极简封装，简单用法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Cron4jPlugin cp = new Cron4jPlugin();</span><br><span class="line">cp.addTask(&quot;* * * * *&quot;, new MyTask());</span><br><span class="line">me.add(cp);</span><br></pre></td></tr></table></figure></p>
<p>外部配置文件用法详见 jfinal 手册</p>
<p>4：renderQrCode 支持二维码生成</p>
<p>添加 Controller.renderQrCode(…) 极速生成二维码</p>
<p>jfinal 3.0 一如既往地坚持极简设计风格，在极速开发的路上一路挺进，力争为开发者带来更高的开发效率，更好的开发体验，更低的学习成本，进一步节约时间去陪恋人、家人和朋友！篇幅所限，更多功能增强与改进详见 changelog: <a href="http://www.jfinal.com/share/190" target="_blank" rel="noopener">http://www.jfinal.com/share/190</a></p>
<p>ONE MORE THING：JFinal 俱乐部频道今起正式开放，将为小伙伴们提供更高附加值的产品与服务进一步提升开发效率，节省开发时间。老司机要发车了，GO GO GO：<a href="http://www.jfinal.com/club" target="_blank" rel="noopener">http://www.jfinal.com/club</a></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JFinal-3-0/">JFinal 3.0</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/javaweb/">javaweb</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/01/21/blog20170121/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-blog20170120" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/20/blog20170120/">jQuery源码分析--$.Deferred()</a>
    </h1>
  

        <a href="/2017/01/20/blog20170120/" class="archive-article-date">
  	<time datetime="2017-01-20T12:50:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-01-20</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="直接上例子"><a href="#直接上例子" class="headerlink" title="直接上例子"></a>直接上例子</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">//源码结构</span><br><span class="line">jQuery.extend(&#123;</span><br><span class="line">	</span><br><span class="line">	Deferred : function()&#123;&#125;,</span><br><span class="line">	when : function()&#123;&#125;</span><br><span class="line">	</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">//$.Deferred() 相当于 $.Callbacks()</span><br><span class="line">$.Deferred();   -&gt;   $.Callbacks();</span><br><span class="line">$.when();</span><br><span class="line"></span><br><span class="line">//简单例子</span><br><span class="line">var dfd = $.Deferred();</span><br><span class="line"></span><br><span class="line">setTimeout(function()&#123;</span><br><span class="line">	</span><br><span class="line">	alert(111);</span><br><span class="line">	dfd.resolve();</span><br><span class="line">	</span><br><span class="line">&#125;,1000);</span><br><span class="line"></span><br><span class="line">dfd.done(function()&#123;</span><br><span class="line">	alert(222);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="下面是Deferred源码tuples："><a href="#下面是Deferred源码tuples：" class="headerlink" title="下面是Deferred源码tuples："></a>下面是Deferred源码tuples：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[ &quot;resolve&quot;, &quot;done&quot;, jQuery.Callbacks(&quot;once memory&quot;), &quot;resolved&quot; ],</span><br><span class="line">[ &quot;reject&quot;, &quot;fail&quot;, jQuery.Callbacks(&quot;once memory&quot;), &quot;rejected&quot; ],</span><br><span class="line">[ &quot;notify&quot;, &quot;progress&quot;, jQuery.Callbacks(&quot;memory&quot;) ]</span><br></pre></td></tr></table></figure>
<p>resolve/reject/notify 相当于Callbacks中的 fire；<br>done/fail/progress 相当于Callbacks中的 add。</p>
<h2 id="promise与deferred的关系"><a href="#promise与deferred的关系" class="headerlink" title="promise与deferred的关系"></a>promise与deferred的关系</h2><p>promise下面的方法：state、always、then、promise、pipe、done、fail、progress</p>
<p>deferred下面的方法：包括promise下面所有方法以及resolve、reject、notify方法</p>
<p>返回deferred.promise()时，相当于是promise对象，promise对象下面没有resolve、reject、notify方法，所以外部没有办法修改执行是的状态。</p>
<h2 id="when工具方法"><a href="#when工具方法" class="headerlink" title="when工具方法"></a>when工具方法</h2><p>when返回一个不能再外部修改状态的延迟对象promise；<br>多延迟对象同时完成后触发done、fail、then、progress；</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">when: function( subordinate /* , ..., subordinateN */ ) &#123;</span><br><span class="line">		var i = 0,</span><br><span class="line">			resolveValues = core_slice.call( arguments ),</span><br><span class="line">			length = resolveValues.length,</span><br><span class="line"></span><br><span class="line">			// the count of uncompleted subordinates</span><br><span class="line">			remaining = length !== 1 || ( subordinate &amp;&amp; jQuery.isFunction( subordinate.promise ) ) ? length : 0,</span><br><span class="line"></span><br><span class="line">			// the master Deferred. If resolveValues consist of only a single Deferred, just use that.</span><br><span class="line">			deferred = remaining === 1 ? subordinate : jQuery.Deferred(),</span><br><span class="line"></span><br><span class="line">			// Update function for both resolve and progress values</span><br><span class="line">			updateFunc = function( i, contexts, values ) &#123;</span><br><span class="line">				return function( value ) &#123;</span><br><span class="line">					contexts[ i ] = this;</span><br><span class="line">					values[ i ] = arguments.length &gt; 1 ? core_slice.call( arguments ) : value;</span><br><span class="line">					if( values === progressValues ) &#123;</span><br><span class="line">						deferred.notifyWith( contexts, values );</span><br><span class="line">					&#125; else if ( !( --remaining ) ) &#123;</span><br><span class="line">						deferred.resolveWith( contexts, values );</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;;</span><br><span class="line">			&#125;,</span><br><span class="line"></span><br><span class="line">			progressValues, progressContexts, resolveContexts;</span><br><span class="line"></span><br><span class="line">		// add listeners to Deferred subordinates; treat others as resolved</span><br><span class="line">		if ( length &gt; 1 ) &#123;</span><br><span class="line">			progressValues = new Array( length );</span><br><span class="line">			progressContexts = new Array( length );</span><br><span class="line">			resolveContexts = new Array( length );</span><br><span class="line">			for ( ; i &lt; length; i++ ) &#123;</span><br><span class="line">				if ( resolveValues[ i ] &amp;&amp; jQuery.isFunction( resolveValues[ i ].promise ) ) &#123;</span><br><span class="line">					resolveValues[ i ].promise()</span><br><span class="line">						.done( updateFunc( i, resolveContexts, resolveValues ) )</span><br><span class="line">						.fail( deferred.reject )</span><br><span class="line">						.progress( updateFunc( i, progressContexts, progressValues ) );</span><br><span class="line">				&#125; else &#123;</span><br><span class="line">					--remaining;</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		// if we&apos;re not waiting on anything, resolve the master</span><br><span class="line">		if ( !remaining ) &#123;</span><br><span class="line">			deferred.resolveWith( resolveContexts, resolveValues );</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		return deferred.promise();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Deferred/">$.Deferred()</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/jQuery源码分析/">jQuery源码分析</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/01/20/blog20170120/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-blog20170119" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/01/19/blog20170119/">脚本引用中的DEFER和ASYNC的用法和区别</a>
    </h1>
  

        <a href="/2017/01/19/blog20170119/" class="archive-article-date">
  	<time datetime="2017-01-19T06:50:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-01-19</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>因为浏览器在遇到script标签的时候，文档的解析会停止，不再构建document，有时打开一个网页上会出现空白一段时间，浏览器显示是刷新请求状态(也就是一直转圈)，这就会给用户很不好的体验，defer和async的合理使用就可以避免这个情况，而且通常script的位置建议写在页面底部(移动端应用的比较多，这两个都是html5中的新属性)。</p>
</blockquote>
<p>所以相对于默认的script引用，这里配合defer和async就有两种新的用法，它们之间什么区别那？</p>
<p>1.默认引用 script: <code>&lt;script type=&quot;text/javascript&quot; src=&quot;x.min.js&quot;&gt;&lt;/script&gt;</code></p>
<p>　当浏览器遇到 script 标签时，文档的解析将停止，并立即下载并执行脚本，脚本执行完毕后将继续解析文档。</p>
<p>2.async模式  <code>&lt;script type=&quot;text/javascript&quot; src=&quot;x.min.js&quot; async=&quot;async&quot;&gt;&lt;/script&gt;</code></p>
<p>　　当浏览器遇到 script 标签时，文档的解析不会停止，其他线程将下载脚本，脚本下载完成后开始执行脚本，脚本执行的过程中文档将停止解析，直到脚本执行完毕。</p>
<p>3.defer模式  <code>&lt;script type=&quot;text/javascript&quot; src=&quot;x.min.js&quot; defer=&quot;defer&quot;&gt;&lt;/script&gt;</code></p>
<p>　　当浏览器遇到 script 标签时，文档的解析不会停止，其他线程将下载脚本，待到文档解析完成，脚本才会执行。</p>
<p>所以async和defer的最主要的区别就是async是异步下载并立即执行，然后文档继续解析，defer是异步加载后解析文档，然后再执行脚本，这样说起来是不是理解了一点了；</p>
<p>　　它们的核心功能就是异步，那么两种属性怎么去区分什么情况下用哪个那，主要的参考是如果脚本不依赖于任何脚本，并不被任何脚本依赖，那么则使用 defer，如果脚本是模块化的，不依赖于任何脚本，那么则使用 async；主要功能点说完了，小伙伴们有没有分清楚他们的区别了那。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/async/">async</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/defer/">defer</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/前端技术/">前端技术</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/01/19/blog20170119/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/5/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/7/">Next &raquo;</a>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2018 影子爱乘凉
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true
	}
</script>

<script src="/./main.js?v=4.0.0"></script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">生活</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">git</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">iScroll</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">java学习记录</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">js</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">jquery</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">stop</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">markdown</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">npm</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Servlet</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">--disable-web-security</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Bootstrap</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">jsp</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">位运算符NOT(~)</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">cookie</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">session</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">过滤器filter</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Listener</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">匿名函数自执行</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">插件接口extend</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">ready()</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">$.Callbacks()</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">js中this</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">支付宝集五福</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">defer</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">async</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">$.Deferred()</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">JFinal 3.0</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">data()</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">css技巧</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">js执行模型</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">queue()</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">dropload</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">迭代器</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">for-of循环</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Generators</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">jQuery.Validate.js</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">setTimeout</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">sublime</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Emmet</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">ajax cache</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">WebStorage</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">localStorage</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Javascript深浅拷贝</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">前端优化</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">ANT DESIGN</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Vue.js中ajax请求</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Vue-cli proxyTable</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Javascript的jsonp原理</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">tippyjs</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Webpack</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">CSRF（Cross-site request forgery）</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">prop-types</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">国际音标</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">英语语法</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">html5 video</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">npmrc文件中设置淘宝镜像</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">web开发快速提高工作效率的网址及工具</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">atom开发常用插件</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">常用的200个动词</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">英语中相似单词</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">inner join, left join, right join, full outer join</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">GifCam</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">aaencode</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">video视频标签</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">CMD常用命令大全</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">activity</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Immutable</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">yarn与npm的命令行小结</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">第一行 Android 代码</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">天津市津南区图书馆</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Will be married</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">SASS</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">揭秘react生态体系</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">.bat</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">如何在 Vue.js 中使用第三方库 </a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">vue 响应式原理</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">刘姓姓名收集</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">排序算法</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">HEXO</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">大前端工具集</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">工作总结</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            2、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: true
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    

    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>