<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://tawen.github.io">
  <title>影子爱乘凉</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="影子爱乘凉个人博客">
<meta property="og:type" content="website">
<meta property="og:title" content="影子爱乘凉">
<meta property="og:url" content="http://tawen.github.io/page/5/index.html">
<meta property="og:site_name" content="影子爱乘凉">
<meta property="og:description" content="影子爱乘凉个人博客">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="影子爱乘凉">
<meta name="twitter:description" content="影子爱乘凉个人博客">
  
    <link rel="alternative" href="/atom.xml" title="影子爱乘凉" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/main.css?v=4.0.0">
  

  

</head>

<body>
  <div id="container" q-class="show:isCtnShow">
    <canvas id="anm-canvas" class="anm-canvas"></canvas>
    <div class="left-col" q-class="show:isShow">
      <div class="overlay">
	<svg style="position:absolute;left:0;bottom:0" class="editorial" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none">
		<defs><path id="gentle-wave" d="M-160 44c30 0
		  58-18 88-18s
		  58 18 88 18
		  58-18 88-18
		  58 18 88 18
		  v44h-352z"></path>
		  </defs>
		  <g class="parallax">
			<use xlink:href="#gentle-wave" x="50" y="0" fill="rgba(128,128,128,.5)"></use>
			<use xlink:href="#gentle-wave" x="50" y="3" fill="rgba(128,128,128,.5)"></use>
			<use xlink:href="#gentle-wave" x="50" y="6" fill="rgba(128,128,128,.5)"></use>
			</g>
		</svg>
		
</div>
<style>
	.parallax>use {
    animation: move-forever 12s linear infinite
  }
  .parallax>use:nth-child(1) {
    animation-delay: -2s
  }
  .parallax>use:nth-child(2) {
    animation-delay: -2s;
    animation-duration: 5s
  }
  .parallax>use:nth-child(3) {
    animation-delay: -4s;
    animation-duration: 3s
  }
  @keyframes move-forever {
    0% {
      transform: translate(-90px, 0)
    }
    100% {
      transform: translate(85px, 0)
    }
	}
	#header .profilepic:hover {
  -webkit-animation: btnGroups 1s linear;
  -webkit-animation: btnGroups 1s linear;
  -moz-animation: btnGroups 1s linear;
  -ms-animation: btnGroups 1s linear;
  animation: btnGroups 1s linear;
}
@-webkit-keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
  }
}
@-moz-keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
    -moz-transform: scale(1.2, 0.8);
    -ms-transform: scale(1.2, 0.8);
    transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
    -moz-transform: scale(1.18, 0.82);
    -ms-transform: scale(1.18, 0.82);
    transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
    -moz-transform: scale(1.16, 0.84);
    -ms-transform: scale(1.16, 0.84);
    transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
    -moz-transform: scale(1.13, 0.87);
    -ms-transform: scale(1.13, 0.87);
    transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
    -moz-transform: scale(1.1, 0.9);
    -ms-transform: scale(1.1, 0.9);
    transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
    -moz-transform: scale(1.07, 0.93);
    -ms-transform: scale(1.07, 0.93);
    transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
    -moz-transform: scale(1.04, 0.96);
    -ms-transform: scale(1.04, 0.96);
    transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
    -moz-transform: scale(0.97, 1.03);
    -ms-transform: scale(0.97, 1.03);
    transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
    -moz-transform: scale(0.96, 1.04);
    -ms-transform: scale(0.96, 1.04);
    transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
    -moz-transform: scale(0.98, 1.02);
    -ms-transform: scale(0.98, 1.02);
    transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
}
@-webkit-keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
    -moz-transform: scale(1.2, 0.8);
    -ms-transform: scale(1.2, 0.8);
    transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
    -moz-transform: scale(1.18, 0.82);
    -ms-transform: scale(1.18, 0.82);
    transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
    -moz-transform: scale(1.16, 0.84);
    -ms-transform: scale(1.16, 0.84);
    transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
    -moz-transform: scale(1.13, 0.87);
    -ms-transform: scale(1.13, 0.87);
    transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
    -moz-transform: scale(1.1, 0.9);
    -ms-transform: scale(1.1, 0.9);
    transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
    -moz-transform: scale(1.07, 0.93);
    -ms-transform: scale(1.07, 0.93);
    transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
    -moz-transform: scale(1.04, 0.96);
    -ms-transform: scale(1.04, 0.96);
    transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
    -moz-transform: scale(0.97, 1.03);
    -ms-transform: scale(0.97, 1.03);
    transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
    -moz-transform: scale(0.96, 1.04);
    -ms-transform: scale(0.96, 1.04);
    transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
    -moz-transform: scale(0.98, 1.02);
    -ms-transform: scale(0.98, 1.02);
    transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
}
@-o-keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
    -moz-transform: scale(1.2, 0.8);
    -ms-transform: scale(1.2, 0.8);
    transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
    -moz-transform: scale(1.18, 0.82);
    -ms-transform: scale(1.18, 0.82);
    transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
    -moz-transform: scale(1.16, 0.84);
    -ms-transform: scale(1.16, 0.84);
    transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
    -moz-transform: scale(1.13, 0.87);
    -ms-transform: scale(1.13, 0.87);
    transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
    -moz-transform: scale(1.1, 0.9);
    -ms-transform: scale(1.1, 0.9);
    transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
    -moz-transform: scale(1.07, 0.93);
    -ms-transform: scale(1.07, 0.93);
    transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
    -moz-transform: scale(1.04, 0.96);
    -ms-transform: scale(1.04, 0.96);
    transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
    -moz-transform: scale(0.97, 1.03);
    -ms-transform: scale(0.97, 1.03);
    transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
    -moz-transform: scale(0.96, 1.04);
    -ms-transform: scale(0.96, 1.04);
    transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
    -moz-transform: scale(0.98, 1.02);
    -ms-transform: scale(0.98, 1.02);
    transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
}
@keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
    -moz-transform: scale(1.2, 0.8);
    -ms-transform: scale(1.2, 0.8);
    transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
    -moz-transform: scale(1.18, 0.82);
    -ms-transform: scale(1.18, 0.82);
    transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
    -moz-transform: scale(1.16, 0.84);
    -ms-transform: scale(1.16, 0.84);
    transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
    -moz-transform: scale(1.13, 0.87);
    -ms-transform: scale(1.13, 0.87);
    transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
    -moz-transform: scale(1.1, 0.9);
    -ms-transform: scale(1.1, 0.9);
    transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
    -moz-transform: scale(1.07, 0.93);
    -ms-transform: scale(1.07, 0.93);
    transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
    -moz-transform: scale(1.04, 0.96);
    -ms-transform: scale(1.04, 0.96);
    transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
    -moz-transform: scale(0.97, 1.03);
    -ms-transform: scale(0.97, 1.03);
    transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
    -moz-transform: scale(0.96, 1.04);
    -ms-transform: scale(0.96, 1.04);
    transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
    -moz-transform: scale(0.98, 1.02);
    -ms-transform: scale(0.98, 1.02);
    transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
}
</style>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			<img src="https://tawen.github.io/img/photo.jpg" class="js-avatar">
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">影子爱乘凉</a></h1>
		</hgroup>

		
		<p class="header-subtitle">路走了28年，方向始终不变。</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">首页</a></li>
	        
				<li><a href="/archives">存档</a></li>
	        
				<li><a href="/about">关于</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a data-idx="0" q-on="click: openSlider(e, 'innerArchive')" href="javascript:void(0)">所有文章</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/tawen" title="github"><i class="icon-github"></i></a>
		        
					<a class="weibo" target="_blank" href="http://weibo.com/3168014535/profile?topnav=1&wvr=6&is_all=1" title="weibo"><i class="icon-weibo"></i></a>
		        
					<a class="rss" target="_blank" href="/atom.xml" title="rss"><i class="icon-rss"></i></a>
		        
					<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/liu-zhen-hua-74-57" title="zhihu"><i class="icon-zhihu"></i></a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col" q-class="show:isShow,hide:isShow|isFalse">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-sort"></i></div>
		  <h1 class="header-author js-mobile-header hide">影子爱乘凉</h1>
		  <svg style="position:absolute;left:0;bottom:0" class="editorial" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none">
			<defs><path id="gentle-wave" d="M-160 44c30 0
			  58-18 88-18s
			  58 18 88 18
			  58-18 88-18
			  58 18 88 18
			  v44h-352z"></path>
			  </defs>
			  <g class="parallax">
				<use xlink:href="#gentle-wave" x="50" y="0" fill="rgba(128,128,128,.5)"></use>
				<use xlink:href="#gentle-wave" x="50" y="3" fill="rgba(128,128,128,.5)"></use>
				<use xlink:href="#gentle-wave" x="50" y="6" fill="rgba(128,128,128,.5)"></use>
				</g>
			</svg>
	  </div>
	  
	  <style>
		.parallax>use {
		animation: move-forever 12s linear infinite
	  }
	  .parallax>use:nth-child(1) {
		animation-delay: -2s
	  }
	  .parallax>use:nth-child(2) {
		animation-delay: -2s;
		animation-duration: 5s
	  }
	  .parallax>use:nth-child(3) {
		animation-delay: -4s;
		animation-duration: 3s
	  }
	  @keyframes move-forever {
		0% {
		  transform: translate(-90px, 0)
		}
		100% {
		  transform: translate(85px, 0)
		}
		}
		#header .profilepic:hover {
  -webkit-animation: btnGroups 1s linear;
  -webkit-animation: btnGroups 1s linear;
  -moz-animation: btnGroups 1s linear;
  -ms-animation: btnGroups 1s linear;
  animation: btnGroups 1s linear;
}
@-webkit-keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
  }
}
@-moz-keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
    -moz-transform: scale(1.2, 0.8);
    -ms-transform: scale(1.2, 0.8);
    transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
    -moz-transform: scale(1.18, 0.82);
    -ms-transform: scale(1.18, 0.82);
    transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
    -moz-transform: scale(1.16, 0.84);
    -ms-transform: scale(1.16, 0.84);
    transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
    -moz-transform: scale(1.13, 0.87);
    -ms-transform: scale(1.13, 0.87);
    transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
    -moz-transform: scale(1.1, 0.9);
    -ms-transform: scale(1.1, 0.9);
    transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
    -moz-transform: scale(1.07, 0.93);
    -ms-transform: scale(1.07, 0.93);
    transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
    -moz-transform: scale(1.04, 0.96);
    -ms-transform: scale(1.04, 0.96);
    transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
    -moz-transform: scale(0.97, 1.03);
    -ms-transform: scale(0.97, 1.03);
    transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
    -moz-transform: scale(0.96, 1.04);
    -ms-transform: scale(0.96, 1.04);
    transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
    -moz-transform: scale(0.98, 1.02);
    -ms-transform: scale(0.98, 1.02);
    transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
}
@-webkit-keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
    -moz-transform: scale(1.2, 0.8);
    -ms-transform: scale(1.2, 0.8);
    transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
    -moz-transform: scale(1.18, 0.82);
    -ms-transform: scale(1.18, 0.82);
    transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
    -moz-transform: scale(1.16, 0.84);
    -ms-transform: scale(1.16, 0.84);
    transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
    -moz-transform: scale(1.13, 0.87);
    -ms-transform: scale(1.13, 0.87);
    transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
    -moz-transform: scale(1.1, 0.9);
    -ms-transform: scale(1.1, 0.9);
    transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
    -moz-transform: scale(1.07, 0.93);
    -ms-transform: scale(1.07, 0.93);
    transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
    -moz-transform: scale(1.04, 0.96);
    -ms-transform: scale(1.04, 0.96);
    transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
    -moz-transform: scale(0.97, 1.03);
    -ms-transform: scale(0.97, 1.03);
    transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
    -moz-transform: scale(0.96, 1.04);
    -ms-transform: scale(0.96, 1.04);
    transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
    -moz-transform: scale(0.98, 1.02);
    -ms-transform: scale(0.98, 1.02);
    transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
}
@-o-keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
    -moz-transform: scale(1.2, 0.8);
    -ms-transform: scale(1.2, 0.8);
    transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
    -moz-transform: scale(1.18, 0.82);
    -ms-transform: scale(1.18, 0.82);
    transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
    -moz-transform: scale(1.16, 0.84);
    -ms-transform: scale(1.16, 0.84);
    transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
    -moz-transform: scale(1.13, 0.87);
    -ms-transform: scale(1.13, 0.87);
    transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
    -moz-transform: scale(1.1, 0.9);
    -ms-transform: scale(1.1, 0.9);
    transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
    -moz-transform: scale(1.07, 0.93);
    -ms-transform: scale(1.07, 0.93);
    transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
    -moz-transform: scale(1.04, 0.96);
    -ms-transform: scale(1.04, 0.96);
    transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
    -moz-transform: scale(0.97, 1.03);
    -ms-transform: scale(0.97, 1.03);
    transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
    -moz-transform: scale(0.96, 1.04);
    -ms-transform: scale(0.96, 1.04);
    transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
    -moz-transform: scale(0.98, 1.02);
    -ms-transform: scale(0.98, 1.02);
    transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
}
@keyframes btnGroups {
  0% {
    -webkit-transform: scale(1.2, 0.8);
    -moz-transform: scale(1.2, 0.8);
    -ms-transform: scale(1.2, 0.8);
    transform: scale(1.2, 0.8);
  }
  1% {
    -webkit-transform: scale(1.18, 0.82);
    -moz-transform: scale(1.18, 0.82);
    -ms-transform: scale(1.18, 0.82);
    transform: scale(1.18, 0.82);
  }
  2% {
    -webkit-transform: scale(1.16, 0.84);
    -moz-transform: scale(1.16, 0.84);
    -ms-transform: scale(1.16, 0.84);
    transform: scale(1.16, 0.84);
  }
  3% {
    -webkit-transform: scale(1.13, 0.87);
    -moz-transform: scale(1.13, 0.87);
    -ms-transform: scale(1.13, 0.87);
    transform: scale(1.13, 0.87);
  }
  4% {
    -webkit-transform: scale(1.1, 0.9);
    -moz-transform: scale(1.1, 0.9);
    -ms-transform: scale(1.1, 0.9);
    transform: scale(1.1, 0.9);
  }
  5% {
    -webkit-transform: scale(1.07, 0.93);
    -moz-transform: scale(1.07, 0.93);
    -ms-transform: scale(1.07, 0.93);
    transform: scale(1.07, 0.93);
  }
  6% {
    -webkit-transform: scale(1.04, 0.96);
    -moz-transform: scale(1.04, 0.96);
    -ms-transform: scale(1.04, 0.96);
    transform: scale(1.04, 0.96);
  }
  7% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  8% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  9% {
    -webkit-transform: scale(0.97, 1.03);
    -moz-transform: scale(0.97, 1.03);
    -ms-transform: scale(0.97, 1.03);
    transform: scale(0.97, 1.03);
  }
  10% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  11% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  12% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  13% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  14% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  15% {
    -webkit-transform: scale(0.93, 1.07);
    -moz-transform: scale(0.93, 1.07);
    -ms-transform: scale(0.93, 1.07);
    transform: scale(0.93, 1.07);
  }
  16% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  17% {
    -webkit-transform: scale(0.94, 1.06);
    -moz-transform: scale(0.94, 1.06);
    -ms-transform: scale(0.94, 1.06);
    transform: scale(0.94, 1.06);
  }
  18% {
    -webkit-transform: scale(0.95, 1.05);
    -moz-transform: scale(0.95, 1.05);
    -ms-transform: scale(0.95, 1.05);
    transform: scale(0.95, 1.05);
  }
  19% {
    -webkit-transform: scale(0.96, 1.04);
    -moz-transform: scale(0.96, 1.04);
    -ms-transform: scale(0.96, 1.04);
    transform: scale(0.96, 1.04);
  }
  20% {
    -webkit-transform: scale(0.98, 1.02);
    -moz-transform: scale(0.98, 1.02);
    -ms-transform: scale(0.98, 1.02);
    transform: scale(0.98, 1.02);
  }
  21% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  22% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  23% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  24% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  25% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  26% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  27% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  28% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  29% {
    -webkit-transform: scale(1.03, 0.97);
    -moz-transform: scale(1.03, 0.97);
    -ms-transform: scale(1.03, 0.97);
    transform: scale(1.03, 0.97);
  }
  30% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  31% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  32% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  33% {
    -webkit-transform: scale(1.02, 0.98);
    -moz-transform: scale(1.02, 0.98);
    -ms-transform: scale(1.02, 0.98);
    transform: scale(1.02, 0.98);
  }
  34% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  35% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  36% {
    -webkit-transform: scale(1.01, 0.99);
    -moz-transform: scale(1.01, 0.99);
    -ms-transform: scale(1.01, 0.99);
    transform: scale(1.01, 0.99);
  }
  37% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  38% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  39% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
  40% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  41% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  42% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  43% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  44% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  45% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  46% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  47% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  48% {
    -webkit-transform: scale(0.99, 1.01);
    -moz-transform: scale(0.99, 1.01);
    -ms-transform: scale(0.99, 1.01);
    transform: scale(0.99, 1.01);
  }
  49% {
    -webkit-transform: scale(1, 1);
    -moz-transform: scale(1, 1);
    -ms-transform: scale(1, 1);
    transform: scale(1, 1);
  }
}
	</style>	  
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				<img src="https://tawen.github.io/img/photo.jpg" class="js-avatar">
			</div>
			<hgroup>
			  <h1 class="header-author">影子爱乘凉</h1>
			</hgroup>
			
			<p class="header-subtitle">路走了28年，方向始终不变。</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">首页</a></li>
		        
					<li><a href="/archives">存档</a></li>
		        
					<li><a href="/about">关于</a></li>
		        
		        
		        	<li><a href="/archives/">所有文章</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/tawen" title="github"><i class="icon-github"></i></a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/3168014535/profile?topnav=1&wvr=6&is_all=1" title="weibo"><i class="icon-weibo"></i></a>
			        
						<a class="rss" target="_blank" href="/atom.xml" title="rss"><i class="icon-rss"></i></a>
			        
						<a class="zhihu" target="_blank" href="https://www.zhihu.com/people/liu-zhen-hua-74-57" title="zhihu"><i class="icon-zhihu"></i></a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div id="wrapper" class="body-wrap">
        <div class="menu-l">
          <div class="canvas-wrap">
            <canvas data-colors="#eaeaea" data-sectionHeight="100" data-contentId="js-content" id="myCanvas1" class="anm-canvas"></canvas>
          </div>
          <div id="js-content" class="content-ll">
            
  
    <article id="post-blog20170322" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/22/blog20170322/">Vue.js中ajax请求代码应该写在组件的methods中还是vuex的actions中？</a>
    </h1>
  

        <a href="/2017/03/22/blog20170322/" class="archive-article-date">
  	<time datetime="2017-03-22T11:55:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-03-22</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>假如说我页面上有一个按钮，点击之后请求后端接口，然后将后端返回的json做相关处理之后写入vuex的state。</p>
<p>现在有两种写法：</p>
<p>一种是：“请求后端接口”这个ajax代码应该是写在按钮的点击事件处理函数中，然后在这个处理函数里面提交mutations</p>
<p>还一种是：直接将“请求后端接口”这个ajax代码写在actions中，actions中提交mutations，按钮的点击事件处理函数中只写一个分发actions的按钮</p>
<p>请问哪种写法更加合适而且优雅？</p>
<p>另外还有一个疑问就是“将后端返回的json做相关处理”这个代码又应该是先处理好，然后将处理好的数据传入mutations，还是直接在mutations里面处理？</p>
<p>我个人觉得后者代码量更大，感觉有点麻烦，但是不知道会不会在解耦合，追踪数据变化方面更好？</p>
<p>我会把所有和服务端的交互写在 Actions 中（除非你和服务端的交互不需要界面反馈，比如前端打点的统计这种）其他情况下理论上你的页面的状态应该是和服务端一一对应的。所以把对后端的请求都通过 Actions 来封装，你业务代码里逻辑就只有对Action 的调用操作，更形象的就是直接对数据操作。而再不用管数据的返回之类的，因为数据返回直接会改变state，而state 的改变直接会触发 View 的更新。我觉得这个才是 vuex 和 前端单向数据流方便，提高效率的地方。总体的设计原则是Actions 是异步，处理业务逻辑的，而 Mutation 只是简单对state 的状态进行改变。通过这样你所有的组件进行的操作都可以和你的state 的状态一一对应，代码清晰简单。</p>
<p>我肯定会处理好再传入mutations，我的mutation-types 都非常的清晰就是 UPDATE_[XXX] ，ADD_[XXX] 所以除去必要的逻辑，如果有计算逻辑，或是其他格式化的逻辑，我肯定是做完以后，才调用 commit 你可以把state 理解为前端的共用数据库， mutations 这些是增删改，getters 是查，所以mutations 里的逻辑应该是越少越好，记得官网也有建议</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue-js中ajax请求/">Vue.js中ajax请求</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/前端技术/">前端技术</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/03/22/blog20170322/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-blog20170320" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/20/blog20170320/">ANT DESIGN 一个设计 &amp; 前端框架 - React 用户的福音</a>
    </h1>
  

        <a href="/2017/03/20/blog20170320/" class="archive-article-date">
  	<time datetime="2017-03-20T04:55:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-03-20</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>原文链接：<a href="http://ant.design/" target="_blank" rel="noopener">http://ant.design/</a><br>ANT DESIGN 是蚂蚁金服体验技术部出品的一个设计&amp;前端框架，基于 React 框架。目前官网介绍的包括 CSS 和 Components 两大部分。 CSS 部分涵盖了基本的 Layout，Iconfont，Button，Motion。 组件非常丰富，有 Checkbox，Radio， Switch，Slider，Datepicker，Select，InputNumber，Tabs，Steps，Collapse，Pagination，Modal，Message，Dropdown，Popover，Popconfirm，Tooltip，Progress，Table。 不多说了，自己看吧 <a href="https://github.com/ant-design/ant-design" target="_blank" rel="noopener">https://github.com/ant-design/ant-design</a> —— 由Kuma Li分享</p>
</blockquote>
<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>一套企业级的前端设计语言和基于 React 的实现。</p>
<h2 id="特性"><a href="#特性" class="headerlink" title="特性"></a>特性</h2><p>企业级金融产品的交互语言和视觉体系。<br>丰富实用的 React UI 组件。<br>基于 React 的组件化开发模式。<br>背靠 npm 生态圈。<br>基于 webpack 的调试构建方案，支持 ES6。</p>
<h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>var antd = require(‘antd’);<br>var Datepicker = antd.Datepicker;</p>
<p>React.render(, mountNode);</p>
<h2 id="链接"><a href="#链接" class="headerlink" title="链接"></a>链接</h2><ul>
<li>首页</li>
<li>文档</li>
<li>组件</li>
<li>构建调试工具</li>
<li>开发计划</li>
<li>React 模块</li>
<li>React 代码规范</li>
<li>组件设计原则</li>
</ul>
<h2 id="谁在使用"><a href="#谁在使用" class="headerlink" title="谁在使用"></a>谁在使用</h2><p>蚂蚁金服</p>
<h2 id="如何贡献"><a href="#如何贡献" class="headerlink" title="如何贡献"></a>如何贡献</h2><p>我们欢迎任何形式的贡献，有任何建议或意见您可以进行 Pull Request，或者给我们 提问。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ANT-DESIGN/">ANT DESIGN</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/前端技术/">前端技术</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/03/20/blog20170320/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-blog20170314" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/14/blog20170314/">常见的几种数组排序算法JS实现</a>
    </h1>
  

        <a href="/2017/03/14/blog20170314/" class="archive-article-date">
  	<time datetime="2017-03-14T06:26:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-03-14</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="快速排序"><a href="#快速排序" class="headerlink" title="快速排序"></a>快速排序</h2><blockquote>
<p>从给定的数据中，随机抽出一项，这项的左边放所有比它小的，右边放比它大的，然后再分别这两边执行上述操作，采用的是递归的思想，总结出来就是　实现一层，分别给两边递归，设置好出口</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">function fastSort(array,head,tail)&#123;</span><br><span class="line">    //考虑到给每个分区操作的时候都是在原有的数组中进行操作的，所以这里head,tail来确定分片的位置</span><br><span class="line">    /*生成随机项*/</span><br><span class="line">    var randomnum = Math.floor(ranDom(head,tail));</span><br><span class="line">    var random = array[randomnum];</span><br><span class="line">    /*将小于random的项放置在其左边  策略就是通过一个临时的数组来储存分好区的结果，再到原数组中替换*/</span><br><span class="line">    var arrayTemp = [];</span><br><span class="line">    var unshiftHead = 0;</span><br><span class="line">    for(var i = head;i &lt;= tail;i++)&#123;</span><br><span class="line">      if(array[i]&lt;random)&#123;</span><br><span class="line">        arrayTemp.unshift(array[i]);</span><br><span class="line">        unshiftHead++;</span><br><span class="line">      &#125;else if(array[i]&gt;random)&#123;</span><br><span class="line">        arrayTemp.push(array[i]);</span><br><span class="line">      &#125;</span><br><span class="line">      /*当它等于的时候放哪，这里我想选择放到队列的前面，也就是从unshift后的第一个位置放置*/</span><br><span class="line">      if(array[i]===random)&#123;</span><br><span class="line">        arrayTemp.splice(unshiftHead,0,array[i]);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    /*将对应项覆盖原来的记录*/</span><br><span class="line">    for(var j = head , u=0;j &lt;= tail;j++,u++)&#123;</span><br><span class="line">      array.splice(j,1,arrayTemp[u]);</span><br><span class="line">    &#125;</span><br><span class="line">    /*寻找中间项所在的index*/</span><br><span class="line">    var nowIndex = array.indexOf(random);</span><br><span class="line"></span><br><span class="line">    /*设置出口，当要放进去的片段只有2项的时候就可以收工了*/</span><br><span class="line">    if(arrayTemp.length &lt;= 2)&#123;</span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line">    /*递归，同时应用其左右两个区域*/</span><br><span class="line">    fastSort(array,head,nowIndex);</span><br><span class="line">    fastSort(array,nowIndex+1,tail);</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2 id="插入排序"><a href="#插入排序" class="headerlink" title="插入排序"></a>插入排序</h2><blockquote>
<p>思想就是在已经排好序的数组中插入到相应的位置，以从小到大排序为例，扫描已经排好序的片段的每一项，如大于，则继续往后，直到他小于一项时，将其插入到这项的前面</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">function insertSort(array)&#123;</span><br><span class="line">    /*start根据已排列好的项数决定*/</span><br><span class="line">    var start=1;</span><br><span class="line">    /*按顺序，每一项检查已排列好的序列*/</span><br><span class="line">    for(var i=start; i&lt;array.length; start++,i++)&#123;</span><br><span class="line">      /*跟已排好序的序列做对比，并插入到合适的位置*/</span><br><span class="line">      for(var j=0; j&lt;start; j++)&#123;</span><br><span class="line">        /*小于或者等于时（我们是升序）插入到该项前面*/</span><br><span class="line">        if(array[i]&lt;=array[j])&#123;</span><br><span class="line">          console.log(array[i]+&apos; &apos;+array[j]);</span><br><span class="line">          array.splice(j,0,array[i]);</span><br><span class="line">          /*删除原有项*/</span><br><span class="line">          array.splice(i+1,1);</span><br><span class="line">          break;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="冒泡排序"><a href="#冒泡排序" class="headerlink" title="冒泡排序"></a>冒泡排序</h2><blockquote>
<p>故名思意 ，就是一个个冒泡到最前端或者最后端，主要是通过两两依次比较，以升序为例，如果前一项比后一项大则交换顺序，一直比到最后一对</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function bubbleSort(array)&#123;</span><br><span class="line">    /*给每个未确定的位置做循环*/</span><br><span class="line">    for(var unfix=array.length-1; unfix&gt;0; unfix--)&#123;</span><br><span class="line">      /*给进度做个记录，比到未确定位置*/</span><br><span class="line">      for(var i=0; i&lt;unfix;i++)&#123;</span><br><span class="line">        if(array[i]&gt;array[i+1])&#123;</span><br><span class="line">          var temp = array[i];</span><br><span class="line">          array.splice(i,1,array[i+1]);</span><br><span class="line">          array.splice(i+1,1,temp);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h2 id="选择排序"><a href="#选择排序" class="headerlink" title="选择排序"></a>选择排序</h2><blockquote>
<p>将当前未确定块的min或者max取出来插到最前面或者后面</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">function selectSort(array)&#123;</span><br><span class="line">    /*给每个插入后的未确定的范围循环，初始是从0开始*/</span><br><span class="line">    for(var unfixed=0; unfixed&lt;array.length; unfixed++)&#123;</span><br><span class="line">      /*设置当前范围的最小值和其索引*/</span><br><span class="line">      var min = array[unfixed];</span><br><span class="line">      var minIndex = unfixed;</span><br><span class="line">      /*在该范围内选出最小值*/</span><br><span class="line">      for(var j=unfixed+1; j&lt;array.length; j++)&#123;</span><br><span class="line">        if(min&gt;array[j])&#123;</span><br><span class="line">          min = array[j];</span><br><span class="line">          minIndex = j;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      /*将最小值插入到unfixed，并且把它所在的原有项替换成*/</span><br><span class="line">      array.splice(unfixed,0,min);</span><br><span class="line">      array.splice(minIndex+1,1);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端优化/">前端优化</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/前端技术/">前端技术</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/03/14/blog20170314/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-blog20170313" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/13/blog20170313/">雅虎前端优化35条规则翻译</a>
    </h1>
  

        <a href="/2017/03/13/blog20170313/" class="archive-article-date">
  	<time datetime="2017-03-13T02:23:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-03-13</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>原文： <a href="https://developer.yahoo.com/performance/rules.html" target="_blank" rel="noopener">Best Practices for Speeding Up Your Web Site</a>。</p>
<p>如何让web页面更快，雅虎团队实践总结了7类35条规则，下面一一列出。</p>
<h2 id="1-Content"><a href="#1-Content" class="headerlink" title="1. Content"></a>1. Content</h2><h3 id="1-1-Make-Fewer-HTTP-Requests"><a href="#1-1-Make-Fewer-HTTP-Requests" class="headerlink" title="1.1 Make Fewer HTTP Requests"></a>1.1 Make Fewer HTTP Requests</h3><p>Minimize HTTP Requests减少/最小化 http 请求数。</p>
<p>到终端用户的响应时间80%花在前端：大部分用于下载组件（js/css/image/flash等等）。减少组件数就是减少渲染页面所需的http请求数。这是更快页面的关键。</p>
<p>减少组件数的一个方法就是简化页面设计。保持富内容的页面且能减少http请求，有以下几个技术：</p>
<ul>
<li>Combined files。合并文件，如合并js，合并css都能减少请求数。如果页面间脚本和样式差异很大，合并会更具挑战性。</li>
<li>CSS Sprites。雪碧图可以合并多个背景图片，通过background-image 和 background-position 来显示不同部分。</li>
<li>Image maps。合并多个图片到一个图片，一般用于如导航条。由于定义坐标的枯燥和易错，一般<em>不推荐</em>。</li>
<li>Inline images。使用data:url scheme来內连图片。</li>
</ul>
<p>减少请求数是为第一次访问页面的用户提高性能的最重要的指导。</p>
<h3 id="1-2-Reduce-DNS-Lookups"><a href="#1-2-Reduce-DNS-Lookups" class="headerlink" title="1.2 Reduce DNS Lookups"></a>1.2 Reduce DNS Lookups</h3><p>减少DNS查询。</p>
<p>就像电话簿，你在浏览器地址栏输入网址，通过DNS查询得到网站真实IP。</p>
<p>DNS查询被缓存来提高性能。这种缓存可能发生在特定的缓存服务器（ISP/local area network维护），或者用户的计算机。DNS信息留存在操作系统DNS缓存中（在windows中就是 DNS Client Serve ）。大多浏览器有自己的缓存，独立于操作系统缓存。只要浏览器在自己的缓存里有某条DNS记录，它就不会向操作系统发DNS解析请求。</p>
<p>IE默认缓存DNS记录30分钟，FireFox默认缓存1分钟。</p>
<p>当客户端的DNS缓存是空的，DNS查找次数等于页面中的唯一域名数。</p>
<p>减少DNS请求数可能会减少并行下载数。避免DNS查找减少响应时间，但减少并行下载数可能会增加响应时间。指导原则是组件可以分散在至少2个但不多于4个的不同域名。这是两者的妥协。</p>
<h3 id="1-3-Avoid-Redirects"><a href="#1-3-Avoid-Redirects" class="headerlink" title="1.3 Avoid Redirects"></a>1.3 Avoid Redirects</h3><p>避免跳转。</p>
<p>跳转用301或302状态码来达成。一个301响应http头的例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 301 Moved Permanently</span><br><span class="line">Location: http://example.com/newuri</span><br><span class="line">Content-Type: text/html</span><br></pre></td></tr></table></figure>
<p>最浪费的跳转之一发生在url尾部slash（/）缺失。比如<a href="http://astrology.yahoo.com/astrology会301跳转到http://astrology.yahoo.com/astrology/。这可以被Apache等服务器修复，用Alias，mod_rewrite等等。" target="_blank" rel="noopener">http://astrology.yahoo.com/astrology会301跳转到http://astrology.yahoo.com/astrology/。这可以被Apache等服务器修复，用Alias，mod_rewrite等等。</a></p>
<h3 id="1-4-Make-Ajax-Cacheable"><a href="#1-4-Make-Ajax-Cacheable" class="headerlink" title="1.4 Make Ajax Cacheable"></a>1.4 Make Ajax Cacheable</h3><p>让Ajax可缓存。</p>
<p>使用ajax的好处是可以向用户提供很快的反馈，因为它是向后台异步请求数据。但是，这些异步请求不保证用户等待的时间——异步不意味着瞬时。</p>
<p>提高ajax性能的最重要的方法是让响应被缓存，即在Add an Expires or a Cache-Control Header中讨论的 Expires 。其它方法是：</p>
<ul>
<li>gzip组件</li>
<li>减少DNS查找</li>
<li>压缩JS</li>
<li>避免跳转</li>
<li>设置ETags</li>
</ul>
<h3 id="1-5-Post-load-Components"><a href="#1-5-Post-load-Components" class="headerlink" title="1.5 Post-load Components"></a>1.5 Post-load Components</h3><p>延迟加载组件。</p>
<p>再看看你的页面然后问问自己，“什么是页面初始化必须的？”。剩下的内容和组件可以延迟。</p>
<p>JavaScript是理想的（延迟）候选者，可以切分到onload事件之前和之后。比如拖放的js库可以延迟，因为拖动必须在页面初始化之后。其它可延迟的包括隐藏的内容，折叠起来的图片等等。</p>
<h3 id="1-6-Preload-Components"><a href="#1-6-Preload-Components" class="headerlink" title="1.6 Preload Components"></a>1.6 Preload Components</h3><p>预加载组件。</p>
<p>预加载看起来与延迟加载相反，但它的确有个不同的目标。通过预加载你可以利用浏览器的空闲时间来请求你将来会用到的组件。这样当用户访问下一个页面时，你会有更多的组件已经在缓存中，这样会极大加快页面加载。</p>
<p>有几种预加载类型：</p>
<ul>
<li>无条件预加载：一旦onload触发，你立即获取另外的组件。比如谷歌会在主页这样加载搜索结果页面用到的雪碧图。</li>
<li>有条件预加载：基于用户动作，你推测用户下一步会去哪里并加载相应组件。</li>
<li>预期的预加载：在发布重新设计（的网站）前提前加载。在旧网页预加载新网页的部分组件，那么切换到新网页时就不会是没有任何缓存了。</li>
</ul>
<h3 id="1-7-Reduce-the-Number-of-DOM-Elements"><a href="#1-7-Reduce-the-Number-of-DOM-Elements" class="headerlink" title="1.7 Reduce the Number of DOM Elements"></a>1.7 Reduce the Number of DOM Elements</h3><p>减少dom数。</p>
<p>一个复杂的页面意味着更多的内容要下载，以及更慢的dom访问。比如在有500dom数量的页面添加事件处理就和有5000dom数量的不同。</p>
<p>如果你的页面dom元素很多，那么意味着你可能需要删除无用的内容和标签来优化。</p>
<h3 id="1-8-Split-Components-Across-Domains"><a href="#1-8-Split-Components-Across-Domains" class="headerlink" title="1.8 Split Components Across Domains"></a>1.8 Split Components Across Domains</h3><p>把组件分散到不同的域名。</p>
<p>把组件分散到不同的域名允许你最大化并行下载数。由于DNS查询的副作用，最佳的不同域名数是2-4。</p>
<h3 id="1-9-Minimize-the-Number-of-iframes"><a href="#1-9-Minimize-the-Number-of-iframes" class="headerlink" title="1.9 Minimize the Number of iframes"></a>1.9 Minimize the Number of iframes</h3><p>最小化iframe的数量。</p>
<p>iframe允许html文档被插入到父文档。<br>iframe优点：</p>
<ul>
<li>帮助解决缓慢的第三方内容的加载，如广告和徽章</li>
<li>安全沙盒</li>
<li>并行下载脚本</li>
</ul>
<p>iframe缺点：</p>
<ul>
<li>即使空的也消耗（资源和时间）</li>
<li>阻塞了页面的onload</li>
<li>非语义化（标签）</li>
</ul>
<h3 id="1-10-No-404s"><a href="#1-10-No-404s" class="headerlink" title="1.10 No 404s"></a>1.10 No 404s</h3><p>不要404。</p>
<p>http请求是昂贵的，所以发出http请求但获得没用的响应（如404）是完全不必要的，并且会降低用户体验。</p>
<p>一些网站会有特别的404页面提高用户体验，但这仍然会浪费服务器资源。特别坏的是当链接指向外部js但却得到404结果。这样首先会降低（占用）并行下载数，其次浏览器可能会把404响应体当作js来解析，试图从里面找出可用的东西。</p>
<h2 id="2-Server"><a href="#2-Server" class="headerlink" title="2. Server"></a>2. Server</h2><h3 id="2-1-Use-a-Content-Delivery-Network"><a href="#2-1-Use-a-Content-Delivery-Network" class="headerlink" title="2.1 Use a Content Delivery Network"></a>2.1 Use a Content Delivery Network</h3><p>使用CDN。</p>
<p>用户接近你的服务器会减少响应时间。把你的内容发布到多个，地理上分散的服务器可以让页面加载更快。但怎么开始？</p>
<p>首先不要试图把你的架构重新设计成分布式架构。因为可能引进更多复杂性和不可控。</p>
<p>记住80-90%的终端用户响应时间花费在下载页面中的所有组件：图片、样式、脚本、falsh等等。这是<em>Performance Golden Rule</em>。不要从困难的重新设计后台架构开始，最好首先分发你的静态内容。这不仅可以减少响应时间，用CDN还很容易来做。</p>
<p>CDN是一群不同地点的服务器，可以更高效地分发内容到用户。一些大公司有自己的CDN。</p>
<h3 id="2-2-Add-an-Expires-or-a-Cache-Control-Header"><a href="#2-2-Add-an-Expires-or-a-Cache-Control-Header" class="headerlink" title="2.2 Add an Expires or a Cache-Control Header"></a>2.2 Add an Expires or a Cache-Control Header</h3><p>加Expires或者Cache-Control头部。</p>
<p>这条规则有两个方面：</p>
<ul>
<li>对静态组件：通过设置Expires头部来实现“永不过期”策略。</li>
<li>对动态组件：用合适的Cache-Control头部来帮助浏览器进行有条件请求。</li>
</ul>
<p>页面越来越丰富，意味着更多脚本，样式，图片等等。第一次访问的用户可能需要发出多个请求，但使用Expires可以让这些组件被缓存。这避免了访问子页面时没必要的http请求。Expires一般用在图片上，但应该用在所有的组件上。</p>
<p>浏览器（以及代理）使用缓存来减少http请求数，加快页面加载。服务器使用http响应的Expires头部来告诉客户端一个组件可以缓存多久。比如下面：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Expires: Thu, 15 Apr 2010 20:00:00 GMT //2010-04-15之前都是稳定的</span><br></pre></td></tr></table></figure>
<p>注意，如果你设置了Expires头部，当组件更新后，你必须更改文件名。</p>
<h3 id="2-3-Gzip-Components"><a href="#2-3-Gzip-Components" class="headerlink" title="2.3 Gzip Components"></a>2.3 Gzip Components</h3><p>传输时用gzip等压缩组件。</p>
<p>http请求或响应的传输时间可以被前端工程师显著减少。终端用户的带宽，ISP，接近对等交换点等等没法被开发团队控制，但是，压缩可以通过减少http响应的大小减少响应时间。</p>
<p>从HTTP/1.1开始，客户端通过http请求中的Accept-Encoding头部来提示支持的压缩：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Accept-Encoding: gzip, deflate</span><br></pre></td></tr></table></figure>
<p>如果服务器看到这个头部，它可能会选用列表中的某个方法压缩响应。服务器通过Content-Encoding头部提示客户端：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Encoding: gzip</span><br></pre></td></tr></table></figure>
<p>gzip一般可减小响应的70%。尽可能去gzip更多（文本）类型的文件。html，脚本，样式，xml和json等等都应该被gzip，而图片，pdf等等不应该被gzip，因为它们本身已被压缩过，gzip它们只是浪费cpu，甚至增加文件大小。</p>
<h3 id="2-4-Configure-ETags"><a href="#2-4-Configure-ETags" class="headerlink" title="2.4 Configure ETags"></a>2.4 Configure ETags</h3><p>实体标记（Entity tags，ETag）是服务器和浏览器之间判断浏览器缓存中某个组件是否匹配服务器端原组件的一种机制。实体就是组件：图片，脚本，样式等等。ETag被当作验证实体的比最后更改（last-modified）日期更高效的机制。服务器这样设置组件的ETag：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK</span><br><span class="line">Last-Modified: Tue, 12 Dec 2006 03:03:59 GMT</span><br><span class="line">ETag: &quot;10c24bc-4ab-457e1c1f&quot;</span><br><span class="line">Content-Length: 12195</span><br></pre></td></tr></table></figure></p>
<p>之后，如果浏览器要验证组件，它用If-None-Match头部来传ETag给服务器。如果ETag匹配，服务器返回304：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">GET /i/yahoo.gif HTTP/1.1</span><br><span class="line">Host: us.yimg.com</span><br><span class="line">If-Modified-Since: Tue, 12 Dec 2006 03:03:59 GMT</span><br><span class="line">If-None-Match: &quot;10c24bc-4ab-457e1c1f&quot;</span><br><span class="line">HTTP/1.1 304 Not Modified</span><br></pre></td></tr></table></figure>
<p>ETag的问题是它们被构造来使它们对特定的运行这个网站的服务器唯一。浏览器从一个服务器获取组件，之后向另一个服务器验证，ETag将不匹配。然而服务器集群是处理请求的通用解决方案。</p>
<p>如果不能解决多服务器间的ETag匹配问题，那么删除ETag可能更好。</p>
<h3 id="2-5-Flush-the-Buffer-Early"><a href="#2-5-Flush-the-Buffer-Early" class="headerlink" title="2.5 Flush the Buffer Early"></a>2.5 Flush the Buffer Early</h3><p>早一点刷新buffer（尽早给浏览器数据）。</p>
<p>当用户请求一个页面，服务器一般要花200-500ms来拼凑整个页面。这段时间，浏览器是空闲的（等数据返回）。在php，有个方法flush()允许你传输部分准备好的html响应给浏览器。这样的话浏览器就可以开始下载组件，而同时后台可以继续生成页面剩下的部分。这种好处更多是在忙碌的后台或轻前端网站可以看到。</p>
<p>一个比较好的flush的位置是在head之后，因为浏览器可以加载其中的样式和脚本文件，而后台继续生成页面剩余部分。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- css, js --&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;?php flush(); ?&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;!-- content --&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="2-6-Use-GET-for-AJAX-Requests"><a href="#2-6-Use-GET-for-AJAX-Requests" class="headerlink" title="2.6 Use GET for AJAX Requests"></a>2.6 Use GET for AJAX Requests</h3><p>ajax请求用get。</p>
<p>Yahoo! Mail团队发现当使用XMLHttpRequest，POST 被浏览器实现为两步：首先发送头部，然后发送数据。所以使用GET最好，仅用一个TCP包发送（除非cookie太多）。IE的url长度限制是2K。</p>
<p>POST但不提交任何数据根GET行为类似，但从语义上讲，获取数据应该用GET，提交数据到服务器用POST。</p>
<h3 id="2-7-Avoid-Empty-Image-src"><a href="#2-7-Avoid-Empty-Image-src" class="headerlink" title="2.7 Avoid Empty Image src"></a>2.7 Avoid Empty Image src</h3><p>避免空src的图片。</p>
<p>空src属性的图片的行为可能跟你预期的不一样。它有两种形式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">html标签：&lt;img src=&quot;&quot;&gt;</span><br><span class="line">js：var img = new Image(); img.src = &quot;&quot;;</span><br></pre></td></tr></table></figure></p>
<p>两种都会造成同一种后果：浏览器会向你的服务器发请求。</p>
<ul>
<li>IE，向页面所在的目录发请求。</li>
<li>Safari和Chrome，请求实际的页面。</li>
<li>FireFox3及之前和Safari/Chrome一样，但从3.5开始修复问题，不再发请求。</li>
<li>Opera遇到空图片src不做任何事。</li>
</ul>
<p>为什么这种行为很糟糕？</p>
<p>由于发送大量的意料之外的流量，会削弱服务器，尤其那些每天pv上百万的页面。<br>浪费服务器计算周期取生成不会被浏览的页面。<br>可能会破坏用户数据。如果你在跟踪请求状态，通过cookie或其它，你可能会破坏数据。即使image的请求不会返回图片，但所有的头部数据都被浏览器读取了，包括cookie。即使剩下的响应体被丢弃，破坏可能已经发生。</p>
<p>这种行为的根源是uri解析发生在浏览器。RFC 3986 定义了这种行为，空字符串被当作相对路径，Firefox, Safari, 和 Chrome都正确解析，而IE错误。总之，浏览器解析空字符串为相对路径的行为被认为是符合预期的。</p>
<p>html5在<em>4.8.2</em>添加了对标签src属性的描述，指导浏览器不要发出额外的请求。</p>
<blockquote>
<p>The src attribute must be present, and must contain a valid URL referencing a non-interactive, optionally animated, image resource that is neither paged nor scripted. If the base URI of the element is the same as the document’s address, then the src attribute’s value must not be the empty string.</p>
</blockquote>
<p>幸运的是将来浏览器不会有这个问题了（在图片上）。不幸的是，<code>&lt;script src=&quot;&quot;&gt;</code>和<code>&lt;link href=&quot;&quot;&gt;</code>没有这样的规范。</p>
<h2 id="3-Cookie"><a href="#3-Cookie" class="headerlink" title="3 Cookie"></a>3 Cookie</h2><h3 id="3-1-Reduce-Cookie-Size"><a href="#3-1-Reduce-Cookie-Size" class="headerlink" title="3.1 Reduce Cookie Size"></a>3.1 Reduce Cookie Size</h3><p>http cookie的使用有多种原因，比如授权和个性化。cookie的信息通过http头部在浏览器和服务器端交换。尽可能减小cookie的大小来降低响应时间。</p>
<ul>
<li>消除不必要的cookie。</li>
<li>尽可能减小cookie的大小来降低响应时间。</li>
<li>注意设置cookie到合适的域名级别，则其它子域名不会被影响。</li>
<li>正确设置Expires日期。早一点的Expires日期或者没有会尽早删除cookie，优化响应时间。* </li>
</ul>
<h3 id="3-2-Use-Cookie-free-Domains-for-Components"><a href="#3-2-Use-Cookie-free-Domains-for-Components" class="headerlink" title="3.2 Use Cookie-free Domains for Components"></a>3.2 Use Cookie-free Domains for Components</h3><p>用没有cookie的域名提供组件。</p>
<p>当浏览器请求静态图片并把cookie一起发送到服务器时，cookie此时对服务器没什么用处。所以这些cookie只是增加了网络流量。所以你应该保证静态组件的请求是没有cookie的。可以创建一个子域名来托管所有静态组件。</p>
<p>比如，你域名是<a href="http://www.example.org，可以把静态组件托管在static.example.org。不过，你如果把cookie设置在顶级域名example.org下，这些cookie仍然会被传给static.example.org。这种情况下，启用一个全新的域名来托管静态组件。" target="_blank" rel="noopener">www.example.org，可以把静态组件托管在static.example.org。不过，你如果把cookie设置在顶级域名example.org下，这些cookie仍然会被传给static.example.org。这种情况下，启用一个全新的域名来托管静态组件。</a></p>
<p>另外一个用没有cookie的域名提供组件的好处是，某些代理可能会阻止缓存待cookie的静态组件请求。</p>
<h2 id="4-CSS"><a href="#4-CSS" class="headerlink" title="4. CSS"></a>4. CSS</h2><h3 id="4-1-Put-Stylesheets-at-the-Top"><a href="#4-1-Put-Stylesheets-at-the-Top" class="headerlink" title="4.1 Put Stylesheets at the Top"></a>4.1 Put Stylesheets at the Top</h3><p>把样式放在顶部。</p>
<p>研究雅虎网页性能时发现把样式表移到<code>&lt;head&gt;</code>里会让页面更快。这是因为把样式表移到<code>&lt;head&gt;</code>里允许页面逐步渲染。</p>
<p>关注性能的前端工程师希望页面被逐步渲染，这时因为，我们希望浏览器尽早渲染获取到的任何内容。这对大页面和网速慢的用户很重要。给用户视觉反馈，比如进度条的重要性已经被大量研究和记录。在我们的情况中，HTML页面就是进度条。当浏览器逐步加载页面头部，导航条，logo等等，这些都是给等待页面的用户的视觉反馈。这优化了整体用户体验。</p>
<p>把样式表放在文档底部的问题是它阻止了许多浏览器的逐步渲染，包括IE。这些浏览器阻止渲染来避免在样式更改时需要重绘页面元素。所以用户会卡在白屏。</p>
<p>HTML规范清楚表明样式应该在<code>&lt;head&gt;</code>里。</p>
<h3 id="4-2-Avoid-CSS-Expressions"><a href="#4-2-Avoid-CSS-Expressions" class="headerlink" title="4.2 Avoid CSS Expressions"></a>4.2 Avoid CSS Expressions</h3><p>避免CSS表达式。</p>
<p>CSS表达式是强大的（可能也是危险的）设置动态CSS属性的方法。IE5开始支持，IE8开始不赞成使用。例如，背景颜色可以设置成每小时轮换：</p>
<p>background-color: expression( (new Date()).getHours()%2 ? “#B8D4FF” : “#F08A00” );<br>CSS表达式的问题是它们可能比大多数人预期的计算的更频繁。它们不仅在页面载入和调整大小时重新计算，也在滚动页面甚至是用户在页面上移动鼠标时计算。比如在页面上移动鼠标可能轻易计算超过10000次。</p>
<p>要避免CSS表达式计算太多次，可以在它第一次计算后替换成确切值，或者用事件处理函数而不是CSS表达式。</p>
<h3 id="4-3-Choose-lt-link-gt-over-import"><a href="#4-3-Choose-lt-link-gt-over-import" class="headerlink" title="4.3 Choose &lt;link&gt; over @import"></a>4.3 Choose <code>&lt;link&gt;</code> over @import</h3><p>选择<code>&lt;link&gt;</code>而不是@import。</p>
<p>之前的一个最佳原则是说CSS应该在顶部来允许逐步渲染。</p>
<p>在IE用@import和把CSS放到页面底部行为一致，所以最好别用。</p>
<h3 id="4-4-Avoid-Filters"><a href="#4-4-Avoid-Filters" class="headerlink" title="4.4 Avoid Filters"></a>4.4 Avoid Filters</h3><p>避免使用（IE）过滤器。</p>
<p>IE专有的AlphaImageLoader过滤器用于修复IE7以下版本的半透明真彩色PNG的问题。这个过滤器的问题是它阻止了渲染，并在图片下载时冻结了浏览器。另外它还引起内存消耗，并且它被应用到每个元素而不是每个图片，所以问题（的严重性）翻倍了。</p>
<p>最佳做法是放弃AlphaImageLoader，改用PNG8来优雅降级。</p>
<h2 id="5-JavaScript"><a href="#5-JavaScript" class="headerlink" title="5. JavaScript"></a>5. JavaScript</h2><h3 id="5-1-Put-Scripts-at-the-Bottom"><a href="#5-1-Put-Scripts-at-the-Bottom" class="headerlink" title="5.1 Put Scripts at the Bottom"></a>5.1 Put Scripts at the Bottom</h3><p>把脚本放到底部。</p>
<p>脚本引起的问题是它们阻塞了并行下载。HTTP1.1规范建议浏览器每个域名下不要一次下载超过2个组件。如果你的图片分散在不同服务器，那么你能并行下载多个图片。但当脚本在下载，浏览器不会再下载其它组件，即使在不同域名下。</p>
<p>有些情况下把脚本移动到底部并不简单。比如，脚本中用了document.write来插入内容，它就不能被移动到底部。另外有可能有作用域问题。但大多数情况，有方法可以解决这些问题。</p>
<p>一个替代建议是使用异步脚本。defer属性表明脚本不包含document.write，是提示浏览器继续渲染的线索。不幸的是，Firefox不支持。如果脚本能异步，那么也就可以移动到底部。</p>
<h3 id="5-2-Make-JavaScript-and-CSS-External"><a href="#5-2-Make-JavaScript-and-CSS-External" class="headerlink" title="5.2 Make JavaScript and CSS External"></a>5.2 Make JavaScript and CSS External</h3><p>使用外部JS和CSS。</p>
<p>这里的很多性能规则涉及外部组件怎么管理。但你首先要明白一个基本问题：JS和CSS是应该包含在外部文件还是內连在页面本身？</p>
<p>真实世界中使用外部文件一般会加快页面，因为JS和CSS文件被浏览器缓存了。內连的JS和CSS怎在每次HTML文档下载时都被下载。內连减少了http请求，但增加了HTML文档大小。另一方面，如果JS和CSS被缓存了，那么HTML文档可以减小大小而不增加HTTP请求。</p>
<p>核心因素，就是JS和CSS被缓存相对于HTML文档被请求的频率。尽管这个因素很难被量化，但可以用不同的指标来计算。如果网站用户每个session有多个pv，许多页面重用相同的JS和CSS，那么有很大可能用外部JS和CSS更好。</p>
<p>许多网站用这些指标计算后在中间位置。对这些网站来说，最佳方案还是用外部JS和CSS文件。唯一例外是內连更被主页偏爱，如<a href="http://www.yahoo.com/。主页每个session可能只有少量的甚至一个pv，这时候內连可能更快。" target="_blank" rel="noopener">http://www.yahoo.com/。主页每个session可能只有少量的甚至一个pv，这时候內连可能更快。</a></p>
<p>对多个页面的首页来说，可以通过技术减少（其它页面的）http请求。在首页用內连，初始化后动态加载外部文件，接下来的页面如果用到这些文件，就可以使用缓存了。</p>
<h3 id="5-3-Minify-JavaScript-and-CSS"><a href="#5-3-Minify-JavaScript-and-CSS" class="headerlink" title="5.3 Minify JavaScript and CSS"></a>5.3 Minify JavaScript and CSS</h3><p>压缩JS和CSS。</p>
<p>压缩就是删除代码中不必要的字符来减小文件大小，从而提高加载速度。当代码压缩时，注释删除，不需要的空格（空白，换行，tab）也被删除。</p>
<p>混淆是对代码可选的优化。它比压缩更复杂，并且可能产生bug。在对美国top10网站的调查，压缩可减小21%，而混淆可减小25%。</p>
<p>除了外部脚本和样式，內连的脚本和样式同样应该被压缩。</p>
<h3 id="5-4-Remove-Duplicate-Scripts"><a href="#5-4-Remove-Duplicate-Scripts" class="headerlink" title="5.4 Remove Duplicate Scripts"></a>5.4 Remove Duplicate Scripts</h3><p>删除重复的脚本。</p>
<p>在页面中引入相同的脚本两次会伤害性能。可能超出你的预料，美国top10网站的2家有重复脚本引入。两个主要因素造成同一页面引入相同脚本：团队大小和脚本数量。当确实引入重复脚本，会发出不必要的http请求和浪费js执行时间。</p>
<p>发出不必要的http请求发生在IE而不是Firefox。在IE，如果外部脚本引入两次且没有缓存，它会发出2个请求。即使脚本被缓存，刷新时也会发出额外请求。</p>
<p>除了增加http请求，时间被浪费在执行脚本多次上。不管IE还是Firefox都会执行多次。</p>
<p>一种避免多次引入脚本的方法是在模板系统实现一个脚本管理模块。</p>
<h3 id="5-5-Minimize-DOM-Access"><a href="#5-5-Minimize-DOM-Access" class="headerlink" title="5.5 Minimize DOM Access"></a>5.5 Minimize DOM Access</h3><p>最小化DOM访问。</p>
<p>用JS访问DOM元素是缓慢的，所以为了响应更好的页面，你应该：</p>
<ul>
<li>缓存访问过的元素的引用</li>
<li>在DOM树外更新节点，然后添加到DOM树</li>
<li>避免用JS实现固定布局</li>
</ul>
<h3 id="5-6-Develop-Smart-Event-Handlers"><a href="#5-6-Develop-Smart-Event-Handlers" class="headerlink" title="5.6 Develop Smart Event Handlers"></a>5.6 Develop Smart Event Handlers</h3><p>开发聪明的事件处理</p>
<p>有时候页面看起来不那么响应（响应速度慢），是因为绑定到不同元素的大量事件处理函数执行太多次。这是为什么使用<em>事件委托</em>是一种好方法。</p>
<p>另外，你不必等到onload事件来开始处理DOM树，DOMContentLoaded更快。大多时候你需要的只是想访问的元素已在DOM树中，所以你不必等到所有图片被下载。</p>
<h2 id="6-Images"><a href="#6-Images" class="headerlink" title="6 Images"></a>6 Images</h2><h3 id="6-1-Optimize-Images"><a href="#6-1-Optimize-Images" class="headerlink" title="6.1 Optimize Images"></a>6.1 Optimize Images</h3><p>优化图片</p>
<p>在设计师建好图片后，在上传图片到服务器前你仍可以做些事：</p>
<ul>
<li>检查gif图片的调色板大小是否匹配图片颜色数。</li>
<li>可以把gif转成png看看有没有变小。除了动画，gif一般可以转成png8。</li>
<li>运行pngcrush或其它工具压缩png。</li>
<li>运行jpegtran或其它工具压缩jpeg。* </li>
</ul>
<h3 id="6-2-Optimize-CSS-Sprites"><a href="#6-2-Optimize-CSS-Sprites" class="headerlink" title="6.2 Optimize CSS Sprites"></a>6.2 Optimize CSS Sprites</h3><p>优化CSS雪碧图</p>
<ul>
<li>把图片横向合并而不是纵向，横向更小。</li>
<li>把颜色近似的图片合并到一张雪碧图，这样可以让颜色数更少，如果低于256就可以用png8.</li>
<li>“Be obile-friendly”并且合并时图片间的间距不要太大。这对图片大小影响不是太大，但客户端解压时需要的内存更少。100×100是10000个像素，1000×1000是1000000个像素。</li>
</ul>
<h3 id="6-3-Don’t-Scale-Images-in-HTML"><a href="#6-3-Don’t-Scale-Images-in-HTML" class="headerlink" title="6.3 Don’t Scale Images in HTML"></a>6.3 Don’t Scale Images in HTML</h3><p>不要在html中缩放图片</p>
<p>不要因为你可以设置图片的宽高就去用比你需要的大得多的图片。如果你需要<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;img width=&quot;100&quot; height=&quot;100&quot; src=&quot;mycat.jpg&quot; alt=&quot;My Cat&quot; /&gt;</span><br></pre></td></tr></table></figure></p>
<p>那么，就用100x100px的图片，而不是500x500px的。</p>
<h3 id="6-4-Make-favicon-ico-Small-and-Cacheable"><a href="#6-4-Make-favicon-ico-Small-and-Cacheable" class="headerlink" title="6.4 Make favicon.ico Small and Cacheable"></a>6.4 Make favicon.ico Small and Cacheable</h3><p>favicon.ico小且缓存</p>
<p>favicon.ico是在你服务器根路径的图片。邪恶的是即使你不关心它，浏览器仍然会请求它。所以最好不要响应404。另外由于在同一服务器，每次请求favicon.ico时也会带上cookie。这个图片还会影响下载顺序，比如在IE，如果你在onload时下载额外的组件，fcvicon会在这些组件之前被下载。</p>
<p>怎么减轻favicon.ico的缺点？</p>
<ul>
<li>小，最好1K以下</li>
<li>设置Expires头部。也许可以安全地设置为几个月。</li>
</ul>
<h2 id="7-Mobile"><a href="#7-Mobile" class="headerlink" title="7 Mobile"></a>7 Mobile</h2><h3 id="7-1-Keep-Components-under-25K"><a href="#7-1-Keep-Components-under-25K" class="headerlink" title="7.1 Keep Components under 25K"></a>7.1 Keep Components under 25K</h3><p>保持组件小于25K</p>
<p>这个限制与iPhone不缓存大于25K的组件相关。注意，这是非压缩（uncompressed）的文件大小。在这里minification（压缩，不要与compress混淆）很重要，因为gzip无法满足（iPhone）。</p>
<h3 id="7-2-Pack-Components-into-a-Multipart-Document"><a href="#7-2-Pack-Components-into-a-Multipart-Document" class="headerlink" title="7.2 Pack Components into a Multipart Document"></a>7.2 Pack Components into a Multipart Document</h3><p>打包组件到一个多部父文档</p>
<p>打包组件到一个多部父文档类似于带附件的邮件。它帮助你在一个http请求中获取多个组件，但注意，iPhone不支持。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端优化/">前端优化</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/前端技术/">前端技术</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/03/13/blog20170313/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-blog20170308" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/08/blog20170308/">Html5本地存储和本地数据库</a>
    </h1>
  

        <a href="/2017/03/08/blog20170308/" class="archive-article-date">
  	<time datetime="2017-03-08T02:23:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-03-08</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="一个网站如何能在客户的浏览器存储更多的数据呢？"><a href="#一个网站如何能在客户的浏览器存储更多的数据呢？" class="headerlink" title="一个网站如何能在客户的浏览器存储更多的数据呢？"></a>一个网站如何能在客户的浏览器存储更多的数据呢？</h2><p>在Html4的时代在浏览器端存储点网站个性化的数据，尤其是用户浏览器的痕迹，用户的相关数据等一般只能存储在Cookie中，但是大多是浏览器对于Cookie的限制也就逼迫网站存储数据尽量精简，想存储复杂的、关系型的用户数据就根本不可能了。但是进入Html5时代，这一切都不叫事…</p>
<h2 id="本地存储由来的背景"><a href="#本地存储由来的背景" class="headerlink" title="本地存储由来的背景"></a>本地存储由来的背景</h2><p> 众所周知Html4时代Cookie的大小、格式、存储数据格式等限制，网站应用如果想在浏览器端存储用户的部分信息，那么只能借助于Cookie。但是Cookie的这些限制，也就导致了Cookie只能存储一些ID之类的标识符等简单的数据，复杂的数据就更别扯了。</p>
<p> 下面是Cookie的限制：</p>
<ul>
<li>1, 大多数浏览器支持最大为 4096 字节的 Cookie。</li>
<li>2, 浏览器还限制站点可以在用户计算机上存储的 Cookie 的数量。大多数浏览器只允许每个站点存储 20 个 Cookie；如果试图存储更多 Cookie，则最旧的 Cookie 便会被丢弃。</li>
<li>3, 有些浏览器还会对它们将接受的来自所有站点的 Cookie 总数作出绝对限制，通常为 300 个。</li>
<li>4, Cookie默认情况都会随着Http请求发送到后台服务器，但并不是所有请求都需要Cookie的，比如：js、css、图片等请求则不需要cookie。</li>
</ul>
<p>Html5的设计者们，一开始就为Html5能成为富客户端做好了准备。为了破解Cookie的一系列限制，Html5通过JS的新的API就能直接存储大量的数据到客户端浏览器，而且支持复杂的本地数据库，让JS简直就是逆天了。Html5支持两种的WebStorage，一种是永久性的本地存储（localStorage），另外一种是会话级别的本地存储（sessionStorage）。</p>
<h2 id="会话级别的本地存储：sessionStorage"><a href="#会话级别的本地存储：sessionStorage" class="headerlink" title="会话级别的本地存储：sessionStorage"></a>会话级别的本地存储：sessionStorage</h2><p>在Html5中增加了一个Js对象：sessionStorage；通过此对象可以直接操作存储在浏览器中的会话级别的WebStorage。存储在sessionStorage中的数据首先是Key-Value形式的，另外就是它跟浏览器当前会话相关，当会话结束后，数据会自动清除，跟未设置过期时间的Cookie类似。</p>
<p>sessionStorage提供了四个方法来辅助我们进行对本地存储做相关操作。<br><em>（1）setItem(key,value)：添加本地存储数据。两个参数，非常简单就不说了。
</em>（2）getItem(key):通过key获取相应的Value。<br><em>（3）removeItem(key):通过key删除本地数据。
</em>（4）clear():清空数据。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">        //添加key-value 数据到 sessionStorage</span><br><span class="line">        sessionStorage.setItem(&quot;demokey&quot;, &quot;http://blog.itjeek.com&quot;);</span><br><span class="line">        //通过key来获取value</span><br><span class="line">        var dt = sessionStorage.getItem(&quot;demokey&quot;);</span><br><span class="line">        alert(dt);</span><br><span class="line">        //清空所有的key-value数据。</span><br><span class="line">        //sessionStorage.clear();</span><br><span class="line">        alert(sessionStorage.length);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>对于JS的学习和调试必须得有Chrome的调试工具辅助才能事半功倍。当然Chrome也是我最喜爱的Web开发辅助工具，非常简单F12快捷键就立即打开工具了，包括IE也是这个快捷键。通过下图就可以查看当前浏览器中的sessionStorage数据。</p>
<h2 id="永久本地存储：localStorage"><a href="#永久本地存储：localStorage" class="headerlink" title="永久本地存储：localStorage"></a>永久本地存储：localStorage</h2><p>在最新的JS的API中增加了localStorage对象，以便于用户存储永久存储的Web端的数据。而且数据不会随着Http请求发送到后台服务器，而且存储数据的大小机会不用考虑，因为在HTML5的标准中要求浏览器至少要支持到4MB.所以，这完全是颠覆了Cookie的限制，为Web应用在本地存储复杂的用户痕迹数据提供非常方便的技术支持。那接下里分别介绍一下localStorage的常用的方法，当然基本上跟sessionStorage是一致的。</p>
<p>localStorage提供了四个方法来辅助我们进行对本地存储做相关操作。</p>
<p><em>（1）setItem(key,value)：添加本地存储数据。两个参数，非常简单就不说了。
</em>（2）getItem(key):通过key获取相应的Value。<br><em>（3）removeItem(key):通过key删除本地数据。
</em>（4）clear():清空数据。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">    //添加key-value 数据到 sessionStorage</span><br><span class="line">    localStorage.setItem(&quot;demokey&quot;, &quot;http://blog.itjeek.com&quot;);</span><br><span class="line">    //通过key来获取value</span><br><span class="line">    var dt = localStorage.getItem(&quot;demokey&quot;);</span><br><span class="line">    alert(dt);</span><br><span class="line">    //清空所有的key-value数据。</span><br><span class="line">    //localStorage.clear();</span><br><span class="line">    alert(localStorage.length);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="逆天了本地数据库"><a href="#逆天了本地数据库" class="headerlink" title="逆天了本地数据库"></a>逆天了本地数据库</h2><p>虽然Html5已经提供了功能强大的localStorage和sessionStorage，但是他们两个都只能提供存储简单数据结构的数据，对于复杂的Web应用的数据却无能为力。逆天的是Html5提供了一个浏览器端的数据库支持，允许我们直接通JS的API在浏览器端创建一个本地的数据库，而且支持标准的SQL的CRUD操作，让离线的Web应用更加方便的存储结构化的数据。接下里介绍一下本地数据的相关API和用法。</p>
<p>操作本地数据库的最基本的步骤是：</p>
<p>第一步：openDatabase方法：创建一个访问数据库的对象。<br>第二步：使用第一步创建的数据库访问对象来执行transaction方法，通过此方法可以设置一个开启事务成功的事件响应方法，在事件响应方法中可以执行SQL.<br>第三步：通过executeSql方法执行查询，当然查询可以是：CRUD。<br>接下来分别介绍一下相关的方法的参数和用法。</p>
<p>（1）openDatabase方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//Demo：获取或者创建一个数据库，如果数据库不存在那么创建之</span><br><span class="line">var dataBase = openDatabase(&quot;student&quot;, &quot;1.0&quot;, &quot;学生表&quot;, 1024 * 1024, function () &#123; &#125;);</span><br></pre></td></tr></table></figure></p>
<p>openDatabase方法打开一个已经存在的数据库，如果数据库不存在，它还可以创建数据库。几个参数意义分别是：</p>
<ul>
<li>1，数据库名称。</li>
<li>2，数据库的版本号，目前来说传个1.0就可以了，当然可以不填；</li>
<li>3，对数据库的描述。</li>
<li>4，设置分配的数据库的大小（单位是kb）。</li>
<li>5，回调函数(可省略)。<br>初次调用时创建数据库，以后就是建立连接了。</li>
</ul>
<p>（2）db.transaction方法可以设置一个回调函数，此函数可以接受一个参数就是我们开启的事务的对象。然后通过此对象可以进行执行Sql脚本，跟下面的步骤可以结合起来。</p>
<p>（3）通过executeSql方法执行查询。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ts.executeSql(sqlQuery,[value1,value2..],dataHandler,errorHandler)</span><br></pre></td></tr></table></figure></p>
<p>参数说明：</p>
<ul>
<li>qlQuery：需要具体执行的sql语句，可以是create、select、update、delete；</li>
<li>value1,value2..]：sql语句中所有使用到的参数的数组，在executeSql方法中，将s&gt;语句中所要使用的参数先用“?”代替，然后依次将这些参数组成数组放在第二个参数中</li>
<li>ataHandler：执行成功是调用的回调函数，通过该函数可以获得查询结果集；</li>
<li>4,errorHandler：执行失败时调用的回调函数；<br>下面是一个综合的例子，可以看一下：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line"> &lt;script src=&quot;Scripts/jquery-1.5.1.js&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">        function initDatabase() &#123;</span><br><span class="line">            var db = getCurrentDb();//初始化数据库</span><br><span class="line">            if(!db) &#123;alert(&quot;您的浏览器不支持HTML5本地数据库&quot;);return;&#125;</span><br><span class="line">            db.transaction(function (trans) &#123;//启动一个事务，并设置回调函数</span><br><span class="line">                //执行创建表的Sql脚本</span><br><span class="line">                trans.executeSql(&quot;create table if not exists Demo(uName text null,title text null,words text null)&quot;, [], function (trans, result) &#123;</span><br><span class="line">                &#125;, function (trans, message) &#123;//消息的回调函数alert(message);&#125;);</span><br><span class="line">            &#125;, function (trans, result) &#123;</span><br><span class="line">            &#125;, function (trans, message) &#123;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        $(function () &#123;//页面加载完成后绑定页面按钮的点击事件</span><br><span class="line">            initDatabase();</span><br><span class="line">            $(&quot;#btnSave&quot;).click(function () &#123;</span><br><span class="line">                var txtName = $(&quot;#txtName&quot;).val();</span><br><span class="line">                var txtTitle = $(&quot;#txtTitle&quot;).val();</span><br><span class="line">                var txtWords = $(&quot;#txtWords&quot;).val();</span><br><span class="line">                var db = getCurrentDb();</span><br><span class="line">                //执行sql脚本，插入数据</span><br><span class="line">                db.transaction(function (trans) &#123;</span><br><span class="line">                    trans.executeSql(&quot;insert into Demo(uName,title,words) values(?,?,?) &quot;, [txtName, txtTitle, txtWords], function (ts, data) &#123;</span><br><span class="line">                    &#125;, function (ts, message) &#123;</span><br><span class="line">                        alert(message);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;);</span><br><span class="line">                showAllTheData();</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">        function getCurrentDb() &#123;</span><br><span class="line">            //打开数据库，或者直接连接数据库参数：数据库名称，版本，概述，大小</span><br><span class="line">            //如果数据库不存在那么创建之</span><br><span class="line">            var db = openDatabase(&quot;myDb&quot;, &quot;1.0&quot;, &quot;it&apos;s to save demo data!&quot;, 1024 * 1024); ;</span><br><span class="line">            return db;</span><br><span class="line">        &#125;</span><br><span class="line">        //显示所有数据库中的数据到页面上去</span><br><span class="line">        function showAllTheData() &#123;</span><br><span class="line">            $(&quot;#tblData&quot;).empty();</span><br><span class="line">            var db = getCurrentDb();</span><br><span class="line">            db.transaction(function (trans) &#123;</span><br><span class="line">                trans.executeSql(&quot;select * from Demo &quot;, [], function (ts, data) &#123;</span><br><span class="line">                    if (data) &#123;</span><br><span class="line">                        for (var i = 0; i &lt; data.rows.length; i++) &#123;</span><br><span class="line">                            appendDataToTable(data.rows.item(i));//获取某行数据的json对象</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;, function (ts, message) &#123;alert(message);var tst = message;&#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">        function appendDataToTable(data) &#123;//将数据展示到表格里面</span><br><span class="line">            //uName,title,words</span><br><span class="line">            var txtName = data.uName;</span><br><span class="line">            var txtTitle = data.title;</span><br><span class="line">            var words = data.words;</span><br><span class="line">            var strHtml = &quot;&quot;;</span><br><span class="line">            strHtml += &quot;&lt;tr&gt;&quot;;</span><br><span class="line">            strHtml += &quot;&lt;td&gt;&quot;+txtName+&quot;&lt;/td&gt;&quot;;</span><br><span class="line">            strHtml += &quot;&lt;td&gt;&quot; + txtTitle + &quot;&lt;/td&gt;&quot;;</span><br><span class="line">            strHtml += &quot;&lt;td&gt;&quot; + words + &quot;&lt;/td&gt;&quot;;</span><br><span class="line">            strHtml += &quot;&lt;/tr&gt;&quot;;</span><br><span class="line">            $(&quot;#tblData&quot;).append(strHtml);</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;table&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;用户名：&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;txtName&quot; id=&quot;txtName&quot; required/&gt;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">               &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;标题：&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;txtTitle&quot; id=&quot;txtTitle&quot; required/&gt;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;td&gt;留言：&lt;/td&gt;</span><br><span class="line">                &lt;td&gt;&lt;input type=&quot;text&quot; name=&quot;txtWords&quot; id=&quot;txtWords&quot; required/&gt;&lt;/td&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">        &lt;input type=&quot;button&quot; value=&quot;保存&quot; id=&quot;btnSave&quot;/&gt;</span><br><span class="line">        &lt;hr/&gt;</span><br><span class="line">        &lt;input type=&quot;button&quot; value=&quot;展示所哟数据&quot; onclick=&quot;showAllTheData();&quot;/&gt;</span><br><span class="line">        &lt;table id=&quot;tblData&quot;&gt;</span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></li>
</ul>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/WebStorage/">WebStorage</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/localStorage/">localStorage</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/前端技术/">前端技术</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/03/08/blog20170308/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-blog20170309" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/03/08/blog20170309/">Ajax页面缓存问题分析与解决办法</a>
    </h1>
  

        <a href="/2017/03/08/blog20170309/" class="archive-article-date">
  	<time datetime="2017-03-08T02:23:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-03-08</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Ajax页面缓存是ajax处理数据时对一些重复相同数据进行一个缓存操作，这样从另一个层面对于我们来讲是非常的不错了，但有时我们并不希望它缓存要如何处理呢？下面我们一起来看看关于页面缓存问题分析与解决，希望例子对各位会带来帮助。</p>
<h2 id="一、什么是Ajax缓存原理？"><a href="#一、什么是Ajax缓存原理？" class="headerlink" title="一、什么是Ajax缓存原理？"></a>一、什么是Ajax缓存原理？</h2><p>Ajax在发送的数据成功后，会把请求的URL和返回的响应结果保存在缓存内，当下一次调用Ajax发送相同的请求时，它会直接从缓存中把数据取出来，这是为了提高页面的响应速度和用户体验。当前这要求两次请求URL完全相同，包括参数。这个时候，浏览器就不会与服务器交互。</p>
<h2 id="二、Ajax缓存的好处"><a href="#二、Ajax缓存的好处" class="headerlink" title="二、Ajax缓存的好处"></a>二、Ajax缓存的好处</h2><p>这种设计使客户端对一些静态页面内容的请求，比如图片，css文件，js脚本等，变得更加快捷，提高了页面的响应速度，也节省了网络通信资源。</p>
<h2 id="三、Ajax缓存的不足"><a href="#三、Ajax缓存的不足" class="headerlink" title="三、Ajax缓存的不足"></a>三、Ajax缓存的不足</h2><p>Ajax缓存虽然有上述的好处，但是如果通过Ajax对一些后台数据进行更改的时候，虽然数据在后台已经发生改变，但是页面缓存中并没有改变，对于相同的URL，Ajax提交过去以后，浏览器还只是简单的从缓存中拿数据，这种情况当然就不行了。</p>
<h2 id="四、解决Ajax缓存问题的方法"><a href="#四、解决Ajax缓存问题的方法" class="headerlink" title="四、解决Ajax缓存问题的方法"></a>四、解决Ajax缓存问题的方法</h2><p>解决这个问题最有效的办法是禁止页面缓存，有以下几种处理方法：</p>
<p>1、在ajax发送请求前加上 xmlHttpRequest.setRequestHeader(“Cache-Control”,”no-cache”);</p>
<p>2、在服务端加 header(“Cache-Control: no-cache, must-revalidate”);</p>
<p>3、在ajax发送请求前加上 xmlHttpRequest.setRequestHeader(“If-Modified-Since”,”0″);</p>
<p>4、在 Ajax 的 URL 参数后加上 “?fresh=” + Math.random(); //当然这里参数 fresh 可以任意取了</p>
<p>5、第五种方法和第四种类似，在 URL 参数后加上 “?timestamp=” + new Date().getTime();</p>
<p>6、用POST替代GET：不推荐</p>
<p>7、jQuery提供一个防止ajax使用缓存的方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot; language=&quot;javascript&quot;&gt; </span><br><span class="line">     $.ajaxSetup (&#123; </span><br><span class="line">           cache: false //close AJAX cache </span><br><span class="line">      &#125;); </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<p>8、修改load 加载的url地址，如在url 多加个时间参数就可以：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">function loadEventInfoPage(eventId)&#123;</span><br><span class="line"></span><br><span class="line">    $.ajaxSetup (&#123; </span><br><span class="line">       cache: true // AJAX cache  下面加上时间后load的页面中的js、css图片等都会重新加载，   </span><br><span class="line"></span><br><span class="line">         //加上这句action会重新加载，但是js、css、图片等会走缓存 </span><br><span class="line">    &#125;); </span><br><span class="line">    $(&quot;#showEventInfo&quot;).load(ctx + &quot;/custEvents/viewEvent.action&quot;,  &#123;&quot;complaint.Id&quot;:eventId, &quot;tt&quot;:(new Date()).getTime()&#125;,function()&#123;&#125;) </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>9、设置html的缓存<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;META HTTP-EQUIV=&quot;Pragma&quot; CONTENT=&quot;no-cache&quot;&gt;    </span><br><span class="line">&lt;META HTTP-EQUIV=&quot;Cache-Control&quot; CONTENT=&quot;no-cache&quot;&gt;    </span><br><span class="line">&lt;META HTTP-EQUIV=&quot;Expires&quot; CONTENT=&quot;0&quot;&gt;</span><br></pre></td></tr></table></figure></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ajax-cache/">ajax cache</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/前端技术/">前端技术</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/03/08/blog20170309/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-blog20170228" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/28/blog20170228/">Sublime Text 3下Emmet使用技巧</a>
    </h1>
  

        <a href="/2017/02/28/blog20170228/" class="archive-article-date">
  	<time datetime="2017-02-28T02:23:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-02-28</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="快速编写HTML代码"><a href="#快速编写HTML代码" class="headerlink" title="快速编写HTML代码"></a>快速编写HTML代码</h1><h2 id="初始化文档"><a href="#初始化文档" class="headerlink" title="初始化文档"></a>初始化文档</h2><p>HTML文档需要包含一些固定的标签，比如&lt;html&gt;、&lt;head&gt;、&lt;body&gt;等，现在你只需要1秒钟就可以输入这些标签。比如输入“!”或“html:5”，然后按Tab键或ctrl+e：<br>html:5 或!：用于HTML5文档类型<br><img src="https://tawen.github.io/res/20170228html5.jpg" alt="Alt text"><br>html:xt：用于XHTML过渡文档类型<br><img src="https://tawen.github.io/res/20170228htmlxt.jpg" alt="Alt text"><br>html:4s：用于HTML4严格文档类型<br><img src="https://tawen.github.io/res/20170228html4s.jpg" alt="Alt text"></p>
<h2 id="轻松添加类、id、文本和属性"><a href="#轻松添加类、id、文本和属性" class="headerlink" title="轻松添加类、id、文本和属性"></a>轻松添加类、id、文本和属性</h2><ul>
<li>连续输入元素名称和ID，Emmet会自动为你补全，比如输入p#foo：</li>
<li>连续输入类和id，比如p.bar#foo，会自动生成：</li>
<li>下面来看看如何定义HTML元素的内容和属性。你可以通过输入h1{foo}和a[href=#]，就可以自动生成如下代码：<br><img src="https://tawen.github.io/res/20170228htmldemo1.jpg" alt="Alt text"></li>
</ul>
<h2 id="嵌套"><a href="#嵌套" class="headerlink" title="嵌套"></a>嵌套</h2><p>现在你只需要1行代码就可以实现标签的嵌套<br>&gt;：子元素符号，表示嵌套的元素<br>+：同级标签符号<br>^：可以使该符号前的标签提升一行<br><img src="https://tawen.github.io/res/20170228htmldemo2.jpg" alt="Alt text"></p>
<h2 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h2><p>可以通过嵌套和括号来快速生成一些代码块，比如输入(.foo&gt;h1)+(.bar&gt;h2)，ctrl+e会自动生成：<br><img src="https://tawen.github.io/res/20170228htmldemo3.jpg" alt="Alt text"></p>
<h2 id="隐式标签"><a href="#隐式标签" class="headerlink" title="隐式标签"></a>隐式标签</h2><p>声明一个带类的标签，只需输入div.item，就会生成<code>&lt;div class=&quot;item&quot;&gt;&lt;/div&gt;</code>。在过去版本中，可以省略掉div，即输入.item即可生成 <code>&lt;div class=&quot;item&quot;&gt;&lt;/div&gt;</code>  。现在如果只输入.item，则Emmet会根据父标签进行判定。比如在  <code>&lt;ul&gt;</code> 中输入.item，就会生成  <code>&lt;li class=&quot;item&quot;&gt;&lt;/li&gt;</code>  。下面是所有的隐式标签名称：</p>
<ul>
<li>li：用于ul和ol中</li>
<li>tr：用于table、tbody、thead和tfoot中</li>
<li>td：用于tr中</li>
<li>option：用于select和optgroup中*<br><img src="https://tawen.github.io/res/20170228htmldemo4.jpg" alt="Alt text"></li>
</ul>
<h2 id="定义多个元素"><a href="#定义多个元素" class="headerlink" title="定义多个元素"></a>定义多个元素</h2><p>要定义多个元素，可以使用<em>符号。比如，ul&gt;li</em>3可以生成如下代码：<br><img src="https://tawen.github.io/res/20170228htmldemo5.jpg" alt="Alt text"></p>
<h2 id="定义多个带属性的元素"><a href="#定义多个带属性的元素" class="headerlink" title="定义多个带属性的元素"></a>定义多个带属性的元素</h2><p>如输入 ul&gt;li.item$<em>3，将会生成如下代码<br>Emmet中如果需要指定反向编号，可以使用”$@-“符号<br>如果要从指定的数字开始编号，可以使用ul&gt;li.item$@3</em>5<br><img src="https://tawen.github.io/res/20170228htmldemo6.jpg" alt="Alt text"></p>
<h1 id="CSS缩写"><a href="#CSS缩写" class="headerlink" title="CSS缩写"></a>CSS缩写</h1><h2 id="值"><a href="#值" class="headerlink" title="值"></a>值</h2><p>1、比如要定义元素的宽度，只需输入w100，即可生成<br>2、除了px，也可以生成其他单位，比如输入h10p+m5e<br>单位别名列表：<br>p 表示%<br>e 表示 em<br>x 表示 ex</p>
<p><img src="https://tawen.github.io/res/20170228cssdemo1.jpg" alt="Alt text"></p>
<h2 id="附加属性"><a href="#附加属性" class="headerlink" title="附加属性"></a>附加属性</h2><p>1、缩写，比如 @f，可以生成：<br>一些其他的属性，比如background-image、border-radius、font、@font-face,text-outline、text-shadow等额外的选项，可以通过“+”符号来生成；<br>2、输入@f+，将生成：<br><img src="https://tawen.github.io/res/20170228cssdemo2.jpg" alt="Alt text"></p>
<h2 id="模糊匹配"><a href="#模糊匹配" class="headerlink" title="模糊匹配"></a>模糊匹配</h2><p>如果有些缩写你拿不准，Emmet会根据你的输入内容匹配最接近的语法，比如输入ov:h、ov-h、ovh和oh，生成的代码是相同的：<br><img src="https://tawen.github.io/res/20170228cssdemo3.jpg" alt="Alt text"></p>
<h2 id="供应商前缀"><a href="#供应商前缀" class="headerlink" title="供应商前缀"></a>供应商前缀</h2><p>1、如果输入非W3C标准的CSS属性，Emmet会自动加上供应商前缀，比如输入trs，则会生成：<br>2、可以在任意属性前加上“-”符号，也可以为该属性加上前缀。比如输入-super-foo：<br>3、如果不希望加上所有前缀，可以使用缩写来指定，比如-wm-trf表示只加上-webkit和-moz前缀：<br>前缀缩写如下：<br>w 表示 -webkit-<br>m 表示 -moz-<br>s 表示 -ms-<br>o 表示 -o-<br><img src="https://tawen.github.io/res/20170228cssdemo4.jpg" alt="Alt text"></p>
<h2 id="渐变输入lg-left-fff-50-000-，会生成如下代码："><a href="#渐变输入lg-left-fff-50-000-，会生成如下代码：" class="headerlink" title="渐变输入lg(left, #fff 50%, #000)，会生成如下代码："></a>渐变输入lg(left, #fff 50%, #000)，会生成如下代码：</h2><p><img src="https://tawen.github.io/res/20170228cssdemo5.jpg" alt="Alt text"></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Emmet/">Emmet</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sublime/">sublime</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/前端技术/">前端技术</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/02/28/blog20170228/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-blog20170222" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/22/blog20170222/">你所不知道的setTimeout</a>
    </h1>
  

        <a href="/2017/02/22/blog20170222/" class="archive-article-date">
  	<time datetime="2017-02-22T09:23:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-02-22</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="setTimeout-基础"><a href="#setTimeout-基础" class="headerlink" title="setTimeout()基础"></a>setTimeout()基础</h2><p>setTimeout函数用来指定某个函数或某段代码，在多少毫秒之后执行。它返回一个整数，表示定时器的编号，以后可以用来取消这个定时器。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var timerId = setTimeout(func|code, delay)</span><br></pre></td></tr></table></figure></p>
<p>上面代码中，setTimeout函数接受两个参数，第一个参数func|code是将要推迟执行的函数名或者一段代码，第二个参数delay是推迟执行的毫秒数。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">console.log(1);</span><br><span class="line">setTimeout(&apos;console.log(2)&apos;,1000);</span><br><span class="line">console.log(3);</span><br></pre></td></tr></table></figure></p>
<p>上面代码的输出结果就是1，3，2，因为setTimeout指定第二行语句推迟1000毫秒再执行(如果这在Sublime下运用插件以nodejs环境来执行，许解释器不同，会报错)。</p>
<p>要注意的是，推迟执行的代码必须以字符串的形式，放入setTimeout，因为引擎内部使用eval函数，将字符串转为代码。如果推迟执行的是函数，则可以直接将函数名，放入setTimeout。一方面eval函数有安全顾虑，另一方面为了便于JavaScript引擎优化代码，setTimeout方法一般总是采用函数名的形式，就像下面这样。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">function func()&#123;</span><br><span class="line">  console.log(2);</span><br><span class="line">&#125;</span><br><span class="line">setTimeout(func,1000);</span><br><span class="line">// 或者</span><br><span class="line">setTimeout(function ()&#123;console.log(2)&#125;,1000);</span><br></pre></td></tr></table></figure></p>
<h3 id="setTimeout传参数"><a href="#setTimeout传参数" class="headerlink" title="setTimeout传参数"></a>setTimeout传参数</h3><p>除了前两个参数，setTimeout还允许添加更多的参数。它们将被传入推迟执行的函数（回调函数）。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(function(a,b)&#123;</span><br><span class="line">  console.log(a+b);</span><br><span class="line">&#125;,1000,1,1);</span><br></pre></td></tr></table></figure></p>
<p>IE 9.0及以下版本，只允许setTimeout有两个参数，不支持更多的参数;可以在匿名函数中，让回调函数带参数运行，再把匿名函数输入setTimeout；例如:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(function() &#123;</span><br><span class="line">  myFunc(&quot;one&quot;, &quot;two&quot;, &quot;three&quot;);</span><br><span class="line">&#125;, 1000);</span><br></pre></td></tr></table></figure></p>
<p>当然也可以使用bind或apply方法来解决。<br>例如使用bind方法，把多余的参数绑定在回调函数上面，生成一个新的函数输入setTimeout。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">setTimeout( function(arg1)&#123;&#125;.bind(undefined, 10), 1000 );</span><br></pre></td></tr></table></figure></p>
<p>上面代码中，bind方法第一个参数是undefined，表示将原函数的this绑定全局作用域，第二个参数是要传入原函数的参数。它运行后会返回一个新函数，该函数不带参数。</p>
<h3 id="setTimeout注意点"><a href="#setTimeout注意点" class="headerlink" title="setTimeout注意点"></a>setTimeout注意点</h3><p><strong> setTimeout()中回调函数中的this </strong><br>如果被setTimeout推迟执行的回调函数是某个对象的方法，那么该方法中的this关键字将指向全局环境，而不是定义时所在的那个对象。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var x = 1;</span><br><span class="line">var o = &#123;</span><br><span class="line">  x: 2,</span><br><span class="line">  y: function()&#123;</span><br><span class="line">    console.log(this.x);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">setTimeout(o.y,1000);// 1</span><br></pre></td></tr></table></figure></p>
<p>上面代码输出的是1，而不是2，这表示o.y的this所指向的已经不是o，而是全局环境了。<br>再看一个不容易发现错误的例子。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">function User(login) &#123;</span><br><span class="line">  this.login = login;</span><br><span class="line">  this.sayHi = function() &#123;</span><br><span class="line">    console.log(this.login);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var user = new User(&apos;John&apos;);</span><br><span class="line">setTimeout(user.sayHi, 1000);</span><br></pre></td></tr></table></figure></p>
<p>上面代码只会显示undefined，因为等到user.sayHi执行时，它是在全局对象中执行，所以this.login取不到值。<br>为了防止出现这个问题，一种解决方法是将user.sayHi放在匿名函数中执行。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(function() &#123;</span><br><span class="line">  user.sayHi();</span><br><span class="line">&#125;, 1000);</span><br></pre></td></tr></table></figure></p>
<p>上面代码中，sayHi是在user作用域内执行，而不是在全局作用域内执行，所以能够显示正确的值。<br>另一种解决方法是，使用bind方法，将绑定sayHi绑定在user上面。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">setTimeout(user.sayHi.bind(user), 1000);</span><br></pre></td></tr></table></figure></p>
<p>HTML 5标准规定，setTimeout的最短时间间隔是4毫秒。为了节电，对于那些不处于当前窗口的页面，浏览器会将时间间隔扩大到1000毫秒。另外，如果笔记本电脑处于电池供电状态，Chrome和IE 9以上的版本，会将时间间隔切换到系统定时器，大约是15.6毫秒。</p>
<p><strong> setTimeout执行回调间隔时间长度 </strong><br>如果你在一段代码中发现下面内容:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var startTime = new Date();</span><br><span class="line">setTimeout(function () &#123;</span><br><span class="line">    console.log(new Date() - startTime);</span><br><span class="line">&#125;, 100)</span><br></pre></td></tr></table></figure></p>
<p>请问最后打印的是多少?其正确答案是，取决于后面同步执行的js需要占用多少时间。<br>即为：MAX(同步执行的时间, 100)；缘何如此，就得看下setTimeout运行机制了。</p>
<h2 id="setTimeout运行"><a href="#setTimeout运行" class="headerlink" title="setTimeout运行"></a>setTimeout运行</h2><p>setTimeout和setInterval的运行机制是，将指定的代码移出本次执行，等到下一轮Event Loop时，再检查是否到了指定时间。如果到了，就执行对应的代码；如果不到，就等到再下一轮Event Loop时重新判断。这意味着，setTimeout指定的代码，必须等到本次执行的所有代码都执行完，才会执行。</p>
<p>每一轮Event Loop时，都会将“任务队列”中需要执行的任务，一次执行完。setTimeout和setInterval都是把任务添加到“任务队列”的尾部。因此，它们实际上要等到当前脚本的所有同步任务执行完，然后再等到本次Event Loop的“任务队列”的所有任务执行完，才会开始执行。由于前面的任务到底需要多少时间执行完，是不确定的，所以没有办法保证，setTimeout和setInterval指定的任务，一定会按照预定时间执行。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(someTask,100);</span><br><span class="line">veryLongTask();</span><br></pre></td></tr></table></figure></p>
<p>上面代码的setTimeout，指定100毫秒以后运行一个任务。但是，如果后面立即运行的任务（当前脚本的同步任务））非常耗时，过了100毫秒还无法结束，那么被推迟运行的someTask就只有等着，等到前面的veryLongTask运行结束，才轮到它执行。</p>
<h2 id="setTimeout-func-0"><a href="#setTimeout-func-0" class="headerlink" title="setTimeout(func,0)"></a>setTimeout(func,0)</h2><p>在使用backbone框架写代码的时候，因为些需求因素，新手总会在render时操纵下dom，却发现改变dom元素状态，代码没有问题，界面却没有变更。而使用setTimeout(func,time)却能解决这个问题，即便time=0;探究一番，真相只有一个：<br><strong> setTimeout(func,0)含义 </strong><br>运行下面代，func1和func2谁会先执行？很明显func2先执行；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(function () &#123;</span><br><span class="line">    func1();</span><br><span class="line">&#125;, 0)</span><br><span class="line">func2();</span><br></pre></td></tr></table></figure></p>
<p>setTimeout的作用是将代码推迟到指定时间执行，如果指定时间为0，即setTimeout(f,0)，那么会立刻执行吗？</p>
<p>答案是不会。因为setTimeout运行机制说过，必须要等到当前脚本的同步任务和“任务队列”中已有的事件，全部处理完以后，才会执行setTimeout指定的任务。也就是说，setTimeout的真正作用是，在“任务队列”的现有事件的后面再添加一个事件，规定在指定时间执行某段代码。setTimeout添加的事件，会在下一次Event Loop执行。</p>
<p>setTimeout(f,0)将第二个参数设为0，作用是让f在现有的任务（脚本的同步任务和“任务队列”中已有的事件）一结束就立刻执行。也就是说，setTimeout(f,0)的作用是，尽可能早地执行指定的任务。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(function ()&#123;</span><br><span class="line">  console.log(&quot;你好！&quot;);</span><br><span class="line">&#125;, 0);</span><br></pre></td></tr></table></figure></p>
<p>上面代码的含义是，尽可能早地显示“你好！”。</p>
<p>setTimeout(f,0)指定的任务，最早也要到下一次Event Loop才会执行。请看下面的例子。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">setTimeout(function() &#123;</span><br><span class="line">  console.log(&quot;Timeout&quot;);</span><br><span class="line">&#125;, 0);</span><br><span class="line">function a(x) &#123;</span><br><span class="line">  console.log(&quot;a() 开始运行&quot;);</span><br><span class="line">  b(x);</span><br><span class="line">  console.log(&quot;a() 结束运行&quot;);</span><br><span class="line">&#125;</span><br><span class="line">function b(y) &#123;</span><br><span class="line">  console.log(&quot;b() 开始运行&quot;);</span><br><span class="line">  console.log(&quot;传入的值为&quot; + y);</span><br><span class="line">  console.log(&quot;b() 结束运行&quot;);</span><br><span class="line">&#125;</span><br><span class="line">console.log(&quot;当前任务开始&quot;);</span><br><span class="line">a(42);</span><br><span class="line">console.log(&quot;当前任务结束&quot;);</span><br><span class="line">// 当前任务开始</span><br><span class="line">// a() 开始运行</span><br><span class="line">// b() 开始运行</span><br><span class="line">// 传入的值为42</span><br><span class="line">// b() 结束运行</span><br><span class="line">// a() 结束运行</span><br><span class="line">// 当前任务结束</span><br><span class="line">// Timeout</span><br></pre></td></tr></table></figure></p>
<p>上面代码说明，setTimeout(f,0)必须要等到当前脚本的所有同步任务结束后才会执行。<br>0毫秒实际上达不到的。根据HTML5标准，setTimeOut推迟执行的时间，最少是4毫秒。如果小于这个值，会被自动增加到4。这是为了防止多个setTimeout(f,0)语句连续执行，造成性能问题。<br>另一方面，浏览器内部使用32位带符号的整数，来储存推迟执行的时间。这意味着setTimeout最多只能推迟执行2147483647毫秒（24.8天），超过这个时间会发生溢出，导致回调函数将在当前任务队列结束后立即执行，即等同于setTimeout(f,0)的效果。</p>
<h2 id="setTimeout-f-0-应用"><a href="#setTimeout-f-0-应用" class="headerlink" title="setTimeout(f,0)应用"></a>setTimeout(f,0)应用</h2><h2 id="调整事件的发生顺序"><a href="#调整事件的发生顺序" class="headerlink" title="调整事件的发生顺序"></a>调整事件的发生顺序</h2><p>setTimeout(f,0)有几个非常重要的用途。它的一大应用是，可以调整事件的发生顺序。比如，网页开发中，某个事件先发生在子元素，然后冒泡到父元素，即子元素的事件回调函数，会早于父元素的事件回调函数触发。如果，我们先让父元素的事件回调函数先发生，就要用到setTimeout(f, 0)。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">var input = document.getElementsByTagName(&apos;input[type=button]&apos;)[0];</span><br><span class="line">input.onclick = function A() &#123;</span><br><span class="line">  setTimeout(function B() &#123;</span><br><span class="line">    input.value +=&apos; input&apos;;</span><br><span class="line">  &#125;, 0)</span><br><span class="line">&#125;;</span><br><span class="line">document.body.onclick = function C() &#123;</span><br><span class="line">  input.value += &apos; body&apos;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
<p>上面代码在点击按钮后，先触发回调函数A，然后触发函数C。在函数A中，setTimeout将函数B推迟到下一轮Loop执行，这样就起到了，先触发父元素的回调函数C的目的了。<br>用户自定义的回调函数，通常在浏览器的默认动作之前触发。比如，用户在输入框输入文本，keypress事件会在浏览器接收文本之前触发。因此，下面的回调函数是达不到目的的。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">document.getElementById(&apos;input-box&apos;).onkeypress = function(event) &#123;</span><br><span class="line">  this.value = this.value.toUpperCase();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面代码想在用户输入文本后，立即将字符转为大写。但是实际上，它只能将上一个字符转为大写，因为浏览器此时还没接收到文本，所以this.value取不到最新输入的那个字符。只有用setTimeout改写，上面的代码才能发挥作用。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">document.getElementById(&apos;my-ok&apos;).onkeypress = function() &#123;</span><br><span class="line">  var self = this;</span><br><span class="line">  setTimeout(function() &#123;</span><br><span class="line">    self.value = self.value.toUpperCase();</span><br><span class="line">  &#125;, 0);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>上面代码将代码放入setTimeout之中，就能使得它在浏览器接收到文本之后触发;原来如此：这也就解释了缘何在使用backbone调用render之时，操纵dom是无效的了，因为当时连dom元素都还没获取到(为何没报错？这牵扯到另一个话题),自然等页面渲染完毕了也没见想要的结果了。</p>
<h3 id="分割耗时任何"><a href="#分割耗时任何" class="headerlink" title="分割耗时任何"></a>分割耗时任何</h3><p>众所周知javascript是单线程的，特点就是容易出现阻塞。如果一段程序处理时间很长，很容易导致整个页面hold住。什么交互都处理不了怎么办？</p>
<blockquote>
<p>简化复杂度？复杂逻辑后端处理？html5的多线程？……</p>
</blockquote>
<p>上面都是ok的做法，但是setTimeout也是处理这种问题的一把好手。setTimeout一个很关键的用法就是分片，如果一段程序过大，我们可以拆分成若干细小的块。由于setTimeout(f,0)实际上意味着，将任务放到浏览器最早可得的空闲时段执行，所以那些计算量大、耗时长的任务，常常会被放到几个小部分，分别放到setTimeout(f,0)里面执行(分片塞入队列)，这样即使在复杂程序没有处理完时，我们操作页面，也是能得到即时响应的。其实就是将交互插入到了复杂程序中执行。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">var div = document.getElementsByTagName(&apos;div&apos;)[0];</span><br><span class="line">// 写法一</span><br><span class="line">for(var i=0xA00000;i&lt;0xFFFFFF;i++) &#123;</span><br><span class="line">  div.style.backgroundColor = &apos;#&apos;+i.toString(16);</span><br><span class="line">&#125;</span><br><span class="line">// 写法二</span><br><span class="line">var timer;</span><br><span class="line">var i=0x100000;</span><br><span class="line">function func() &#123;</span><br><span class="line">  timer = setTimeout(func, 0);</span><br><span class="line">  div.style.backgroundColor = &apos;#&apos;+i.toString(16);</span><br><span class="line">  if (i++ == 0xFFFFFF) clearInterval(timer);</span><br><span class="line">&#125;</span><br><span class="line">timer = setTimeout(func, 0);</span><br></pre></td></tr></table></figure></p>
<p>上面代码有两种写法，都是改变一个网页元素的背景色。写法一会造成浏览器“堵塞”，而写法二就能就不会，这就是setTimeout(f,0)的好处。即：可利用setTimeout实现一种伪多线程的概念。<br>另一个使用这种技巧的例子是，代码高亮的处理。如果代码块很大，就会分成一个个小块，写成诸如setTimeout(highlightNext, 50)的样子，进行分块处理。</p>
<h2 id="clearTimeout"><a href="#clearTimeout" class="headerlink" title="clearTimeout()"></a>clearTimeout()</h2><p>setTimeout和setInterval函数，都返回一个表示计数器编号的整数值，将该整数传入clearTimeout和clearInterval函数，就可以取消对应的定时器。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var id1 = setTimeout(f,1000);</span><br><span class="line">var id2 = setInterval(f,1000);</span><br><span class="line">clearTimeout(id1);</span><br><span class="line">clearInterval(id2);</span><br></pre></td></tr></table></figure></p>
<p>setTimeout和setInterval返回的整数值是连续的(一定环境下，比如浏览器控制台，或者js执行环境等)，也就是说，第二个setTimeout方法返回的整数值，将比第一个的整数值大1。利用这一点，可以写一个函数，取消当前所有的setTimeout。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">(function() &#123;</span><br><span class="line">  var gid = setInterval(clearAllTimeouts, 0);</span><br><span class="line">  function clearAllTimeouts() &#123;</span><br><span class="line">    var id = setTimeout(function() &#123;&#125;, 0);</span><br><span class="line">    while (id &gt; 0) &#123;</span><br><span class="line">      if (id !== gid) &#123;</span><br><span class="line">        clearTimeout(id);</span><br><span class="line">      &#125;</span><br><span class="line">      id--;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)();</span><br></pre></td></tr></table></figure></p>
<p>运行上面代码后，实际上再设置任何setTimeout都无效了。<br>下面是一个clearTimeout实际应用的例子。有些网站会实时将用户在文本框的输入，通过Ajax方法传回服务器，jQuery的写法如下。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(&apos;textarea&apos;).on(&apos;keydown&apos;, ajaxAction);</span><br></pre></td></tr></table></figure></p>
<p>这样写有一个很大的缺点，就是如果用户连续击键，就会连续触发keydown事件，造成大量的Ajax通信。这是不必要的，而且很可能会发生性能问题。正确的做法应该是，设置一个门槛值，表示两次Ajax通信的最小间隔时间。如果在设定的时间内，发生新的keydown事件，则不触发Ajax通信，并且重新开始计时。如果过了指定时间，没有发生新的keydown事件，将进行Ajax通信将数据发送出去。</p>
<p>这种做法叫做debounce（防抖动）方法，用来返回一个新函数。只有当两次触发之间的时间间隔大于事先设定的值，这个新函数才会运行实际的任务。假定两次Ajax通信的间隔不小于2500毫秒，上面的代码可以改写成下面这样。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">  </span><br><span class="line">$(&apos;textarea&apos;).on(&apos;keydown&apos;, debounce(ajaxAction, 2500))</span><br></pre></td></tr></table></figure></p>
<p>利用setTimeout和clearTimeout，可以实现debounce方法。该方法用于防止某个函数在短时间内被密集调用，具体来说，debounce方法返回一个新版的该函数，这个新版函数调用后，只有在指定时间内没有新的调用，才会执行，否则就重新计时。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function debounce(fn, delay)&#123;</span><br><span class="line">  var timer = null; // 声明计时器</span><br><span class="line">  return function()&#123;</span><br><span class="line">    var context = this;</span><br><span class="line">    var args = arguments;</span><br><span class="line">    clearTimeout(timer);</span><br><span class="line">    timer = setTimeout(function()&#123;</span><br><span class="line">      fn.apply(context, args);</span><br><span class="line">    &#125;, delay);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line">// 用法示例</span><br><span class="line">var todoChanges = debounce(batchLog, 1000);</span><br><span class="line">Object.observe(models.todo, todoChanges);</span><br></pre></td></tr></table></figure></p>
<p>现实中，最好不要设置太多个setTimeout和setInterval，它们耗费CPU。比较理想的做法是，将要推迟执行的代码都放在一个函数里，然后只对这个函数使用setTimeout或setInterval。</p>
<h2 id="如何使用setTimeout"><a href="#如何使用setTimeout" class="headerlink" title="如何使用setTimeout"></a>如何使用setTimeout</h2><p>对setTimeout自然不止于这些，但已足见其强大。那么问题来了，需要在项目中大量使用么？视个人和项目而定吧；如不能熟练掌握，不建议多用。毕竟在某些情景之下，setTimeout作为一个hack的方式而存在的（打乱模块的生命周期，并且在问题出现时很难调试，你懂的），譬如：当一个实例还没有初始化的前，我们就使用这个实例，错误的解决办法是使用实例时加个setTimeout，确保实例使用前已初始化。<br>但只要足够熟悉它，以及使用的场景(包括模块生命周期)，使用它也就无可厚非了。比如underscore中不少方法也是基于这setTimeout方法写的；比如非常强大的<em>.defer： 延迟调用function直到当前调用栈清空为止，类似使用延时为0的setTimeout方法。对于执行开销大的计算和无阻塞UI线程的HTML渲染时候非常有用。 如果传递arguments参数，当函数function执行时， arguments 会作为参数传入。<br>也比如前文提到的防抖动方法debounce</em>.debounce(function, wait, [immediate]) ;在underscore中其实现方法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">_.debounce = function(func, wait, immediate) &#123;</span><br><span class="line">  var timeout, args, context, timestamp, result;</span><br><span class="line">  var later = function() &#123;</span><br><span class="line">    var last = _.now() - timestamp;</span><br><span class="line">    if (last &lt; wait &amp;&amp; last &gt;= 0) &#123;</span><br><span class="line">      timeout = setTimeout(later, wait - last);</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">      timeout = null;</span><br><span class="line">      if (!immediate) &#123;</span><br><span class="line">        result = func.apply(context, args);</span><br><span class="line">        if (!timeout) context = args = null;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;;</span><br><span class="line">  return function() &#123;</span><br><span class="line">    context = this;</span><br><span class="line">    args = arguments;</span><br><span class="line">    timestamp = _.now();</span><br><span class="line">    var callNow = immediate &amp;&amp; !timeout;</span><br><span class="line">    if (!timeout) timeout = setTimeout(later, wait);</span><br><span class="line">    if (callNow) &#123;</span><br><span class="line">      result = func.apply(context, args);</span><br><span class="line">      context = args = null;</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/setTimeout/">setTimeout</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/前端技术/">前端技术</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/02/22/blog20170222/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-blog20170221" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/21/blog20170221/">jQuery Validate验证框架详解</a>
    </h1>
  

        <a href="/2017/02/21/blog20170221/" class="archive-article-date">
  	<time datetime="2017-02-21T09:23:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-02-21</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="导入js库"><a href="#导入js库" class="headerlink" title="导入js库"></a>导入js库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;/validate/jquery-1.6.2.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;/validate/jquery.validate.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<h2 id="默认校验规则"><a href="#默认校验规则" class="headerlink" title="默认校验规则"></a>默认校验规则</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">required:true               必输字段</span><br><span class="line">remote:&quot;remote-valid.jsp&quot;   使用ajax方法调用remote-valid.jsp验证输入值</span><br><span class="line">email:true                  必须输入正确格式的电子邮件</span><br><span class="line">url:true                    必须输入正确格式的网址</span><br><span class="line">date:true                   必须输入正确格式的日期，日期校验ie6出错，慎用</span><br><span class="line">dateISO:true                必须输入正确格式的日期(ISO)，例如：2009-06-23，1998/01/22 只验证格式，不验证有效性</span><br><span class="line">number:true                 必须输入合法的数字(负数，小数)</span><br><span class="line">digits:true                 必须输入整数</span><br><span class="line">creditcard:true             必须输入合法的信用卡号</span><br><span class="line">equalTo:&quot;#password&quot;         输入值必须和#password相同</span><br><span class="line">accept:                     输入拥有合法后缀名的字符串（上传文件的后缀）</span><br><span class="line">maxlength:5                 输入长度最多是5的字符串(汉字算一个字符)</span><br><span class="line">minlength:10                输入长度最小是10的字符串(汉字算一个字符)</span><br><span class="line">rangelength:[5,10]          输入长度必须介于 5 和 10 之间的字符串&quot;)(汉字算一个字符)</span><br><span class="line">range:[5,10]                输入值必须介于 5 和 10 之间</span><br><span class="line">max:5                       输入值不能大于5</span><br><span class="line">min:10                      输入值不能小于10</span><br></pre></td></tr></table></figure>
<h2 id="默认的提示"><a href="#默认的提示" class="headerlink" title="默认的提示"></a>默认的提示</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">messages: &#123;</span><br><span class="line">required: &quot;This field is required.&quot;,</span><br><span class="line">remote: &quot;Please fix this field.&quot;,</span><br><span class="line">email: &quot;Please enter a valid email address.&quot;,</span><br><span class="line">url: &quot;Please enter a valid URL.&quot;,</span><br><span class="line">date: &quot;Please enter a valid date.&quot;,</span><br><span class="line">dateISO: &quot;Please enter a valid date (ISO).&quot;,</span><br><span class="line">dateDE: &quot;Bitte geben Sie ein g眉ltiges Datum ein.&quot;,</span><br><span class="line">number: &quot;Please enter a valid number.&quot;,</span><br><span class="line">numberDE: &quot;Bitte geben Sie eine Nummer ein.&quot;,</span><br><span class="line">digits: &quot;Please enter only digits&quot;,</span><br><span class="line">creditcard: &quot;Please enter a valid credit card number.&quot;,</span><br><span class="line">equalTo: &quot;Please enter the same value again.&quot;,</span><br><span class="line">accept: &quot;Please enter a value with a valid extension.&quot;,</span><br><span class="line">maxlength: $.validator.format(&quot;Please enter no more than &#123;0&#125; characters.&quot;),</span><br><span class="line">minlength: $.validator.format(&quot;Please enter at least &#123;0&#125; characters.&quot;),</span><br><span class="line">rangelength: $.validator.format(&quot;Please enter a value between &#123;0&#125; and &#123;1&#125; characters long.&quot;),</span><br><span class="line">range: $.validator.format(&quot;Please enter a value between &#123;0&#125; and &#123;1&#125;.&quot;),</span><br><span class="line">max: $.validator.format(&quot;Please enter a value less than or equal to &#123;0&#125;.&quot;),</span><br><span class="line">min: $.validator.format(&quot;Please enter a value greater than or equal to &#123;0&#125;.&quot;)</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>
<p>如需要修改，可在js代码中加入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$.extend($.validator.messages, &#123;</span><br><span class="line">    required: &quot;必选字段&quot;,</span><br><span class="line">    remote: &quot;请修正该字段&quot;,</span><br><span class="line">    email: &quot;请输入正确格式的电子邮件&quot;,</span><br><span class="line">    url: &quot;请输入合法的网址&quot;,</span><br><span class="line">    date: &quot;请输入合法的日期&quot;,</span><br><span class="line">    dateISO: &quot;请输入合法的日期 (ISO).&quot;,</span><br><span class="line">    number: &quot;请输入合法的数字&quot;,</span><br><span class="line">    digits: &quot;只能输入整数&quot;,</span><br><span class="line">    creditcard: &quot;请输入合法的信用卡号&quot;,</span><br><span class="line">    equalTo: &quot;请再次输入相同的值&quot;,</span><br><span class="line">    accept: &quot;请输入拥有合法后缀名的字符串&quot;,</span><br><span class="line">    maxlength: $.validator.format(&quot;请输入一个长度最多是 &#123;0&#125; 的字符串&quot;),</span><br><span class="line">    minlength: $.validator.format(&quot;请输入一个长度最少是 &#123;0&#125; 的字符串&quot;),</span><br><span class="line">    rangelength: $.validator.format(&quot;请输入一个长度介于 &#123;0&#125; 和 &#123;1&#125; 之间的字符串&quot;),</span><br><span class="line">    range: $.validator.format(&quot;请输入一个介于 &#123;0&#125; 和 &#123;1&#125; 之间的值&quot;),</span><br><span class="line">    max: $.validator.format(&quot;请输入一个最大为 &#123;0&#125; 的值&quot;),</span><br><span class="line">    min: $.validator.format(&quot;请输入一个最小为 &#123;0&#125; 的值&quot;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>推荐做法，将此文件放入messages_cn.js中，在页面中引入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;&lt;%=path %&gt;/validate/messages_cn.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></p>
<h2 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h2><p>1、metadata用法，将校验规则写到控件中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    String path = request.getContextPath();</span><br><span class="line">    String basePath = request.getScheme() + &quot;://&quot; + request.getServerName() + &quot;:&quot;</span><br><span class="line">            + request.getServerPort() + path + &quot;/&quot;;</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;base href=&quot;&lt;%=basePath%&gt;&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;title&gt;jQuery Validate验证框架详解-metadata用法&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">        &lt;meta http-equiv=&quot;pragma&quot; content=&quot;no-cache&quot;&gt;</span><br><span class="line">        &lt;meta http-equiv=&quot;cache-control&quot; content=&quot;no-cache&quot;&gt;</span><br><span class="line">        &lt;meta http-equiv=&quot;expires&quot; content=&quot;0&quot;&gt;</span><br><span class="line">        &lt;meta http-equiv=&quot;keywords&quot; content=&quot;keyword1,keyword2,keyword3&quot;&gt;</span><br><span class="line">        &lt;meta http-equiv=&quot;description&quot; content=&quot;This is my page&quot;&gt;</span><br><span class="line">        &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;%=request.getContextPath()%&gt;/validate/jquery-1.6.2.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;%=request.getContextPath()%&gt;/validate/jquery.validate.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;%=request.getContextPath()%&gt;/validate/jquery.metadata.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;%=request.getContextPath()%&gt;/validate/messages_zh.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">        $(function()&#123;</span><br><span class="line">            $(&quot;#myform&quot;).validate();</span><br><span class="line">        &#125;);</span><br><span class="line">        &lt;/script&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;form id=&quot;myform&quot; method=&quot;post&quot; action=&quot;&quot;&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">                &lt;label for=&quot;myname&quot;&gt;用户名：&lt;/label&gt;</span><br><span class="line">                &lt;!-- id和name最好同时写上 --&gt;</span><br><span class="line">                &lt;input id=&quot;myname&quot; name=&quot;myname&quot; class=&quot;required&quot; /&gt;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">                &lt;label for=&quot;email&quot;&gt;E-Mail：&lt;/label&gt;</span><br><span class="line">                &lt;input id=&quot;email&quot; name=&quot;email&quot; class=&quot;required email&quot; /&gt;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">                &lt;label for=&quot;password&quot;&gt;登陆密码：&lt;/label&gt;</span><br><span class="line">                &lt;input id=&quot;password&quot; name=&quot;password&quot; type=&quot;password&quot;</span><br><span class="line">                    class=&quot;&#123;required:true,minlength:5&#125;&quot; /&gt;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">                &lt;label for=&quot;confirm_password&quot;&gt;确认密码：&lt;/label&gt;</span><br><span class="line">                &lt;input id=&quot;confirm_password&quot; name=&quot;confirm_password&quot; type=&quot;password&quot;</span><br><span class="line">                    class=&quot;&#123;required:true,minlength:5,equalTo:&apos;#password&apos;&#125;&quot; /&gt;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">                &lt;label for=&quot;confirm_password&quot;&gt;性别：&lt;/label&gt;</span><br><span class="line">                &lt;!-- 表示必须选中一个 --&gt;</span><br><span class="line">                &lt;input  type=&quot;radio&quot; id=&quot;gender_male&quot; value=&quot;m&quot; name=&quot;gender&quot; class=&quot;&#123;required:true&#125;&quot; /&gt;</span><br><span class="line">                &lt;input  type=&quot;radio&quot; id=&quot;gender_female&quot; value=&quot;f&quot; name=&quot;gender&quot;/&gt;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">                &lt;label for=&quot;confirm_password&quot;&gt;爱好：&lt;/label&gt;</span><br><span class="line">                &lt;!-- checkbox的minlength表示必须选中的最小个数,maxlength表示最大的选中个数,rangelength:[2,3]表示选中个数区间  --&gt;</span><br><span class="line">                &lt;input type=&quot;checkbox&quot; id=&quot;spam_email&quot; value=&quot;email&quot; name=&quot;spam[]&quot; class=&quot;&#123;required:true, minlength:2&#125;&quot; /&gt;</span><br><span class="line">                &lt;input type=&quot;checkbox&quot; id=&quot;spam_phone&quot; value=&quot;phone&quot; name=&quot;spam[]&quot; /&gt;</span><br><span class="line">                &lt;input type=&quot;checkbox&quot; id=&quot;spam_mail&quot; value=&quot;mail&quot; name=&quot;spam[]&quot; /&gt;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">                &lt;label for=&quot;confirm_password&quot;&gt;城市：&lt;/label&gt;</span><br><span class="line">                &lt;select id=&quot;jungle&quot; name=&quot;jungle&quot; title=&quot;Please select something!&quot; class=&quot;&#123;required:true&#125;&quot;&gt;</span><br><span class="line">                    &lt;option value=&quot;&quot;&gt;&lt;/option&gt;</span><br><span class="line">                    &lt;option value=&quot;1&quot;&gt;厦门&lt;/option&gt;</span><br><span class="line">                    &lt;option value=&quot;2&quot;&gt;泉州&lt;/option&gt;</span><br><span class="line">                &lt;option value=&quot;3&quot;&gt;Oi&lt;/option&gt;</span><br><span class="line">            &lt;/select&gt;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">                &lt;input class=&quot;submit&quot; type=&quot;submit&quot; value=&quot;立即注册&quot; /&gt;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p><img src="https://tawen.github.io/res/jqueryvalidatedemo.png" alt="Alt text"></p>
<p>使用class=”{}”的方式，必须引入包：jquery.metadata.js；<br>可以使用如下的方法，修改提示内容：class=”{required:true,minlength:5,messages:{required:’请输入内容’}}”；<br>在使用equalTo关键字时，后面的内容必须加上引号，如下代码：class=”{required:true,minlength:5,equalTo:’#password’}”。</p>
<p>2、将校验规则写到js代码中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=&quot;java&quot; import=&quot;java.util.*&quot; pageEncoding=&quot;UTF-8&quot;%&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    String path = request.getContextPath();</span><br><span class="line">    String basePath = request.getScheme() + &quot;://&quot; + request.getServerName() + &quot;:&quot;</span><br><span class="line">            + request.getServerPort() + path + &quot;/&quot;;</span><br><span class="line">%&gt;</span><br><span class="line"></span><br><span class="line">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;base href=&quot;&lt;%=basePath%&gt;&quot;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;title&gt;jQuery Validate验证框架详解&lt;/title&gt;</span><br><span class="line"></span><br><span class="line">        &lt;meta http-equiv=&quot;pragma&quot; content=&quot;no-cache&quot;&gt;</span><br><span class="line">        &lt;meta http-equiv=&quot;cache-control&quot; content=&quot;no-cache&quot;&gt;</span><br><span class="line">        &lt;meta http-equiv=&quot;expires&quot; content=&quot;0&quot;&gt;</span><br><span class="line">        &lt;meta http-equiv=&quot;keywords&quot; content=&quot;keyword1,keyword2,keyword3&quot;&gt;</span><br><span class="line">        &lt;meta http-equiv=&quot;description&quot; content=&quot;This is my page&quot;&gt;</span><br><span class="line">        &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;%=request.getContextPath()%&gt;/validate/jquery-1.6.2.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;%=request.getContextPath()%&gt;/validate/jquery.validate.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">        &lt;script type=&quot;text/javascript&quot;&gt;</span><br><span class="line">        $(function()&#123;</span><br><span class="line">            var validate = $(&quot;#myform&quot;).validate(&#123;</span><br><span class="line">                debug: true, //调试模式取消submit的默认提交功能   </span><br><span class="line">                //errorClass: &quot;label.error&quot;, //默认为错误的样式类为：error   </span><br><span class="line">                focusInvalid: false, //当为false时，验证无效时，没有焦点响应  </span><br><span class="line">                onkeyup: false,   </span><br><span class="line">                submitHandler: function(form)&#123;   //表单提交句柄,为一回调函数，带一个参数：form   </span><br><span class="line">                    alert(&quot;提交表单&quot;);   </span><br><span class="line">                    form.submit();   //提交表单   </span><br><span class="line">                &#125;,   </span><br><span class="line">                </span><br><span class="line">                rules:&#123;</span><br><span class="line">                    myname:&#123;</span><br><span class="line">                        required:true</span><br><span class="line">                    &#125;,</span><br><span class="line">                    email:&#123;</span><br><span class="line">                        required:true,</span><br><span class="line">                        email:true</span><br><span class="line">                    &#125;,</span><br><span class="line">                    password:&#123;</span><br><span class="line">                        required:true,</span><br><span class="line">                        rangelength:[3,10]</span><br><span class="line">                    &#125;,</span><br><span class="line">                    confirm_password:&#123;</span><br><span class="line">                        equalTo:&quot;#password&quot;</span><br><span class="line">                    &#125;                    </span><br><span class="line">                &#125;,</span><br><span class="line">                messages:&#123;</span><br><span class="line">                    myname:&#123;</span><br><span class="line">                        required:&quot;必填&quot;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    email:&#123;</span><br><span class="line">                        required:&quot;必填&quot;,</span><br><span class="line">                        email:&quot;E-Mail格式不正确&quot;</span><br><span class="line">                    &#125;,</span><br><span class="line">                    password:&#123;</span><br><span class="line">                        required: &quot;不能为空&quot;,</span><br><span class="line">                        rangelength: $.format(&quot;密码最小长度:&#123;0&#125;, 最大长度:&#123;1&#125;。&quot;)</span><br><span class="line">                    &#125;,</span><br><span class="line">                    confirm_password:&#123;</span><br><span class="line">                        equalTo:&quot;两次密码输入不一致&quot;</span><br><span class="line">                    &#125;                                    </span><br><span class="line">                &#125;</span><br><span class="line">                          </span><br><span class="line">            &#125;);    </span><br><span class="line">    </span><br><span class="line">        &#125;);</span><br><span class="line">        &lt;/script&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line"></span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;form id=&quot;myform&quot; method=&quot;post&quot; action=&quot;&quot;&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">                &lt;label for=&quot;myname&quot;&gt;用户名：&lt;/label&gt;</span><br><span class="line">                &lt;!-- id和name最好同时写上 --&gt;</span><br><span class="line">                &lt;input id=&quot;myname&quot; name=&quot;myname&quot; /&gt;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">                &lt;label for=&quot;email&quot;&gt;E-Mail：&lt;/label&gt;</span><br><span class="line">                &lt;input id=&quot;email&quot; name=&quot;email&quot; /&gt;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">                &lt;label for=&quot;password&quot;&gt;登陆密码：&lt;/label&gt;</span><br><span class="line">                &lt;input id=&quot;password&quot; name=&quot;password&quot; type=&quot;password&quot; /&gt;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">                &lt;label for=&quot;confirm_password&quot;&gt;确认密码：&lt;/label&gt;</span><br><span class="line">                &lt;input id=&quot;confirm_password&quot; name=&quot;confirm_password&quot; type=&quot;password&quot; /&gt;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">                &lt;input class=&quot;submit&quot; type=&quot;submit&quot; value=&quot;立即注册&quot; /&gt;</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p><img src="https://tawen.github.io/res/jqueryvalidatedemo2.png" alt="Alt text"></p>
<h2 id="常用方法及注意问题"><a href="#常用方法及注意问题" class="headerlink" title="常用方法及注意问题"></a>常用方法及注意问题</h2><p>1、用其他方式替代默认的submit<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$(function()&#123;</span><br><span class="line">   $(&quot;#signupForm&quot;).validate(&#123;</span><br><span class="line">        submitHandler:function(form)&#123;</span><br><span class="line">            alert(&quot;submit!&quot;);   </span><br><span class="line">            form.submit();</span><br><span class="line">        &#125;    </span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>可以设置validate的默认值，写法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$.validator.setDefaults(&#123;</span><br><span class="line">submitHandler: function(form) &#123; alert(&quot;submit!&quot;); form.submit(); &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>如果想提交表单，需要使用form.submit()，而不要使用$(form).submit()</p>
<p>2、debug，只验证不提交表单<br>如果这个参数为true，那么表单不会提交，只进行检查，调试时十分方便<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$(function()&#123;</span><br><span class="line">    $(&quot;#signupForm&quot;).validate(&#123;</span><br><span class="line">        debug:true</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>如果一个页面中有多个表单都想设置成为debug，用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$.validator.setDefaults(&#123;</span><br><span class="line">debug: true</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>3、ignore：忽略某些元素不验证<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ignore: &quot;.ignore&quot;</span><br></pre></td></tr></table></figure></p>
<p>4、更改错误信息显示的位置<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">errorPlacement：Callback</span><br></pre></td></tr></table></figure></p>
<p>Default: 把错误信息放在验证的元素后面<br>指明错误放置的位置，默认情况是：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">errorPlacement: function(error, element) &#123; </span><br><span class="line">     error.appendTo(element.parent()); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>//示例<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;tr&gt;</span><br><span class="line">    &lt;td class=&quot;label&quot;&gt;&lt;label id=&quot;lfirstname&quot; for=&quot;firstname&quot;&gt;First Name&lt;/label&gt;&lt;/td&gt;</span><br><span class="line">    &lt;td class=&quot;field&quot;&gt;&lt;input id=&quot;firstname&quot; name=&quot;firstname&quot; type=&quot;text&quot; value=&quot;&quot; maxlength=&quot;100&quot; /&gt;&lt;/td&gt;</span><br><span class="line">    &lt;td class=&quot;status&quot;&gt;&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">    &lt;td style=&quot;padding-right: 5px;&quot;&gt;</span><br><span class="line">        &lt;input id=&quot;dateformat_eu&quot; name=&quot;dateformat&quot; type=&quot;radio&quot; value=&quot;0&quot; /&gt;</span><br><span class="line">        &lt;label id=&quot;ldateformat_eu&quot; for=&quot;dateformat_eu&quot;&gt;14/02/07&lt;/label&gt;</span><br><span class="line">    &lt;/td&gt;</span><br><span class="line">    &lt;td style=&quot;padding-left: 5px;&quot;&gt;</span><br><span class="line">        &lt;input id=&quot;dateformat_am&quot; name=&quot;dateformat&quot; type=&quot;radio&quot; value=&quot;1&quot;  /&gt;</span><br><span class="line">        &lt;label id=&quot;ldateformat_am&quot; for=&quot;dateformat_am&quot;&gt;02/14/07&lt;/label&gt;</span><br><span class="line">    &lt;/td&gt;</span><br><span class="line">    &lt;td&gt;&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">    &lt;td class=&quot;label&quot;&gt;&amp;nbsp;&lt;/td&gt;</span><br><span class="line">    &lt;td class=&quot;field&quot; colspan=&quot;2&quot;&gt;</span><br><span class="line">        &lt;div id=&quot;termswrap&quot;&gt;</span><br><span class="line">            &lt;input id=&quot;terms&quot; type=&quot;checkbox&quot; name=&quot;terms&quot; /&gt;</span><br><span class="line">            &lt;label id=&quot;lterms&quot; for=&quot;terms&quot;&gt;I have read and accept the Terms of Use.&lt;/label&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line"></span><br><span class="line">errorPlacement: function(error, element) &#123;</span><br><span class="line">    if (element.is(&quot;:radio&quot;))</span><br><span class="line">        error.appendTo(element.parent().next().next());</span><br><span class="line">    else if (element.is(&quot;:checkbox&quot;))</span><br><span class="line">        error.appendTo(element.next());</span><br><span class="line">    else</span><br><span class="line">        error.appendTo(element.parent().next());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>代码的作用是：一般情况下把错误信息显示在<figure class="highlight plain"><figcaption><span>class</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">```</span><br><span class="line">errorClass：String Default: &quot;error&quot;</span><br></pre></td></tr></table></figure></p>
<p>指定错误提示的css类名，可以自定义错误提示的样式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">errorElement：String Default: &quot;label&quot;</span><br></pre></td></tr></table></figure></p>
<p>用什么标签标记错误，默认的是label你可以改成em<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">errorContainer：Selector</span><br></pre></td></tr></table></figure></p>
<p>显示或者隐藏验证信息，可以自动实现有错误信息出现时把容器属性变为显示，无错误时隐藏，用处不大<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">errorContainer: &quot;#messageBox1, #messageBox2&quot;</span><br><span class="line"></span><br><span class="line">errorLabelContainer：Selector</span><br></pre></td></tr></table></figure></p>
<p>把错误信息统一放在一个容器里面。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wrapper：String</span><br></pre></td></tr></table></figure></p>
<p>用什么标签再把上边的errorELement包起来</p>
<p>一般这三个属性同时使用，实现在一个容器内显示所有错误提示的功能，并且没有信息时自动隐藏<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">errorContainer: &quot;div.error&quot;,</span><br><span class="line">errorLabelContainer: $(&quot;#signupForm div.error&quot;),</span><br><span class="line">wrapper: &quot;li&quot;</span><br></pre></td></tr></table></figure></p>
<p>5、更改错误信息显示的样式<br>设置错误提示的样式，可以增加图标显示，在该系统中已经建立了一个validation.css专门用于维护校验文件的样式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">input.error &#123; border: 1px solid red; &#125;</span><br><span class="line">label.error &#123;</span><br><span class="line">    background:url(&quot;./demo/images/unchecked.gif&quot;) no-repeat 0px 0px;</span><br><span class="line">    padding-left: 16px;</span><br><span class="line">    padding-bottom: 2px;</span><br><span class="line">    font-weight: bold;</span><br><span class="line">    color: #EA5200;</span><br><span class="line">&#125;</span><br><span class="line">label.checked &#123;</span><br><span class="line">    background:url(&quot;./demo/images/checked.gif&quot;) no-repeat 0px 0px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>6、每个字段验证通过执行函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">success：String,Callback</span><br></pre></td></tr></table></figure></p>
<p>要验证的元素通过验证后的动作，如果跟一个字符串，会当做一个css类，也可跟一个函数<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">success: function(label) &#123;</span><br><span class="line">    // set &amp;nbsp; as text for IE</span><br><span class="line">    label.html(&quot;&amp;nbsp;&quot;).addClass(&quot;checked&quot;);</span><br><span class="line">    //label.addClass(&quot;valid&quot;).text(&quot;Ok!&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>添加”valid”到验证元素, 在CSS中定义的样式<figure class="highlight plain"><figcaption><span>&#123;&#125;```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">success: &quot;valid&quot;</span><br><span class="line">7、验证的触发方式修改</span><br><span class="line">下面的虽然是boolean型的，但建议除非要改为false,否则别乱添加。</span><br><span class="line">a.onsubmit：Boolean Default: true </span><br><span class="line">提交时验证. 设置唯false就用其他方法去验证</span><br><span class="line">b.onfocusout：Boolean Default: true </span><br><span class="line">失去焦点是验证(不包括checkboxes/radio buttons)</span><br><span class="line">c.onkeyup：Boolean Default: true </span><br><span class="line">在keyup时验证.</span><br><span class="line">d.onclick：Boolean Default: true </span><br><span class="line">在checkboxes 和 radio 点击时验证</span><br><span class="line">e.focusInvalid：Boolean Default: true </span><br><span class="line">提交表单后，未通过验证的表单(第一个或提交之前获得焦点的未通过验证的表单)会获得焦点</span><br><span class="line">f.focusCleanup：Boolean Default: false </span><br><span class="line">如果是true那么当未通过验证的元素获得焦点时，移除错误提示。避免和focusInvalid一起用</span><br><span class="line"></span><br><span class="line">8、异步验证</span><br><span class="line">remote：URL</span><br><span class="line">使用ajax方式进行验证，默认会提交当前验证的值到远程地址，如果需要提交其他的值，可以使用data选项</span><br></pre></td></tr></table></figure></p>
<p>//示例一：<br>remote: “check-email.php”<br>//示例二：<br>remote: {<br>    url: “check-email.php”,     //后台处理程序<br>    type: “post”,               //数据发送方式<br>    dataType: “json”,           //接受数据格式<br>    data: {                     //要传递的数据<br>        username: function() {<br>            return $(“#username”).val();<br>        }<br>    }<br>}<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">远程地址只能输出&quot;true&quot;或&quot;false&quot;，不能有其它输出。</span><br><span class="line"></span><br><span class="line">9、添加自定义校验</span><br><span class="line">addMethod：name, method, message</span><br><span class="line">自定义验证方法</span><br></pre></td></tr></table></figure></p>
<p>// 中文字两个字节<br>jQuery.validator.addMethod(<br>    “byteRangeLength”,<br>    function(value, element, param) {<br>        var length = value.length;<br>        for(var i = 0; i &lt; value.length; i++){<br>            if(value.charCodeAt(i) &gt; 127){<br>                length++;<br>            }<br>        }<br>        return this.optional(element) || (length &gt;= param[0] &amp;&amp; length &lt;= param[1]);<br>    },<br>    $.validator.format(“请确保输入的值在{0}-{1}个字节之间(一个中文字算2个字节)”)<br>);</p>
<p>// 邮政编码验证<br>jQuery.validator.addMethod(“isZipCode”, function(value, element) {<br>    var tel = /^[0-9]{6}$/;<br>    return this.optional(element) || (tel.test(value));<br>}, “请正确填写您的邮政编码”);<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.要在additional-methods.js文件中添加或者在jquery.validate.js添加</span><br><span class="line">建议一般写在additional-methods.js文件中</span><br><span class="line"></span><br><span class="line">2.在messages_cn.js文件添加：isZipCode: &quot;只能包括中文字、英文字母、数字和下划线&quot;,</span><br><span class="line">调用前要添加对additional-methods.js文件的引用。</span><br><span class="line"></span><br><span class="line">10、radio和checkbox、select的验证</span><br></pre></td></tr></table></figure></p>
<p>//1.radio的required表示必须选中一个</p>
<p><input type="radio" id="gender_male" value="m" name="gender" class="{required:true}"></p>
<input type="radio" id="gender_female" value="f" name="gender">

<p>//2.checkbox的required表示必须选中</p>
<input type="checkbox" class="checkbox" id="agree" name="agree">

<p>//checkbox的minlength表示必须选中的最小个数,maxlength表示最大的选中个数,rangelength:[2,3]表示选中个数区间</p>
<p><input type="checkbox" id="spam_email" value="email" name="spam[]" class="{required:true, minlength:2}"></p>
<p><input type="checkbox" id="spam_phone" value="phone" name="spam[]"></p>
<input type="checkbox" id="spam_mail" value="mail" name="spam[]">

<p>//3.select的required表示选中的value不能为空</p>
<select id="jungle" name="jungle" title="Please select something!" class="{required:true}"><br>    <option value=""></option><br>    <option value="1">Buga</option><br>    <option value="2">Baga</option><br>    <option value="3">Oi</option><br></select>

<p>//select的minlength表示选中的最小个数（可多选的select）,maxlength表示最大的选中个 数,rangelength:[2,3]表示选中个数区间</p>
<p><select id="fruit" name="fruit" title="Please select at least two fruits" class="{required:true, minlength:2}" multiple="multiple"><br>    <option value="b">Banana</option><br>    <option value="a">Apple</option><br>    <option value="p">Peach</option><br>    <option value="t">Turtle</option><br></select><br><code>`</code></p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/jQuery-Validate-js/">jQuery.Validate.js</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/前端技术/">前端技术</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/02/21/blog20170221/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
    <article id="post-blog20170217" class="article article-type-post  article-index" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/02/17/blog20170217/">ES6系列（一）迭代器、for-of循环和生成器 Generators</a>
    </h1>
  

        <a href="/2017/02/17/blog20170217/" class="archive-article-date">
  	<time datetime="2017-02-17T02:23:05.000Z" itemprop="datePublished"><i class="icon-calendar icon"></i>2017-02-17</time>
</a>
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="for-of循环"><a href="#for-of循环" class="headerlink" title="for-of循环"></a>for-of循环</h2><h3 id="for循环的疑问"><a href="#for循环的疑问" class="headerlink" title="for循环的疑问"></a>for循环的疑问</h3><p>起初我们如何遍历数组中的元素呢？20年前JavaScript刚萌生时，你可能这样实现数组遍历：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var myArray = [&apos;2&apos;,&apos;3&apos;,&apos;aaa&apos;];</span><br><span class="line">for (var index = 0; index &lt; myArray.length; index++) &#123;</span><br><span class="line">    console.log(myArray[index]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>自ES5正式发布后，你可以使用内建的forEach方法来遍历数组：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">myArray.forEach(function (value) &#123;</span><br><span class="line">    console.log(value);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>使用forEach的这段代码看起来更加简洁，但这种方法也有一个小缺陷：你不能使用break语句中断循环，也不能使用return语句返回到外层函数。<br>是不是呢？你们可以进行相关的验证，同时呢它在浏览器兼容与支持方面并不理想，所以我们会想起for循环来。<br>当然，如果只用for循环的语法来遍历数组元素也很不错，就如上面的第一个例子。<br>那么，你一定想尝试一下for-in循环：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (var index in myArray) &#123; // 千万别这样做</span><br><span class="line">      console.log(myArray[index]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这绝对是一个糟糕的选择，为什么呢？</p>
<ul>
<li>在这段代码中，赋给index的值不是实际的数字，而是字符串“0”、“1”、“2”，而你呢？此时很可能在无意之间需要进行相关计算，但这是这不是数值的计算了，而是字符串算数计算，例如：“2” + 1 == “21”，这给编码过程带来极大的不便。</li>
<li>作用于数组的for-in循环体除了遍历数组元素外，还会遍历自定义属性。举个例子，如果你的数组中有一个可枚举属性myArray.name，循环将额外执行一次，遍历到名为“name”的索引。就连数组原型链上的属性都能被访问到。</li>
<li>最让人震惊的是，在某些情况下，这段代码可能按照随机顺序遍历数组元素。</li>
<li>简而言之，for-in是为普通对象设计的，你可以遍历得到字符串类型的键，因此不适用于数组遍历。</li>
</ul>
<p>其实啰里啰唆说了这么多你就记住一句话：for-in是用于遍历对象的，普通for循环和forEach是遍历普通数组的。</p>
<p>如果有天你想要遍历对象又要得到它的键值，这里举例说明：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var obj = &#123;</span><br><span class="line">    &apos;name&apos;: &apos;言墨儿&apos;,</span><br><span class="line">    &apos;age&apos;: 21</span><br><span class="line">&#125;;</span><br><span class="line">console.log(Object.keys(obj)) // 返回的是一个数组</span><br><span class="line">// 不推荐for-in</span><br><span class="line">for (var val in Object.keys(obj)) &#123;</span><br><span class="line">    console.log(val); // 获得键值key-字符串</span><br><span class="line">    console.log(Object.keys(obj)[val]); // name、age-(获得键值key对应的数据)</span><br><span class="line">&#125;</span><br><span class="line">// 推荐for循环</span><br><span class="line">for (var i = 0; i &lt; Object.keys(obj).length; i++) &#123;</span><br><span class="line">    console.log(i); // 获得键值key-数字</span><br><span class="line">    console.log(Object.keys(obj)[i]); // name、age-(获得键值key对应的数据)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="强大的for-of循环"><a href="#强大的for-of循环" class="headerlink" title="强大的for-of循环"></a>强大的for-of循环</h3><p>为了解决这些问题所以新的循环方式在ES6中出现了，当然ES6不会破坏你已经写好的JS代码。目前，成千上万的Web网站依赖for-in循环，其中一些网站甚至将其用于数组遍历。而如果想通过修正for-in循环增加数组遍历支持会让这一切变得更加混乱，因此，标准委员会在ES6中增加了一种新的循环语法来解决目前的问题。<br>就像这样：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// for-of循环支持数组遍历和大多数类数组对象</span><br><span class="line">var myArray = [&apos;2&apos;,&apos;3&apos;,&apos;aaa&apos;]</span><br><span class="line">for (var value of myArray) &#123;</span><br><span class="line">      console.log(value); // 2，3，aaa</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>是的，与之前的内建方法相比，这种循环方式看起来是否有些眼熟？那好，我们将要探究一下for-of循环的外表下隐藏着哪些强大的功能。现在，你只需记住：</p>
<ul>
<li>这是最简洁、最直接的遍历数组元素的语法</li>
<li>这个方法避开了for-in循环的所有缺陷</li>
<li>与forEach()不同的是，它可以正确响应break、continue和return语句</li>
</ul>
<p>表面看来for-in循环用来遍历对象属性，for-of循环用来遍历数据—例如数组中的值。但是，for-of不仅如此！<br>for-of循环也可以遍历其它的集合，for-of循环不仅支持数组，还支持大多数类数组对象，例如DOM NodeList对象。同时，for-of循环也支持字符串遍历，它将字符串视为一系列的Unicode字符来进行遍历：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (var chr of &quot;yanmoer&quot;) &#123;</span><br><span class="line">    console.log (chr); // y,a,n,m,o,e,r</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>它同样支持Map和Set对象遍历。<br>很多人也许没听说过Map和Set对象。他们是ES6中新增的类型。不知道也没有关系，我将在后面简单讲解这两个新的类型，如果你还有兴趣，你可以点击我存放的连接。<br>如果你曾在其它语言中使用过Map和Set对象，你会发现ES6中的并无太大出入。<br>其实讲简单点就是Set对象可以自动排除重复项：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 基于单词数组创建一个set对象</span><br><span class="line">var words = [&apos;yanmoer&apos;,&apos;qinni&apos;,&apos;yanmoer&apos;]</span><br><span class="line">var uniqueWords = new Set(words);    // 如果成为Set对象，输出结果会去掉重复项</span><br><span class="line">console.log(uniqueWords); // Set &#123;&quot;yanmoer&quot;, &quot;qinni&quot;&#125;</span><br><span class="line">// 生成Set对象后，你可以轻松遍历它所包含的内容：</span><br><span class="line">for (var word of uniqueWords) &#123;</span><br><span class="line">   console.log(word); // yanmoer,qinni</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Set对象还有一些方法，这里不一一列举了，详情请见官网api：Set对象<br>Map对象则稍有不同：内含的数据由键值对组成，所以你需要使用解构（destructuring）来将键值对拆解为两个独立的变量，例子说明：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">var phoneBookMap = [[&apos;name&apos;,&apos;yanmo&apos;],[&apos;age&apos;,&apos;22&apos;]]; // Map对象就是这样的</span><br><span class="line">for (var [key, value] of phoneBookMap) &#123; // [key, value]就是解构</span><br><span class="line">    console.log(key + &quot; : &quot; + value); //&apos;name&apos; : &apos;yanmo&apos;,&apos;age&apos; : &apos;22&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>其实Map对象就是简单的键/值映射。其中键和值可以是任意值(对象或者原始值)。关于Map对象的方法，也是详情请见官网api：Map对象<br>解构也是ES6的新特性，简单说来解构赋值就是允许你使用类似数组或对象字面量的语法将数组和对象的属性赋给各种变量，我将在后续的文章中进行讲解。看来我应该记录这些优秀的问题，未来再进行相关新内容的一一剖析。</p>
<blockquote>
<p>现在，你只需记住：未来的JS可以使用一些新型的集合类，甚至会有更多的类型陆续诞生，而for-of就是为遍历所有这些集合特别设计的循环语句。</p>
</blockquote>
<p>for-of循环不支持普通对象，你应当用用for-in循环（这也是它的本职工作）或内建的Object.keys()方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 向控制台输出对象的可枚举属性</span><br><span class="line">var someObject = &#123;</span><br><span class="line">    classA: &apos;textColor&apos;,</span><br><span class="line">    classB: &apos;textSize&apos;,</span><br><span class="line">    isA: false </span><br><span class="line">&#125;</span><br><span class="line">for (var key of Object.keys(someObject)) &#123;</span><br><span class="line">    console.log(key + &quot;: &quot; + someObject[key]); // classA: &apos;textColor&apos;,classB: &apos;textSize&apos;,isA: false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="深入理解"><a href="#深入理解" class="headerlink" title="深入理解"></a>深入理解</h2><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>结合我的实践和运用，ES6及以后ES的后继者都会坚持这样一个规律：凡是新加入的特性，势必已在其它语言中得到强有力的实用性证明。</p>
<blockquote>
<p>举个例子，新加入的for-of循环像极了C++、Java、C#以及Python中的循环语句。与它们一样，这里的for-of循环支持语言和标准库中提供的几种不同的数据结构。它同样也是这门语言中的一个扩展点（关于扩展点，建议参考 1. 浅析扩展点 2. What are extensions and extension points?,连接给你们了有兴趣了可以研究，没兴趣了也没关系，继续）。</p>
</blockquote>
<p>正如其它语言中的for/foreach语句一样，for-of循环语句通过方法调用来遍历各种集合。数组、Maps对象、Sets对象以及其它在我们讨论的对象有一个共同点，它们都有一个迭代器方法。</p>
<p>你可以给任意类型的对象添加迭代器方法。</p>
<p>当你为对象添加myObject.toString()方法后，就可以将对象转化为字符串，同样地，当你向任意对象添加myObject<a href="">Symbol.iterator</a>方法，就可以遍历这个对象了。你们一定很疑问那个[Symbol.iterator]语法是什么情况，这段代码到底做了什么呢？这里通过Symbol处理了一下方法的名称，ES标准委员会可以把这个方法命名为.iterator()方法，但是如果你的代码中的对象可能也有一些.iterator()方法，这不是最好的解决方法。于是在ES6标准中使用symbol来作为方法名，而不是使用字符串。同时，Symbols也是ES6中的新类型。</p>
<p>现在，你需要记住，基于新标准，你可以定义一个全新的symbol，就像Symbol.iterator，如此一来可以保证不与任何已有代码产生冲突。这样做的代价是，这段代码的语法看起来会略显生硬，但是这微乎其微代价却可以为你带来如此多的新特性和新功能，并且你所做的这一切可以完美地向后兼容。</p>
<p>所有拥有<a href="">Symbol.iterator</a>的对象被称为可迭代的。对于ES来说可迭代对象的概念几乎贯穿于整门语言之中，不仅是for-of循环，还有Map和Set构造函数、解构赋值，以及新的展开操作符。</p>
<h3 id="迭代器对象"><a href="#迭代器对象" class="headerlink" title="迭代器对象"></a>迭代器对象</h3><p>现在，你将无须亲自从零开始实现一个对象迭代器，我会在以后的文章详细讲解，在这里我们只简单了解一下迭代器：<br>for-of循环首先调用集合的<a href="">Symbol.iterator</a>方法，紧接着返回一个新的迭代器对象。迭代器对象可以是任意具有.next()方法的对象；for-of循环将重复调用这个方法，每次循环调用一次。<br>举个例子，这段代码是我能想出来的最简单的迭代器,这里我们不添加for-of循环进行控制台的输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 对象迭代</span><br><span class="line">var zeroesForeverIterator = &#123;</span><br><span class="line">    [Symbol.iterator]: function () &#123; // 简而言之只是一个方法</span><br><span class="line">        return this;</span><br><span class="line">    &#125;,</span><br><span class="line">    next: function () &#123; // next</span><br><span class="line">        return &#123;done: false, value: 0&#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">console.log(zeroesForeverIterator.next()); // Object &#123;done: false, value: 0&#125;</span><br><span class="line">console.log(zeroesForeverIterator[Symbol.iterator]()); // 获得是zeroesForeverIterator我们自定义的对象</span><br></pre></td></tr></table></figure>
<p>如果我们加上for-of循环：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">console.log(zeroesForeverIterator.next()); // Object &#123;done: false, value: 0&#125;</span><br><span class="line">console.log(zeroesForeverIterator[Symbol.iterator]()); // Object &#123;&#125;</span><br><span class="line">for (var value of zeroesForeverIterator) &#123;</span><br><span class="line">    console.log(value); // 0</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>相信大家也在网上其他地方看过，每当解释这里都是乱说一通，到最后谁也不明白，经过我的叙述我想到这里大家也都了解了有些眉目，其实只要你细心，我们会发现如果我们加上for-of循环，for-of循环每一次调用.next()方法，它都返回相同的结果，其实返回给for-of循环的结果有两种可能：</p>
<blockquote>
<p>1、我们尚未完成迭代<br>  2、下一个值为0。这意味着for (var value of zeroesForeverIterator) {}将会是一个无限循环。当然，一般来说迭代器不会如此简单。</p>
</blockquote>
<p>这个迭代器的设计，以及它的.done和.value属性，从表面上看与其它语言中的迭代器不太一样。在Java中，迭代器有分离的.hasNext()和.next()方法。在Python中，他们只有一个.next() 方法，当没有更多值时抛出StopIteration异常。</p>
<p>但是所有这三种设计从根本上讲都返回了相同的信息。</p>
<p>迭代器对象也可以实现可选的.return()和.throw(exc)方法。如果for-of循环过早退出会调用.return()方法，异常、break语句或return语句均可触发过早退出。如果迭代器需要执行一些清洁或释放资源的操作，可以在.return()方法中实现。大多数迭代器方法无须实现这一方法。.throw(exc)方法的使用场景就更特殊了：for-of循环永远不会调用它。但是我们还是会在以后更详细地讲解它的作用。</p>
<p>现在我们已了解所有细节，可以写一个简单的for-of循环然后按照下面的方法调用重写被迭代的对象。<br>首先是for-of循环：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">for (var val of obj) &#123;</span><br><span class="line">    // 一些语句</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后是一个使用以下方法和少许临时变量实现的与之前大致相当的示例：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">var $iterator = ITERABLE[Symbol.iterator]();</span><br><span class="line">var $result = $iterator.next();</span><br><span class="line">while (!$result.done) &#123;</span><br><span class="line">    val = $result.value;</span><br><span class="line">    一些语句</span><br><span class="line">    $result = $iterator.next();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这段代码没有展示.return()方法是如何处理的，我们可以添加这部分代码，但我认为这对于我们正在讲解的内容来说过于复杂了。for-of循环用起来很简单，但是其背后有着非常复杂的机制。</p>
<h3 id="生成器"><a href="#生成器" class="headerlink" title="生成器"></a>生成器</h3><p>ES6生成器（Generators）简介</p>
<p>什么是生成器？不懂得人一定会疑问，首先我们从一个示例开始：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function* quips(name) &#123;</span><br><span class="line">    yield &quot;你好 &quot; + name + &quot;!&quot;;</span><br><span class="line">    yield &quot;希望你能喜欢这篇详细介绍ES6的文章&quot;;</span><br><span class="line">    if (name.startsWith(&quot;X&quot;)) &#123;</span><br><span class="line">        yield &quot;你的名字&quot; + name + &quot;真他妈吊&quot;;</span><br><span class="line">    &#125;</span><br><span class="line">    yield &quot;我们下次再见！&quot;;</span><br><span class="line">&#125;</span><br><span class="line">var iter = quips(&quot;读者&quot;);</span><br><span class="line">console.log(iter) // [object Generator]</span><br><span class="line">console.log(iter.next()) // Object &#123; value: &quot;你好 jorendorff!&quot;, done: false &#125;</span><br><span class="line">console.log(iter.next())// Object &#123; value: &quot;希望你能喜欢这篇介绍ES6的译文&quot;, done: false &#125;</span><br><span class="line">console.log(iter.next()) // Object &#123; value: &quot;我们下次再见！&quot;, done: false &#125;</span><br><span class="line">console.log(iter.next()) / Object &#123; value: undefined, done: true &#125;</span><br></pre></td></tr></table></figure></p>
<p>这段代码看起来很像一个函数，我们称之为生成器函数，它与普通函数有很多共同点，但是二者有如下区别：</p>
<blockquote>
<p>1、普通函数使用function声明，而生成器函数使用function <em>声明，function </em>只是一种写法罢了。<br>  2、在生成器函数内部，有一种类似return的语法：关键字yield。二者的区别是，普通函数只可以return一次，而生成器函数可以yield多次（当然也可以只yield一次）。在生成器的执行过程中，遇到yield表达式立即暂停，后续可使用例如.next()恢复执行状态。</p>
</blockquote>
<p>这就是普通函数和生成器函数之间最大的区别，普通函数不能自暂停，生成器函数可以。<br>生成器做了什么？<br>当你在我上面的例子中调用quips()生成器函数时发生了什么，那么生成器他就做了什么，写的这么详细，我想大家应该能看懂。</p>
<p><strong> ES6生成器（Generators）案例详解说明 </strong></p>
<blockquote>
<p>我们大概已经习惯了普通函数的使用方式，当你调用它们时，它们立即开始运行，直到遇到return或抛出异常时才退出执行，作为JS程序员你一定深谙此道。</p>
</blockquote>
<p>生成器调用看起来非常类似：quips(“jorendorff”)。但是，当你调用一个生成器时，它并非立即执行，而是返回一个已暂停的生成器对象（上述实例代码中的iter）。你可将这个生成器对象视为一次函数调用，只不过立即冻结了，即在你调用生成器，并且还没有使用过.next()方法前，它就好像恰好在生成器函数的最顶端的第一行代码之前冻结了，暂停在那里。</p>
<p>每当你调用生成器对象的.next()方法时，函数调用将其自身解冻并一直运行到下一个yield表达式，再次暂停。这也是在上述代码中我们每次都调用iter.next()的原因，我们获得了quips()函数体中yield表达式生成的不同的字符串值。</p>
<p>当我们调用最后一个iter.next()时，我们最终抵达生成器函数的末尾，所以返回结果中done的值为true。抵达函数的末尾意味着没有返回值，所以返回结果中value的值为undefined。(注：你可以借此判断是不是抵达生成器函数的末尾)</p>
<p>现在你也可以尝试在循环中加入一个yield，看看会发生什么？</p>
<p><strong> ES6生成器（Generators）深入 </strong></p>
<blockquote>
<p>如果用专业术语描述，每当生成器执行yields语句，生成器的堆栈结构（本地变量、参数、临时值、生成器内部当前的执行位置）被移出堆栈。然而，生成器对象保留了对这个堆栈结构的引用（备份），所以稍后调用.next()可以重新激活堆栈结构并且继续执行。</p>
</blockquote>
<blockquote>
<p>值得特别一提的是，生成器不是线程，在支持线程的语言中，多段代码可以同时运行，通通常导致竞态条件和非确定性，不过同时也带来不错的性能。生成器则完全不同。当生成器运行时，它和调用者处于同一线程中，拥有确定的连续执行顺序，永不并发，(即类似同步执行)。与系统线程不同的是，生成器只有在其函数体内标记为yield的点才会暂停。</p>
</blockquote>
<p>现在，我们了解了生成器的原理，领略过生成器的运行、暂停恢复运行的不同状态。那么，这些奇怪的功能究竟有何用处？</p>
<h3 id="生成器是迭代器！生成器与迭代器"><a href="#生成器是迭代器！生成器与迭代器" class="headerlink" title="生成器是迭代器！生成器与迭代器"></a>生成器是迭代器！生成器与迭代器</h3><p>上面我大概讲了ES6的迭代器的概念和小例子，它是ES6中独立的内建类，同时也是语言的一个扩展点，通过实现<a href="">Symbol.iterator</a>和.next()两个方法你就可以创建自定义迭代器。</p>
<blockquote>
<p>注：记住<a href="">Symbol.iterator</a>和.next()两个方法就可以创建自定义迭代器</p>
</blockquote>
<p><strong> 生成器代替迭代器 </strong></p>
<p>实现一个接口不是一桩小事，我们一起实现一个迭代器。举个例子，我们创建一个简单的名为range迭代器，它可以简单地将两个数字之间的所有数相加。在这里我们使用ES6的类的解决方案（如果不清楚语法细节，无须担心，我也将在以后的文章中为你讲解）：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// 实现一个迭代器:简单地将两个数字之间的所有数相加</span><br><span class="line">// 使用ES6的类的解决方案</span><br><span class="line">class RangeIterator &#123;</span><br><span class="line">    constructor(start, stop) &#123;</span><br><span class="line">        this.value = start;</span><br><span class="line">        this.stop = stop;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    [Symbol.iterator]() &#123; return this; &#125;</span><br><span class="line"></span><br><span class="line">    next() &#123;</span><br><span class="line">        var value = this.value;</span><br><span class="line">        if (value &lt; this.stop) &#123;</span><br><span class="line">            this.value++;</span><br><span class="line">            return &#123;done: false, value: value&#125;;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return &#123;done: true, value: undefined&#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 返回一个新的迭代器，可以从start到stop计数。</span><br><span class="line">function range(start, stop) &#123;</span><br><span class="line">    return new RangeIterator(start, stop);</span><br><span class="line">&#125;</span><br><span class="line">for (var value of range(0, 3)) &#123;</span><br><span class="line">    console.log(&quot;ES6的类&quot; + value); // ES6的类0,ES6的类1,ES6的类2</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里的实现类似Java或Swift中的迭代器，不是很糟糕，但也不是完全没有问题。我们很难说清这段代码中是否有bug，这段代码看起来完全不像我们试图模仿的传统for (;;)循环，迭代器协议迫使我们拆解掉循环部分。此时此刻你对迭代器可能尚无感觉，他们用起来很好，但看起来有些难以实现和理解。</p>
<p>你大概不会为了使迭代器更易于构建从而建议我们为JS语言引入一个离奇古怪又野蛮的新型控制流结构，但是既然我们有生成器，并且包含<a href="">Symbol.iterator</a>和.next()两个方法就可以创建自定义迭代器，那么我们是否可以在这里应用生成器来解决问题呢？一起尝试一下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 生成器解决：</span><br><span class="line">var oldValue = 0</span><br><span class="line">for (var value of range1(0, 3)) &#123;</span><br><span class="line">    console.log(&quot;生成器&quot; + value); // 生成器0,生成器1,生成器2</span><br><span class="line">    console.log(oldValue + value); // 0,1,3</span><br><span class="line">    oldValue = value;</span><br><span class="line">&#125;</span><br><span class="line">function* range1(start, stop) &#123;</span><br><span class="line">    for (var i = start; i &lt; stop; i++)</span><br><span class="line">    yield i;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上简便代码实现的生成器完全可以替代之前引入了一整个RangeIterator类的代码的实现。可行的原因是：生成器是迭代器。因为所有的生成器都有内建.next()和<a href="">Symbol.iterator</a>方法的实现。所以你只须编写循环部分的行为。而不再需要写<a href="">Symbol.iterator</a>和.next()两个方法来创建自定义迭代器。</p>
<p><strong> 生成器的最大效力 </strong></p>
<p>我们都非常讨厌被迫用古怪语态写一封很长的邮件，不借助生成器实现迭代器的过程与之类似，令人痛苦不堪。当你的语言不再简练，说出的话就会变得难以理解。上面RangeIterator类的实现代码很长并且非常奇怪，因为你需要在不借助循环语法的前提下为它添加循环功能的描述。所以生成器是最好的解决方案！</p>
<p>我们如何发挥作为迭代器的生成器所产生的最大效力？</p>
<p>使任意对象可迭代（上面关于迭代器的例子，为对象添加<a href="">Symbol.iterator</a>和.next()方法）。编写生成器函数遍历这个对象，运行时yield每一个值。然后将这个生成器函数作为这个对象的[Symbol.iterator]方法。</p>
<p>简化数组构建函数。假设你有一个函数，每次调用的时候返回一个数组结果。就像这样：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// 拆分一维数组icons变为二维</span><br><span class="line">// 普通实现</span><br><span class="line">function splitIntoRows(icons, rowLength) &#123;</span><br><span class="line"> var rows = [];</span><br><span class="line"> for (var i = 0; i &lt; icons.length; i += rowLength) &#123;</span><br><span class="line">     rows.push(icons.slice(i, i + rowLength));</span><br><span class="line"> &#125;</span><br><span class="line"> return rows;</span><br><span class="line">&#125;</span><br><span class="line">var icons = [1,2,3,4,5,6,7,8,9,0]</span><br><span class="line">console.log(JSON.stringify(splitIntoRows(icons, 2))); // [[1,2],[3,4],[5,6],[7,8],[9,0]]</span><br><span class="line">// 生成器创建</span><br><span class="line">function* splitInto(icons, rowLength) &#123;</span><br><span class="line"> for (var i = 0; i &lt; icons.length; i += rowLength) &#123;</span><br><span class="line">     yield icons.slice(i, i + rowLength);</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line">var str = [1,2,3,4,5,6,7,8,9,0]</span><br><span class="line">for (var value of splitInto(str, 2)) &#123;</span><br><span class="line"> console.log(&quot;生成器创建数组&quot; + value); // 生成器创建数组1,2 生成器创建数组3,4...生成器创建数组9,0</span><br><span class="line">&#125;</span><br><span class="line">console.log(splitInto(str, 2).next()); // Object &#123;value: Array[2], done: false&#125;</span><br></pre></td></tr></table></figure></p>
<p>行为上唯一的不同是，传统写法立即计算所有结果并返回一个数组类型的结果，使用生成器则返回一个迭代器，每次根据需要逐一地计算结果。</p>
<p>你一定会疑问，这可以用来做什么？</p>
<ul>
<li>获取异常尺寸的结果。你无法构建一个无限大的数组，但是你可以返回一个可以生成一个永无止境的序列的生成器，每次调用可以从中取任意数量的值。</li>
<li>重构复杂循环。你是否写过又丑又大的函数？你是否愿意将其拆分为两个更简单的部分？现在，你的重构工具箱里有了新的利刃——生成器。当你面对一个复杂的循环时，你可以拆分出生成数据的代码，将其转换为独立的生成器函数，然后使用for (var data of myNewGenerator(args))遍历我们所需的数据。</li>
<li>构建与迭代相关的工具。ES6不提供用来过滤、映射以及针对任意可迭代数据集进行特殊操作的扩展库。借助生成器，我们只须写几行代码就可以实现类似的工具。</li>
</ul>
<p>举个例子，假设你需要一个等效于Array.prototype.filter（filter()方法使用指定的函数测试所有元素，并创建一个包含所有通过测试的元素的新数组。），并且支持DOM NodeLists的方法，可以这样写<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// 过滤数组中每一项对象的id属性是数字</span><br><span class="line">// 定义数组</span><br><span class="line">var arr = [</span><br><span class="line">  &#123; id: 15 &#125;,</span><br><span class="line">  &#123; id: -1 &#125;,</span><br><span class="line">  &#123; id: 0 &#125;,</span><br><span class="line">  &#123; id: 3 &#125;,</span><br><span class="line">  &#123; id: 12.2 &#125;,</span><br><span class="line">  &#123; &#125;,</span><br><span class="line">  &#123; id: null &#125;,</span><br><span class="line">  &#123; id: NaN &#125;,</span><br><span class="line">  &#123; id: &apos;undefined&apos; &#125;</span><br><span class="line">];</span><br><span class="line">var invalidEntries = 0; // 用来记录无效条目数</span><br><span class="line">function isNumber(obj) &#123; // 判断是不是数字</span><br><span class="line">    return obj!== undefined &amp;&amp; typeof(obj) === &apos;number&apos; &amp;&amp; !isNaN(obj);</span><br><span class="line">&#125;</span><br><span class="line">function filterByID(item) &#123; // 过滤id，是数字的返回true，否则返回false</span><br><span class="line">    if (isNumber(item.id)) &#123;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">    invalidEntries++;</span><br><span class="line">    return false;</span><br><span class="line">&#125;</span><br><span class="line">var arrByID = arr.filter(filterByID);</span><br><span class="line">console.log(&apos;过滤后的数组\n&apos;, arrByID); // 过滤后的数组---[&#123; id: 15 &#125;, &#123; id: -1 &#125;, &#123; id: 0 &#125;, &#123; id: 3 &#125;, &#123; id: 12.2 &#125;]</span><br><span class="line">console.log(&apos;无效条目数 = &apos;, invalidEntries); // 无效条目数 = 4</span><br></pre></td></tr></table></figure></p>
<p>借助生成器可以非常轻松地实现自定义迭代器，记住，迭代器贯穿ES6的始终，它是数据和循环的新标准。</p>
<p><strong> 生成器和异步代码及同步 </strong></p>
<p>异步API通常需要一个回调函数，这意味着你需要为每一次任务执行编写额外的异步函数。异步API拥有错误处理规则，不支持异常处理。不同的API有不同的规则，大多数的错误规则是默认的；在有些API里，甚至连成功提示都是默认的。<br>生成器为你提供了避免异步代码问题的新思路。</p>
<p>实验性的Q.async()尝试结合promises使用生成器产生异步代码的等效同步代码。(async 函数就是 Generator 函数的语法糖,async 函数很多人认为它是异步操作的终极解决方案。)举个例子：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">// 制造一些噪音的同步代码。</span><br><span class="line">function makeNoise() &#123;</span><br><span class="line">    shake();</span><br><span class="line">    rattle();</span><br><span class="line">    roll();</span><br><span class="line">&#125;</span><br><span class="line">// 制造一些噪音的异步代码。</span><br><span class="line">// 返回一个Promise对象</span><br><span class="line">// 当我们制造完噪音的时候会变为resolved</span><br><span class="line">function makeNoise_async() &#123;</span><br><span class="line">    // 注意目前浏览器都只支持ES5，所以该代码会在浏览器上报错</span><br><span class="line">    return Q.async(function* () &#123;</span><br><span class="line">      yield shake_async();</span><br><span class="line">      yield rattle_async();</span><br><span class="line">      yield roll_async();</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line">// Q.async()尝试结合promises</span><br><span class="line">var eventualAdd = Q.async(function* (oneP, twoP) &#123;</span><br><span class="line">    var one = yield oneP;</span><br><span class="line">    var two = yield twoP;</span><br><span class="line">    return one + two;</span><br><span class="line">&#125;);</span><br><span class="line">eventualAdd(eventualOne, eventualTwo).then(function (three) &#123;</span><br><span class="line">    three === 3;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>二者主要的区别是，异步版本必须在每次调用异步函数的地方添加yield关键字。<br>要玩Q.async()请记得引入<script src="q.js"></script>，并且在支持ES6转换为ES5的编辑器中编程。这里附上相关链接:Q.async()和q.js，以及async 函数的含义和用法</p>
<p>在Q.async版本中添加一个类似if语句的判断或try/catch块，如同向同步版本中添加类似功能一样简单。与其它异步代码编写方法相比，这种方法更自然，不像是学一门新语言一样辛苦。</p>
<p>生成器为我们提供了一个新的异步编程模型思路，这种方法更适合人类的大脑。此外，更好的语法或许会有帮助，ES7中有一个有关异步函数的提案，它基于promises和生成器构建，并从C#相似的特性中汲取了大量灵感。</p>
<p>如何应用这些疯狂的新特性？</p>
<p>在服务器端，现在你可以在io.js中使用ES6（在Node中你需要使用–harmony这个命令行选项）。<br>在浏览器端，到目前为止只有Firefox 27+和Chrome 39+支持了ES6生成器。如果要在web端使用生成器，你需要使用Babel或Traceur来将你的ES6代码转译为Web友好的ES5。</p>
<p>起初，JS中的生成器由Brendan Eich实现，他的设计参考了Python生成器，而此外Python生成器则受到Icon的启发。他们早在2006年就在Firefox 2.0中移植了相关代码。但是，标准化的道路崎岖不平，相关语法和行为都在原先的基础上有所改动。Firefox和Chrome中的ES6生成器都是由编译器hacker Andy Wingo实现的。</p>
<p>结语</p>
<p>生成器还有更多未提及的特性，例如：.throw()和.return()方法、可选参数.next()、yield*表达式语法。由于行文过长，估计各位观众老爷们已然疲乏，剩下的干货择机为大家献上。</p>
<p>由于我们接连搬了ES6的两座大山：迭代器和生成器，以及for-of,下次再给大家分享更好的ES6特性。</p>

      

      
    </div>
    <div class="article-info article-info-index">
      
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Generators/">Generators</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/for-of循环/">for-of循环</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/迭代器/">迭代器</a></li></ul>
	</div>

      
	<div class="article-category tagcloud">
	<i class="icon-book icon"></i>
	<a class="article-category-link" href="/categories/前端技术/">前端技术</a>
	</div>


      
        <p class="article-more-link">
          <a class="article-more-a" href="/2017/02/17/blog20170217/">展开全文 >></a>
        </p>
      

      
      <div class="clearfix"></div>
    </div>
  </div>
</article>








  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/4/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/6/">Next &raquo;</a>
    </nav>
  


          </div>
        </div>
      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2018 影子爱乘凉
    	</div>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		mathjax: false,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true
	}
</script>

<script src="/./main.js?v=4.0.0"></script>


    
<div class="tools-col" q-class="show:isShow,hide:isShow|isFalse" q-on="click:stop(e)">
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all" q-show="innerArchive">
        <div class="search-wrap">
          <input class="search-ipt" q-model="search" type="text" placeholder="find something…">
          <i class="icon-search icon" q-show="search|isEmptyStr"></i>
          <i class="icon-close icon" q-show="search|isNotEmptyStr" q-on="click:clearChose(e)"></i>
        </div>
        <div class="widget tagcloud search-tag">
          <p class="search-tag-wording">tag:</p>
          <label class="search-switch">
            <input type="checkbox" q-on="click:toggleTag(e)" q-attr="checked:showTags">
          </label>
          <ul class="article-tag-list" q-show="showTags">
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">生活</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">git</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">java学习记录</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">js</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">markdown</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">npm</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Servlet</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">--disable-web-security</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Bootstrap</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">jsp</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">iScroll</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">位运算符NOT(~)</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">过滤器filter</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Listener</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">cookie</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">session</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">匿名函数自执行</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">插件接口extend</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">js中this</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">defer</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">async</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">$.Deferred()</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">支付宝集五福</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">JFinal 3.0</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">$.Callbacks()</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">js执行模型</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">css技巧</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">queue()</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">dropload</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Javascript深浅拷贝</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">setTimeout</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">迭代器</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">for-of循环</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Generators</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">sublime</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Emmet</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">jQuery.Validate.js</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">data()</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">ajax cache</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">WebStorage</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">localStorage</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">前端优化</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">ready()</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Vue-cli proxyTable</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">ANT DESIGN</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Javascript的jsonp原理</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">tippyjs</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">prop-types</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">CSRF（Cross-site request forgery）</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Webpack</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">国际音标</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">英语语法</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">工作总结</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">html5 video</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">npmrc文件中设置淘宝镜像</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">web开发快速提高工作效率的网址及工具</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">atom开发常用插件</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">CMD常用命令大全</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">常用的200个动词</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">英语中相似单词</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">inner join, left join, right join, full outer join</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">GifCam</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">aaencode</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">activity</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Immutable</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">video视频标签</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">第一行 Android 代码</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">yarn与npm的命令行小结</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">天津市津南区图书馆</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Will be married</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">SASS</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">揭秘react生态体系</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">.bat</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">如何在 Vue.js 中使用第三方库 </a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">vue 响应式原理</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">刘姓姓名收集</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">排序算法</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">HEXO</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">Vue.js中ajax请求</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">大前端工具集</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">jquery</a>
              </li>
             
              <li class="article-tag-list-item">
                <a href="javascript:void(0)">stop</a>
              </li>
            
            <div class="clearfix"></div>
          </ul>
        </div>
        <ul class="search-ul">
          <p q-show="jsonFail" style="padding: 20px; font-size: 12px;">
            缺失模块。<br/>1、在博客根目录（注意不是yilia根目录）执行以下命令：<br/> npm i hexo-generator-json-content --save<br/><br/>
            2、在根目录_config.yml里添加配置：
<pre style="font-size: 12px;" q-show="jsonFail">
  jsonContent:
    meta: false
    pages: false
    posts:
      title: true
      date: true
      path: true
      text: true
      raw: false
      content: false
      slug: false
      updated: false
      comments: false
      link: false
      permalink: false
      excerpt: false
      categories: false
      tags: true
</pre>
          </p>
          <li class="search-li" q-repeat="items" q-show="isShow">
            <a q-attr="href:path|urlformat" class="search-title"><i class="icon-quo-left icon"></i><span q-text="title"></span></a>
            <p class="search-time">
              <i class="icon-calendar icon"></i>
              <span q-text="date|dateformat"></span>
            </p>
            <p class="search-tag">
              <i class="icon-price-tags icon"></i>
              <span q-repeat="tags" q-on="click:choseTag(e, name)" q-text="name|tagformat"></span>
            </p>
          </li>
        </ul>
    	</section>
    

    

    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>