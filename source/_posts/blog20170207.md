---
title: jQuery源码分析--queue()队列方法
date: 2017-02-07 10:23:05
category: "jQuery源码分析"
tags: "queue()"
---
## queue源码简化
```
jQuery.extend({
	queue                push()
	dequeue              shift()
	_queueHooks
});
jQuery.fn.extend({
	queue
	dequeue
	delay
	clearQueue
	promise
});
```

## 基本用法
> 队列中存储的都是函数
工具方法：
```

	function aaa(){
		alert(1);
	}
	
	function bbb(){
		alert(2);
	}
	
	//$.queue( document , 'q1' , aaa );   
	//$.queue( document , 'q1' , bbb );
	//$.queue( document , 'q1' , [aaa,bbb] );   
	//console.log(   $.queue( document , 'q1' )   );
	//$.dequeue( document,'q1' );   //aaa()
	//$.dequeue( document,'q1' );   //bbb()
```
实例方法:
```
	function aaa(){
		alert(1);
	}
	
	function bbb(){
		alert(2);
	}
	
	$(document).queue('q1',aaa);
	$(document).queue('q1',bbb);
	
	//console.log(  $(document).queue('q1')  );
	
	$(document).dequeue('q1');
	$(document).dequeue('q1');
```

```
	$(this).animate({width : 300},2000).queue(function(next){
		
		$(this).css('height',300);
		next();
		
	}).animate({left : 300},2000);
	
	/*$(this).animate({width : 300},2000,function(){
		
		//$(this).css('height',300);
		var This = this;
		var timer = setInterval(function(){
			This.style.height = This.offsetHeight + 1 + 'px';
			if( This.offsetHeight == 200 ){
				clearInterval(timer);
			}
		},30);
		
		
	}).animate({left : 300},2000);*/    
	
	
	this).animate({width : 300},2000).queue(function(next){
		
		var This = this;
		var timer = setInterval(function(){
			This.style.height = This.offsetHeight + 1 + 'px';
			if( This.offsetHeight == 200 ){
				next();
				clearInterval(timer);
			}
		},30);
		
		
	}).animate({left : 300},2000);
```

## delay 延迟队列执行